import{r as t,u as D,i as Y,j as e,F as b,k as A,b as L,a as R,B as _,S as d,d as H}from"./index-B1xux7nW.js";import{c as K,C as O,a as U,d as G,b as J}from"./card-BENweYTJ.js";import{I as c}from"./input-DilSF8vW.js";import{L as p}from"./label-8qc7pw4D.js";function Z(){const[l,h]=t.useState(""),[n,g]=t.useState(""),[u,m]=t.useState(""),[x,f]=t.useState(""),[w,j]=t.useState(!1),[v,i]=t.useState(null),[y,N]=t.useState(null),[a,q]=t.useState(!1),z=D(),S=Y(),[k,B]=t.useState(!1),[P,M]=t.useState(!1);t.useEffect(()=>{const s=new URLSearchParams(S.search),r=s.get("token"),o=s.get("email");r&&m(r),o&&f(o)},[S.search]);const T=async s=>{var r,o,C,E;if(s.preventDefault(),i(null),N(null),!l||!n||!u||!x){i("Please fill in all fields."),d.fire({icon:"error",title:"Missing Fields",text:"Please fill in all fields."});return}if(l.trim()!==n.trim()){i("Passwords do not match."),d.fire({icon:"error",title:"Password Mismatch",text:"Passwords do not match."});return}j(!0);try{await H.post("reset-password",{password:l.trim(),password_confirmation:n.trim(),token:u,email:x}),N("Password reset successful!"),h(""),g(""),m(""),f(""),q(!0),d.fire({icon:"success",title:"Success",text:"Password reset successful!"})}catch(F){const I=((o=(r=F.response)==null?void 0:r.data)==null?void 0:o.message)||((E=(C=F.response)==null?void 0:C.data)==null?void 0:E.detail)||"Failed to reset password. Please try again.";i(I),d.fire({icon:"error",title:"Error",text:I})}finally{j(!1)}};return e.jsxs("div",{className:"relative flex items-center justify-center min-h-screen overflow-hidden bg-gradient-to-br from-indigo-900 via-blue-800 to-blue-400 animate-gradient-x",children:[e.jsxs("div",{className:"absolute inset-0 z-0 pointer-events-none",children:[e.jsx("div",{className:"absolute top-0 left-0 w-96 h-96 bg-blue-300 opacity-20 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-purple-300 opacity-20 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 w-[600px] h-[600px] -translate-x-1/2 -translate-y-1/2 bg-gradient-to-tr from-blue-400 via-purple-300 to-pink-200 opacity-10 rounded-full blur-2xl animate-spin-slow"})]}),e.jsxs(K,{className:"w-full max-w-md md:w-[90%] shadow-2xl rounded-2xl border border-white/30 backdrop-blur-lg bg-white/20 z-10 animate-fade-in-up transition-all duration-700 hover:shadow-[0_8px_32px_0_rgba(31,38,135,0.37)] hover:border-blue-300/60",children:[e.jsx(O,{children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"bg-blue-600/80 rounded-full p-4 shadow-lg mb-2",children:e.jsx(b,{icon:A,className:"text-white text-3xl"})}),e.jsx(U,{className:"text-3xl font-bold text-center text-blue-100 drop-shadow-lg",children:"Reset Password"}),e.jsx(G,{className:"text-center text-base text-blue-100 mt-1",children:"Enter your details to reset your password."})]})}),e.jsx(J,{children:e.jsxs("form",{className:"flex flex-col gap-4",onSubmit:T,children:[e.jsxs("div",{className:"flex flex-col gap-1.5 relative",children:[e.jsx(p,{htmlFor:"email",className:"text-blue-100",children:"Email"}),e.jsx(c,{id:"email",type:"email",readOnly:!0,value:x,onChange:s=>f(s.target.value),required:!0,disabled:a,className:"bg-blue-50/80 h-12 rounded-lg border-2 focus:border-blue-400 transition-all duration-200"})]}),e.jsx(c,{id:"token",type:"hidden",value:u,onChange:s=>m(s.target.value),required:!0,disabled:a}),e.jsxs("div",{className:"flex flex-col gap-1.5 relative",children:[e.jsx(p,{htmlFor:"password",className:"text-blue-100",children:"Password"}),e.jsx(c,{id:"password",type:k?"text":"password",value:l,onChange:s=>h(s.target.value),required:!0,disabled:a,className:"bg-blue-50/80 h-12 rounded-lg border-2 focus:border-blue-400 transition-all duration-200 pr-10"}),e.jsx("button",{type:"button",tabIndex:-1,className:"absolute right-3 top-10 transform -translate-y-1/2 cursor-pointer text-[#93c5fd]",onClick:()=>B(s=>!s),style:{background:"none",border:"none",padding:0,margin:0},children:e.jsx(b,{icon:k?L:R})})]}),e.jsxs("div",{className:"flex flex-col gap-1.5 relative",children:[e.jsx(p,{htmlFor:"confirm-password",className:"text-blue-100",children:"Confirm Password"}),e.jsx(c,{id:"confirm-password",type:P?"text":"password",value:n,onChange:s=>g(s.target.value),required:!0,disabled:a,className:"bg-blue-50/80 h-12 rounded-lg border-2 focus:border-blue-400 transition-all duration-200 pr-10"}),e.jsx("button",{type:"button",tabIndex:-1,className:"absolute right-3 top-10 transform -translate-y-1/2 cursor-pointer text-[#93c5fd]",onClick:()=>M(s=>!s),style:{background:"none",border:"none",padding:0,margin:0},children:e.jsx(b,{icon:P?L:R})})]}),v&&e.jsx("div",{className:"text-red-600 text-sm text-center",children:v}),y&&e.jsx("div",{className:"text-green-600 text-sm text-center",children:y}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx(_,{type:"submit",disabled:w||a,className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-blue-600 to-blue-400 hover:from-blue-700 hover:to-blue-500 text-white font-bold py-2 rounded-lg shadow-lg transition-all duration-200",children:w?e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Sending..."}),e.jsx("span",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"})]}):e.jsx("span",{children:"Submit"})}),e.jsx(_,{type:"button",disabled:!a,onClick:()=>z("/user-login"),className:"w-full flex items-center justify-center gap-2 bg-red-600 hover:bg-red-500 text-white hover:text-white",children:e.jsx("span",{children:"Back to login"})})]})]})})]}),e.jsx("style",{children:`
          @keyframes gradient-x {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
          }
          .animate-gradient-x {
            background-size: 200% 200%;
            animation: gradient-x 10s ease-in-out infinite;
          }
          @keyframes fade-in-up {
            from { opacity: 0; transform: translateY(40px);}
            to { opacity: 1; transform: translateY(0);}
          }
          .animate-fade-in-up {
            animation: fade-in-up 0.8s cubic-bezier(.39,.575,.565,1) both;
          }
          @keyframes spin-slow {
            0% { transform: rotate(0deg);}
            100% { transform: rotate(360deg);}
          }
          .animate-spin-slow {
            animation: spin-slow 18s linear infinite;
          }
        `})]})}export{Z as default};
