import{j as e,L as W,r as l,B as b,F as t,a as G,ae as I,aa as A,ad as J,ah as X,a4 as Y,ai as Z,aj as ee,a1 as se,ap as ae,aq as B,ar as te,al as le,d as re}from"./index-DzP73YiP.js";import{B as ne,a as ie,b as oe,c as ce}from"./breadcrumb-rxFn7GaQ.js";import{c as de,C as xe,b as me}from"./card-CDyzF-Gu.js";import{I as C}from"./input-Dz3A7Y41.js";import{L as n}from"./label-D6n5wU68.js";import{S as he,a as fe,b as be,c as ge,d as c}from"./select-CDDnd22d.js";import{D as L,a as ue,b as E,c as je,d as pe,g as Ne,e as H,f as we,T as ve,h as ye,i as D,j as o,k as Se,l as r}from"./dialog-BXUA4-iJ.js";function Ce(){return e.jsx("div",{className:"bg-gradient-to-r from-blue-900 via-blue-800 to-blue-700 shadow-lg flex flex-row items-center gap-4 p-4 rounded-xl mb-8 border border-blue-800/40",children:e.jsx("div",{className:"flex flex-col items-start md:items-center md:justify-center md:ml-10 text-accent fade-in-right w-full",children:e.jsx(ne,{children:e.jsxs(ie,{children:[e.jsx(oe,{className:"text-accent",children:e.jsx(W,{to:"/agent-broker/agent-salesReport",children:"List of Sales Report"})}),e.jsx(ce,{})]})})})})}function De({sales:a,dateFormatter:v,currencyFormatter:d}){var g;const p=l.useRef(null),[x,m]=l.useState(!1);return e.jsx("div",{children:e.jsxs(L,{children:[e.jsx(ue,{children:e.jsx(b,{className:"h-8 w-8 font-medium text-sm rounded-md border border-primary bg-gradient-to-br from-blue-500 to-blue-700 text-white shadow hover:from-blue-600 hover:to-blue-800 transition-all duration-200",children:e.jsx(t,{icon:G})})}),e.jsxs(E,{className:"md:w-[95%] max-w-2xl h-full overflow-auto bg-gradient-to-br from-blue-50 to-blue-100 shadow-2xl border border-blue-200",children:[e.jsxs(je,{children:[e.jsxs(pe,{className:"text-start text-2xl font-bold text-blue-900 flex items-center gap-2",children:[e.jsx(t,{icon:I,className:"text-blue-500"}),"View Receipt"]}),e.jsx(Ne,{children:e.jsxs("div",{ref:p,className:"grid gap-6 py-6 text-start bg-white rounded-xl shadow-inner px-6",children:[e.jsxs("div",{className:"flex items-center gap-3 border-b pb-3",children:[e.jsx(t,{icon:A,className:"text-blue-400 text-lg"}),e.jsx(n,{className:"text-gray-600 font-semibold",children:"Broker/Agent:"}),e.jsxs("span",{className:"ml-2 text-base text-gray-800 font-medium",children:[a.agent.personal_info.first_name," ",a.agent.personal_info.middle_name," ",a.agent.personal_info.last_name," ",(g=a.agent.personal_info)==null?void 0:g.extension_name]})]}),e.jsxs("div",{className:"flex items-center gap-3 border-b pb-3",children:[e.jsx(t,{icon:A,className:"text-blue-400 text-lg"}),e.jsx(n,{className:"text-gray-600 font-semibold",children:"Client Name:"}),e.jsx("span",{className:"ml-2 text-base text-gray-800 font-medium",children:a.client_name})]}),e.jsxs("div",{className:"flex items-center gap-3 border-b pb-3",children:[e.jsx(t,{icon:I,className:"text-blue-400 text-lg"}),e.jsx(n,{className:"text-gray-600 font-semibold",children:"Category:"}),e.jsx("span",{className:"ml-2 text-base text-gray-800 font-medium",children:a.category})]}),e.jsxs("div",{className:"flex items-center gap-3 border-b pb-3",children:[e.jsx(t,{icon:J,className:"text-blue-400 text-lg"}),e.jsx(n,{className:"text-gray-600 font-semibold",children:"Date of Sale:"}),e.jsx("span",{className:"ml-2 text-base text-gray-800 font-medium",children:v.format(new Date(a.date_on_sale))})]}),e.jsxs("div",{className:"flex items-center gap-3 border-b pb-3",children:[e.jsx(t,{icon:X,className:"text-green-500 text-lg"}),e.jsx(n,{className:"text-gray-600 font-semibold",children:"Amount:"}),e.jsx("span",{className:"ml-2 text-base text-green-700 font-bold",children:d.format(a.amount)})]}),e.jsxs("div",{className:"flex items-center gap-3 border-b pb-3",children:[e.jsx(t,{icon:Y,className:"text-red-400 text-lg"}),e.jsx(n,{className:"text-gray-600 font-semibold",children:"Location:"}),e.jsx("span",{className:"ml-2 text-base text-gray-800 font-medium",children:a.location})]}),e.jsxs("div",{className:"flex items-center gap-3 border-b pb-3",children:[e.jsx(t,{icon:Z,className:"text-indigo-400 text-lg"}),e.jsx(n,{className:"text-gray-600 font-semibold",children:"Remarks:"}),e.jsx("span",{className:"ml-2 text-base text-gray-800 font-medium",children:a.remarks})]}),e.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[e.jsxs(n,{className:"text-gray-600 font-semibold flex items-center gap-2",children:[e.jsx(t,{icon:ee,className:"text-pink-400 text-lg"}),"Proof of Transaction:"]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{src:`https://athomes.site/${a.image}`,alt:a.image,className:"object-cover rounded-lg border-2 border-blue-200 shadow-md max-w-xs max-h-60 cursor-pointer transition-transform duration-200 hover:scale-105 hover:ring-2 hover:ring-primary",onClick:()=>m(!0),title:"Click to preview"})}),e.jsx(L,{open:x,onOpenChange:m,children:e.jsxs(E,{className:"md:max-w-[80vw] flex flex-col items-center bg-white rounded-xl shadow-2xl",children:[e.jsx("img",{src:`https://athomes.site/${a.image}`,alt:a.image,className:"max-w-[80vw] max-h-[80vh] rounded shadow-lg"}),e.jsx(H,{children:e.jsxs(b,{className:"mt-4 bg-red-500 hover:bg-red-400 text-white",onClick:()=>m(!1),children:[e.jsx(t,{icon:se,className:"mr-1"}),"Close"]})})]})})]})]})})]}),e.jsx(H,{children:e.jsx("div",{className:"flex flex-row justify-end gap-2",children:e.jsx(we,{asChild:!0,children:e.jsx(b,{className:"bg-red-500 hover:bg-red-400 h-8 rounded shadow",children:"Close"})})})})]})]})})}function Re(){const[a,v]=l.useState([]),[d,p]=l.useState(""),[x,m]=l.useState(""),[g,$]=l.useState(""),[R,M]=l.useState(""),[u,k]=l.useState("all"),[y,_]=l.useState(""),[P,T]=l.useState(!1),V=async()=>{try{const s=await re.get("user/agent-broker",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("access_token")}`}});v(s.data.salesEncodingReport)}catch{}};l.useEffect(()=>{V()},[]);const F=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"2-digit"}),S=new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}),O=s=>{m(s.target.value)},q=s=>{p(s.target.value)},h=a.filter(s=>{var f;if(d||x){const i=new Date(s.date_on_sale);i.setHours(0,0,0,0);let w=null,j=null;if(d&&(w=new Date(d),w.setHours(0,0,0,0),i<w)||x&&(j=new Date(x),j.setHours(23,59,59,999),i>j))return!1}if(g&&s.category!==g||R&&s.remarks!==R)return!1;if(y){const i=y.toLowerCase();if(![s.client_name,s.category,s.remarks,s.location,(f=s.amount)==null?void 0:f.toString(),s.date_on_sale].filter(Boolean).some(j=>j.toLowerCase().includes(i)))return!1}return!0}),Q=s=>s>=1e6?`${(s/1e6).toFixed(2)} M`:s>=1e3?`${(s/1e3).toFixed(2)} K`:S.format(s),U=s=>{_(s.target.value)},N=u==="all"?h:h.slice(0,parseInt(u,10)),z=N.reduce((s,f)=>{const i=parseFloat(f.amount);return s+(isNaN(i)?0:i)},0),K=()=>{k("all"),_(""),p(""),m(""),$(""),M("")};return e.jsx("div",{children:e.jsxs(de,{className:"bg-[#eef2ff] border-b-4 border-primary fade-in-left md:w-[380px]",children:[e.jsx(xe,{children:e.jsxs("div",{className:"w-full flex flex-row md:flex-col md:items-start gap-4",children:[e.jsxs("div",{className:"flex flex-col w-[700px] md:w-[152px]",children:[e.jsx(n,{className:"text-xs font-semibold text-blue-900 mb-1",children:"Date Range"}),e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsx(C,{type:"date",className:"w-full bg-white/80 border border-primary focus:ring-2 focus:ring-blue-300 transition text-xs",placeholder:"Start Date",value:d,onChange:q}),e.jsx("span",{className:"flex items-center text-gray-400",children:"-"}),e.jsx(C,{type:"date",className:"w-full bg-white/80 border border-primary focus:ring-2 focus:ring-blue-300 transition text-xs",placeholder:"End Date",value:x,onChange:O})]})]}),e.jsxs("div",{className:"flex flex-row w-full gap-2 md:grid md:grid-cols-3 md:w-full mt-5",children:[e.jsxs(b,{onMouseEnter:()=>T(!0),onMouseLeave:()=>T(!1),onClick:K,children:[e.jsx(t,{icon:ae,className:`${P?"animate-spin":""}`}),"Refresh"]}),e.jsxs(b,{className:"bg-red-500 text-white hover:bg-red-400 flex items-center gap-2 transition text-xs px-3 py-2 rounded-lg",children:[e.jsx(t,{icon:B}),"PDF"]}),e.jsxs(b,{className:"bg-green-500 text-white hover:bg-green-400 flex items-center gap-2 transition text-xs px-3 py-2 rounded-lg",children:[e.jsx(t,{icon:B}),"Excel"]})]})]})}),e.jsxs(me,{children:[e.jsxs("div",{className:"py-2 mt-5 flex flex-row justify-between gap-4",children:[e.jsxs(he,{value:u,onValueChange:k,children:[e.jsxs(fe,{className:"w-[120px] border border-primary",children:[e.jsx("span",{className:"text-[#172554]",children:"Show"}),e.jsx(be,{placeholder:"All"})]}),e.jsxs(ge,{children:[e.jsx(c,{value:"all",children:"All"}),e.jsx(c,{value:"5",children:"5"}),e.jsx(c,{value:"10",children:"10"}),e.jsx(c,{value:"20",children:"20"}),e.jsx(c,{value:"30",children:"30"}),e.jsx(c,{value:"40",children:"40"}),e.jsx(c,{value:"50",children:"50"})]})]}),e.jsx(C,{type:"text",placeholder:"Search",className:"w-52 md:w-full",value:y,onChange:U})]}),e.jsx("div",{className:"fade-in-left ",children:e.jsxs(ve,{children:[e.jsx(ye,{className:"bg-primary text-base",children:e.jsxs(D,{children:[e.jsx(o,{children:"#"}),e.jsx(o,{children:"Client name"}),e.jsx(o,{children:"Category"}),e.jsx(o,{children:"Reservation date"}),e.jsx(o,{children:"Location"}),e.jsx(o,{children:"Amount"}),e.jsx(o,{children:"Remarks"}),e.jsx(o,{className:"text-right",children:"Action"})]})}),e.jsxs(Se,{children:[N.length===0&&e.jsx(D,{children:e.jsx(r,{colSpan:8,className:"text-center text-sm font-medium text-gray-500",children:"No record found."})}),N.map((s,f)=>e.jsxs(D,{children:[e.jsx(r,{className:"font-medium border border-[#bfdbfe]",children:f+1}),e.jsx(r,{className:"border border-[#bfdbfe]",children:s.client_name}),e.jsx(r,{className:"border border-[#bfdbfe]",children:s.category}),e.jsx(r,{className:"border border-[#bfdbfe]",children:F.format(new Date(s.date_on_sale))}),e.jsx(r,{className:"border border-[#bfdbfe]",children:s.location}),e.jsx(r,{className:"border border-[#bfdbfe]",children:S.format(s.amount)}),e.jsx(r,{className:"border border-[#bfdbfe]",children:s.remarks}),e.jsx(r,{className:"text-right border border-[#bfdbfe]",children:e.jsx(De,{sales:s,dateFormatter:F,currencyFormatter:S})})]},s.id))]})]})}),e.jsx("div",{className:"flex flex-row  justify-end mt-3",children:e.jsx("div",{children:e.jsx("p",{className:"text-[#172554] text-sm w-full",children:h.length===0?"Showing 0 entries":`Showing 1 to ${u==="all"?h.length:Math.min(parseInt(u)||0,h.length)} of ${h.length} entries`})})}),e.jsxs("div",{className:"grid grid-cols-4 md:grid-cols-2 gap-3 mt-6 ",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-blue-100 border border-blue-300 rounded-full px-4 py-2 shadow-sm",children:[e.jsx(t,{icon:te,className:"text-blue-700 h-5"}),e.jsx("span",{className:"font-bold text-blue-900 text-base",children:Q(z)}),e.jsx("span",{className:"text-xs text-blue-700 font-semibold ml-1",children:"Total Sales"})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 border border-blue-200 rounded-full px-4 py-2 shadow-sm",children:[e.jsx(t,{icon:le,className:"text-blue-700 h-5"}),e.jsx("span",{className:"font-bold text-blue-900 text-base",children:N.length}),e.jsx("span",{className:"text-xs text-blue-700 font-semibold ml-1",children:"Total Reservation"})]})]})]})]})})}function Le(){return e.jsx("div",{className:"flex flex-col md:flex-row gap-4",children:e.jsxs("div",{className:"ml-72 md:ml-0  gap-2 items-start justify-center mr-5 md:px-2 ",children:[e.jsx(Ce,{}),e.jsx(Re,{})]})})}export{Le as default};
