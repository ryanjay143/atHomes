import{r as p,j as e,B as _,F as j,a as E,X as w,aa as I,d as Y}from"./index-DzP73YiP.js";import{S as k,a as $,b as H,c as M,d as l}from"./select-CDDnd22d.js";import{I as P}from"./input-Dz3A7Y41.js";import{T as R,h as U,i as N,j as a,k as F,l as r,D as V,a as O,b as Q,c as z,d as G,g as X,f as q}from"./dialog-BXUA4-iJ.js";import{f as J,a as K}from"./dateUtils-D6w6W0GJ.js";function ae(){const[y,D]=p.useState([]),[m,A]=p.useState(""),[c,C]=p.useState("all"),S=async()=>{try{const s=await Y.get("agent-broker",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("access_token")}`}});D(s.data.agentsLicensed)}catch(s){console.error("Error fetching members:",s)}};p.useEffect(()=>{S()},[]);const T=s=>{A(s.target.value)},L=s=>{C(s==="all"?"all":parseInt(s))},h=y.filter(s=>{var o,t,n,i,d,x;const u=`${s.prc_liscence_number}`.toLowerCase(),b=`${(o=s==null?void 0:s.personal_info)==null?void 0:o.first_name} ${(t=s==null?void 0:s.personal_info)==null?void 0:t.middle_name} ${(n=s==null?void 0:s.personal_info)==null?void 0:n.last_name} ${(i=s==null?void 0:s.personal_info)==null?void 0:i.extension_name}`.toLowerCase(),f=((d=s==null?void 0:s.user)==null?void 0:d.role)===1?"agent":((x=s==null?void 0:s.user)==null?void 0:x.role)===2?"broker":"";return b.includes(m.toLowerCase())||f.includes(m.toLowerCase())||u.includes(m.toLowerCase())}),g=c==="all"?h:h.slice(0,c),B=s=>s===0?e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-green-100 text-green-700 text-xs font-semibold",children:"Approved"}):s===1?e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-yellow-100 text-yellow-700 text-xs font-semibold",children:"Pending"}):e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-red-100 text-red-700 text-xs font-semibold",children:"Declined"});return e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"py-2 flex flex-row justify-between gap-4",children:[e.jsxs(k,{onValueChange:L,children:[e.jsxs($,{className:"w-[120px] border border-primary md:w-28",children:[e.jsx("span",{className:"text-[#172554]",children:"Show"}),e.jsx(H,{placeholder:"All"})," "]}),e.jsxs(M,{children:[e.jsx(l,{value:"all",children:"All"}),e.jsx(l,{value:"10",children:"10"}),e.jsx(l,{value:"20",children:"20"}),e.jsx(l,{value:"30",children:"30"}),e.jsx(l,{value:"40",children:"40"}),e.jsx(l,{value:"50",children:"50"})]})]}),e.jsx(P,{type:"text",placeholder:"Search",className:"w-52 md:w-full",value:m,onChange:T})]}),e.jsx("div",{className:"fade-in-left",children:e.jsxs(R,{children:[e.jsx(U,{children:e.jsxs(N,{children:[e.jsx(a,{children:"#"}),e.jsx(a,{children:"Licensed No."}),e.jsx(a,{children:"Fullname"}),e.jsx(a,{children:"Type"}),e.jsx(a,{children:"Email address"}),e.jsx(a,{children:"Contact number"}),e.jsx(a,{children:"Date Approved"}),e.jsx(a,{className:"text-right",children:"Action"})]})}),e.jsx(F,{children:g.length>0?g.map((s,u)=>{var b,f,o,t,n,i,d,x,v;return e.jsxs(N,{children:[e.jsx(r,{className:"font-medium border border-[#bfdbfe]",children:u+1}),e.jsx(r,{className:"border border-[#bfdbfe] uppercase",children:s.prc_liscence_number}),e.jsxs(r,{className:"font-medium border border-[#bfdbfe] uppercase",children:[s.personal_info.first_name," ",s.personal_info.middle_name," ",s.personal_info.last_name," ",s.personal_info.extension_name]}),e.jsx(r,{className:"border border-[#bfdbfe]",children:((b=s==null?void 0:s.user)==null?void 0:b.role)===1?e.jsx("span",{className:"inline-flex unlicenseds-center rounded-md bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700 ring-1 ring-blue-700/10 ring-inset",children:"Agent"}):((f=s==null?void 0:s.user)==null?void 0:f.role)===2?e.jsx("span",{className:"inline-flex unlicenseds-center rounded-md bg-green-50 px-2 py-1 text-xs font-medium text-green-700 ring-1 ring-green-600/20 ring-inset",children:"Broker"}):(o=s==null?void 0:s.user)==null?void 0:o.role}),e.jsx(r,{className:"border border-[#bfdbfe]",children:s.user.email}),e.jsx(r,{className:"border border-[#bfdbfe]",children:s.personal_info.phone}),e.jsx(r,{className:"border border-[#bfdbfe]",children:J(s==null?void 0:s.user.updated_at)}),e.jsx(r,{className:"text-right border border-[#bfdbfe]",children:e.jsx("div",{className:"flex flex-row gap-1 justify-end",children:e.jsxs(V,{children:[e.jsx(O,{children:e.jsx(_,{className:"w-8 h-8 rounded-md border border-primary bg-gradient-to-br from-blue-500 to-blue-700 shadow hover:from-blue-600 hover:to-blue-800 transition-all duration-200",children:e.jsx(j,{icon:E,className:"text-white"})})}),e.jsx(Q,{className:"md:max-w-[400px] rounded-2xl bg-gradient-to-br from-blue-50 to-blue-100 shadow-2xl border border-blue-200",children:e.jsxs(z,{children:[e.jsxs(G,{className:"text-start text-2xl font-bold text-blue-900 flex items-center gap-2",children:[e.jsx(j,{icon:w,className:"text-blue-500"}),"Agent & Broker Details"]}),e.jsx(X,{children:e.jsxs("div",{className:"flex flex-col gap-6 mt-6 mb-4",children:[e.jsxs("div",{className:"border-b pb-4 mb-2 text-start",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(j,{icon:I,className:"text-blue-400"}),e.jsx("h2",{className:"text-lg font-bold text-blue-800",children:"Personal Details"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-1 text-sm text-gray-700",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Name:"})," ",(t=s==null?void 0:s.personal_info)==null?void 0:t.first_name," ",(n=s==null?void 0:s.personal_info)==null?void 0:n.middle_name," ",(i=s==null?void 0:s.personal_info)==null?void 0:i.last_name]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Email:"})," ",(d=s==null?void 0:s.user)==null?void 0:d.email]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Username:"})," ",(x=s==null?void 0:s.user)==null?void 0:x.username]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Phone:"})," ",(v=s==null?void 0:s.personal_info)==null?void 0:v.phone]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Gender:"})," ",s.personal_info.gender.charAt(0).toUpperCase()+s.personal_info.gender.slice(1)]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Complete Address:"})," ",s.personal_info.complete_address]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold",children:"Status:"}),B(s.user.status)]})]})]}),e.jsxs("div",{className:"text-start",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(j,{icon:w,className:"text-blue-400"}),e.jsx("h2",{className:"text-lg font-bold text-blue-800",children:"Identity Information"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-1 text-sm text-gray-700",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"PRC License Number:"})," ",(s==null?void 0:s.prc_liscence_number)||"N/A"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"DHSUD Reg. #:"})," ",(s==null?void 0:s.dhsud_registration_number)||"N/A"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Type:"})," ",(s==null?void 0:s.user.role)===1?"Agent":(s==null?void 0:s.user.role)===2?"Broker":"N/A"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Validity Date:"})," ",K((s==null?void 0:s.validation_date)||"N/A")]})]})]})]})}),e.jsx(q,{asChild:!0,children:e.jsx(_,{className:"bg-red-500 hover:bg-red-400 rounded-lg shadow",children:"Close"})})]})})]})})})]},s.id)}):e.jsx(N,{children:e.jsx(r,{colSpan:8,className:"text-center border border-[#bfdbfe]",children:"No data available"})})})]})}),e.jsx("div",{className:"flex flex-row justify-end mt-3",children:e.jsx("div",{children:e.jsxs("p",{className:"text-[#172554] text-sm w-full",children:["Showing 1 to ",c==="all"?h.length:c," of ",h.length," entries"]})})})]})}export{ae as default};
