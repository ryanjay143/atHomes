import{r as o,j as e,u as R,c as A,S as E}from"./index-BWeMivr7.js";import{a as P}from"./dateUtils-CwN7X1h0.js";import{a as u,C as _,c as p,b as g}from"./card-CzLo0aO8.js";import{C as k}from"./react-apexcharts.min-Dyu2ydMh.js";import{I as N}from"./input-Hb8YChNP.js";import{T as S,a as w,b as c,c as t,d as v,e as r}from"./table-44yGdPQK.js";function F({chartData:l,totalSales:d,currencyFormatter:s}){const[a,i]=o.useState(!1),f={series:[{name:"Sales",data:l}],options:{chart:{type:"line",height:350},xaxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},stroke:{curve:"smooth"},title:{text:"Sales from January to December",align:"left"},tooltip:{y:{formatter:x=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(x)}}}};return o.useEffect(()=>{i(!0)},[]),e.jsx("div",{children:e.jsxs(u,{className:"bg-[#eff6ff] border-b-4 border-primary w-full md:w-full",children:[e.jsx(_,{children:e.jsx(p,{children:"Total Sales"})}),e.jsxs(g,{children:[e.jsx("p",{className:"text-lg font-semibold",children:s.format(d)}),e.jsx("div",{className:"w-full md:w-full mt-6",children:a&&e.jsx(k,{options:f.options,series:f.series,type:"line",height:350})})]})]})})}function H({topPerformers:l,currencyFormatter:d}){return e.jsx("div",{children:e.jsx(u,{className:"bg-[#eff6ff] border-b-4 border-primary w-full md:w-full h-full max-h-full",children:e.jsx(g,{children:e.jsxs("div",{children:[e.jsxs("div",{className:"py-5 flex flex-row justify-between items-center",children:[e.jsx(p,{children:"Top Affiliated Rankings"}),e.jsx(N,{type:"text",placeholder:"Search",className:"w-52"})]}),e.jsxs(S,{children:[e.jsx(w,{children:e.jsxs(c,{children:[e.jsx(t,{children:"Rank"}),e.jsx(t,{children:"Affiliated"}),e.jsx(t,{children:"Role"}),e.jsx(t,{children:"Total Reserved"}),e.jsx(t,{children:"Total Sales"})]})}),e.jsxs(v,{children:[l.length===0&&e.jsx(c,{children:e.jsx(r,{colSpan:5,className:"text-center",children:"No data available"})}),l.map((s,a)=>e.jsxs(c,{children:[e.jsx(r,{className:"font-medium border border-[#bfdbfe]",children:a+1}),e.jsxs(r,{className:"font-medium border border-[#bfdbfe]",children:[s.first_name," ",s.middle_name," ",s.last_name," ",s.extension_name]}),e.jsx(r,{className:"font-medium border border-[#bfdbfe]",children:s.role}),e.jsx(r,{className:"font-medium border border-[#bfdbfe]",children:s.totalReserved}),e.jsx(r,{className:"font-medium border border-[#bfdbfe]",children:d.format(s.totalSales)})]},s.id))]})]}),e.jsx("div",{className:"flex flex-row justify-end mt-3",children:e.jsx("div",{children:e.jsx("p",{className:"text-[#172554] text-sm w-full",children:"Showing 1 to 10 of 10 entries"})})})]})})})})}function M({sales:l,formatDateToMMDDYYYY:d,currencyFormatter:s}){return e.jsx(e.Fragment,{children:e.jsx(u,{className:"bg-[#eff6ff] border-b-4 border-primary w-full md:w-full",children:e.jsxs(g,{children:[e.jsxs("div",{className:"py-5 flex flex-row justify-between items-center",children:[e.jsx(p,{children:"Top 5 Recent Sales"}),e.jsx(N,{type:"text",placeholder:"Search",className:"w-52"})]}),e.jsxs(S,{children:[e.jsx(w,{children:e.jsxs(c,{children:[e.jsx(t,{children:"Top"}),e.jsx(t,{children:"Reservation date"}),e.jsx(t,{children:"Category"}),e.jsx(t,{children:"Remarks"}),e.jsx(t,{children:"Amount"})]})}),e.jsxs(v,{children:[l.length===0&&e.jsx(c,{children:e.jsx(r,{colSpan:5,className:"text-center",children:"No data available"})}),l.map((a,i)=>e.jsxs(c,{children:[e.jsx(r,{className:"border border-[#bfdbfe]",children:i+1}),e.jsx(r,{className:"border border-[#bfdbfe]",children:d(a.date_on_sale)}),e.jsx(r,{className:"border border-[#bfdbfe]",children:a.category}),e.jsx(r,{className:"border border-[#bfdbfe]",children:a.remarks}),e.jsx(r,{className:"border border-[#bfdbfe]",children:s.format(a.amount)})]},a.id))]})]}),e.jsx("div",{className:"flex flex-row justify-end mt-3",children:e.jsx("div",{children:e.jsx("p",{className:"text-[#172554] text-sm w-full",children:"Showing 1 to 10 of 10 entries"})})})]})})})}function K(){const[l,d]=o.useState([]),[s,a]=o.useState([]),[i,f]=o.useState(Array(12).fill(0)),[x,T]=o.useState(0),C=R(),D=async()=>{try{const m=await A.get("user/broker",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("access_token")}`}}),j=m.data.salesEncoding.map(n=>({...n,amount:typeof n.amount=="number"?n.amount:parseFloat(n.amount)})),y=Array(12).fill(0);j.forEach(n=>{const b=new Date(n.date_on_sale).getMonth();y[b]+=n.amount}),f(y),d(m.data.topPerformers),a(m.data.salesEncodingTop5),T(j.reduce((n,b)=>n+b.amount,0)),console.log("List of Sales:",j)}catch(m){console.error("Error fetching data:",m),E.fire({icon:"error",title:"Error",text:"Failed to fetching data. Please login again.",confirmButtonText:"OK"}),localStorage.clear(),console.clear(),C("/athomes")}};o.useEffect(()=>{D()},[]);const h=new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"});return e.jsxs("div",{className:"py-5 md:pt-20",children:[e.jsx("div",{className:"flex justify-between md:flex-row",children:e.jsx("h1",{className:"text-4xl font-bold ml-72 md:ml-0 md:grid-cols-1 md:text-2xl md:gap-2 md:p-5 md:mt-0",children:"Dashboard"})}),e.jsxs("div",{className:"ml-72 md:ml-0 grid grid-cols-2 md:grid-cols-1 md:gap-4 md:p-6 md:mt-0 gap-4 items-start justify-center mt-6 md:px-6 mr-4",children:[e.jsx(F,{chartData:i,totalSales:x,currencyFormatter:h}),e.jsx(H,{topPerformers:l,currencyFormatter:h})]}),e.jsx("div",{className:"ml-72 md:ml-0 grid grid-cols-1 md:grid-cols-1 md:gap-4 md:p-6 md:mt-0 gap-4 items-start justify-center mt-6 md:px-6 mr-4",children:e.jsx(M,{sales:s,formatDateToMMDDYYYY:P,currencyFormatter:h})})]})}export{K as default};
