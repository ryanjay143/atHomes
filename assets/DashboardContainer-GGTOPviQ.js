import{r as l,j as t,d as $,l as pt,m as mt,n as O,o as ht,p as S,q as k,s as we,t as xt,v as gt,w as vt,x as bt,y as yt,z as wt,A as Pt,C as Ct,D as Et,E as J,G as Nt,H as jt,P as Pe,I as St,J as At,K as Rt,M as Ot,N as _t,O as Tt,Q as Ft,T as Dt,U as Lt,u as It,L as kt,F as Mt,S as $t,V as Ht,W as Wt,X as Ut,Y as Bt}from"./index-B1xux7nW.js";/* empty css              */import{c as F,C as G,a as H,b as M,d as Q}from"./card-BENweYTJ.js";import{C as Ce}from"./react-apexcharts.min-Dcgdr_Bx.js";import{I as zt}from"./input-DilSF8vW.js";const Kt=()=>{const[e,o]=l.useState(!1),[r,s]=l.useState(Array(12).fill(0)),[n,a]=l.useState(0),c=async()=>{try{const u=(await $.get("sales-encoding",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("access_token")}`}})).data.salesEncodingDashboardYearly.map(m=>({...m,amount:typeof m.amount=="number"?m.amount:parseFloat(m.amount)})),p=Array(12).fill(0);let f=0;u.forEach(m=>{const x=new Date(m.date_on_sale).getMonth();p[x]+=m.amount,f+=m.amount}),s(p),a(f)}catch(d){console.error("Error fetching data:",d)}};l.useEffect(()=>{c()},[]);const i={series:[{name:"Sales",data:r}],options:{chart:{type:"line",height:350,toolbar:{show:!1},dropShadow:{enabled:!0,top:3,left:2,blur:4,opacity:.2},zoom:{enabled:!1}},colors:["#2563eb"],dataLabels:{enabled:!1},markers:{size:5,colors:["#fff"],strokeColors:"#2563eb",strokeWidth:3,hover:{size:8}},grid:{borderColor:"#e5e7eb",strokeDashArray:4,row:{colors:["#f9fafb","transparent"],opacity:.5}},xaxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],labels:{style:{colors:"#64748b",fontWeight:500}}},yaxis:{labels:{formatter:d=>d>0?d.toLocaleString():"",style:{colors:"#64748b",fontWeight:500}}},stroke:{curve:"smooth",width:4},title:{text:void 0},tooltip:{theme:"light",y:{formatter:d=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(d)}},legend:{show:!1}}};return l.useEffect(()=>{o(!0)},[]),t.jsxs(F,{className:"fade-in-left w-full md:w-full bg-gradient-to-br from-blue-50 via-white to-blue-100 border-0 shadow-xl rounded-2xl relative overflow-hidden",children:[t.jsxs(G,{className:"flex flex-row items-center justify-between pb-2",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"bg-blue-100 px-3 py-1 rounded-full text-blue-700 text-xs font-semibold shadow-sm",children:"SALES"}),t.jsxs("div",{children:[t.jsx(H,{className:"text-[#172554] text-xl font-bold",children:"Overall Sales"}),t.jsx("div",{className:"text-xs text-blue-700 font-medium",children:"Yearly Overview"})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"text-2xl font-extrabold text-green-500",children:new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",maximumFractionDigits:0}).format(n)}),t.jsx("div",{className:"text-xs text-gray-500",children:"Total Sales"})]})]}),t.jsx(M,{className:"pt-0",children:e&&t.jsx("div",{className:"w-full",children:t.jsx(Ce,{options:i.options,series:i.series,type:"line",height:320})})}),t.jsx("div",{className:"absolute -bottom-10 -right-10 w-40 h-40 bg-blue-200 opacity-30 rounded-full blur-2xl pointer-events-none"})]})},Yt=()=>{const[e,o]=l.useState(!1),[r,s]=l.useState({series:[{name:"Total Reservation",data:[]}],options:{chart:{type:"bar",height:350,toolbar:{show:!1},animations:{enabled:!0,speed:800}},plotOptions:{bar:{borderRadius:8,horizontal:!1,columnWidth:"45%"}},dataLabels:{enabled:!0,style:{colors:["#fff"],fontWeight:700,fontSize:"14px"},formatter:function(n){return n.toLocaleString()},offsetY:-6},xaxis:{categories:[],labels:{style:{colors:"#64748b",fontWeight:500}}},yaxis:{labels:{style:{colors:"#64748b",fontWeight:500}}},grid:{borderColor:"#cbd5e1",strokeDashArray:0,xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}},row:{colors:["#f1f5f9","transparent"],opacity:.5},position:"back"},colors:["#2563eb"],title:{text:"Top Reservation Housing of this Month",align:"left",style:{fontSize:"18px",color:"#172554",fontWeight:700}},tooltip:{theme:"light"},legend:{show:!1}}});return l.useEffect(()=>{o(!0),$.get("sales-encoding",{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}}).then(n=>{const a=n.data.salesdashboard,c=a.map(d=>d.category),i=a.map(d=>d.totalReserved);s(d=>({series:[{name:"Total Reservation",data:i}],options:{...d.options,xaxis:{...d.options.xaxis,categories:c}}}))}).catch(n=>{console.error("Error fetching data:",n)})},[]),t.jsxs(F,{className:"fade-in-left w-full md:w-full bg-gradient-to-br from-blue-50 via-white to-blue-100 border-0 shadow-xl rounded-2xl relative overflow-hidden",children:[t.jsx(G,{className:"flex flex-row items-center justify-between pb-2",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"bg-blue-100 px-3 py-1 rounded-full text-blue-700 text-xs font-semibold shadow-sm",children:"HOUSING"}),t.jsxs("div",{children:[t.jsx(H,{className:"text-[#172554] text-xl font-bold",children:"Top Housing Category"}),t.jsx("div",{className:"text-xs text-blue-700 font-medium",children:"Monthly Reservations"})]})]})}),t.jsx(M,{className:"pt-0",children:e&&t.jsx("div",{className:"w-full",children:t.jsx(Ce,{options:r.options,series:r.series,type:"bar",height:350})})}),t.jsx("div",{className:"absolute -bottom-10 -right-10 w-40 h-40 bg-blue-200 opacity-30 rounded-full blur-2xl pointer-events-none"})]})};function Gt(){const[e,o]=l.useState([]),[r,s]=l.useState(""),n=async()=>{try{const i=await $.get("sales-encoding",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("access_token")}`}});o(i.data.topPerformers)}catch(i){console.error("Error fetching data:",i)}};l.useEffect(()=>{n()},[]);const a=new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",maximumFractionDigits:0}),c=l.useMemo(()=>{if(!r.trim())return e;const i=r.toLowerCase();return e.filter(d=>[d.first_name,d.middle_name,d.last_name,d.extension_name,d.role,String(d.totalReserved),String(d.totalSales)].filter(Boolean).join(" ").toLowerCase().includes(i))},[r,e]);return t.jsx(F,{className:"fade-in-left w-full md:w-full bg-gradient-to-br from-blue-50 via-white to-blue-100 border-0 shadow-xl rounded-2xl relative overflow-hidden",children:t.jsxs(M,{className:"flex flex-col h-[500px]",children:[t.jsxs("div",{className:"flex flex-row justify-between items-center py-5 flex-shrink-0",children:[t.jsxs("div",{children:[t.jsx(H,{children:"Top Performers"}),t.jsx(Q,{className:"text-xs text-blue-700 font-medium",children:"of this month"})]}),t.jsx(zt,{type:"text",placeholder:"Search",className:"w-52",value:r,onChange:i=>s(i.target.value)})]}),t.jsx("div",{className:"flex-1 overflow-auto",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-4 ",children:[c.length===0&&t.jsx("div",{className:"col-span-full text-center text-gray-500 py-8",children:"No data available"}),c.map((i,d)=>t.jsx(F,{className:"bg-white border border-[#bfdbfe] rounded-xl shadow hover:shadow-lg transition",children:t.jsxs(M,{className:"flex flex-col gap-2 p-4",children:[t.jsxs("span",{className:"inline-block bg-blue-100 text-blue-700 text-[11px] font-semibold px-3 py-1 rounded-full mb-1",children:["Rank #",d+1]}),t.jsxs("div",{className:"font-semibold text-lg text-[#172554] truncate",children:[i.first_name," ",i.middle_name," ",i.last_name," ",i.extension_name]}),t.jsx("span",{className:"inline-block bg-yellow-100 text-yellow-800 text-xs font-semibold px-3 py-1 rounded-full mb-1",children:i.role}),t.jsxs("div",{className:"flex flex-row justify-between items-end mt-2",children:[t.jsx("span",{className:"text-xs text-gray-500",children:"Total Reserved"}),t.jsx("span",{className:"font-bold text-blue-700",children:i.totalReserved})]}),t.jsxs("div",{className:"flex flex-row justify-between items-end",children:[t.jsx("span",{className:"text-xs text-gray-500",children:"Total Sales"}),t.jsx("span",{className:"font-bold text-green-700",children:a.format(i.totalSales)})]})]})},i.id))]})}),t.jsx("div",{className:"flex flex-row justify-end mt-3 flex-shrink-0",children:t.jsx("div",{children:t.jsxs("p",{className:"text-[#172554] text-sm w-full",children:["Showing ",c.length===0?0:1," to ",c.length," of ",c.length," entries"]})})})]})})}var ee=l.forwardRef((e,o)=>{const{children:r,...s}=e,n=l.Children.toArray(r),a=n.find(Xt);if(a){const c=a.props.children,i=n.map(d=>d===a?l.Children.count(c)>1?l.Children.only(null):l.isValidElement(c)?c.props.children:null:d);return t.jsx(Z,{...s,ref:o,children:l.isValidElement(c)?l.cloneElement(c,void 0,i):null})}return t.jsx(Z,{...s,ref:o,children:r})});ee.displayName="Slot";var Z=l.forwardRef((e,o)=>{const{children:r,...s}=e;if(l.isValidElement(r)){const n=Zt(r),a=Jt(s,r.props);return r.type!==l.Fragment&&(a.ref=o?pt(o,n):n),l.cloneElement(r,a)}return l.Children.count(r)>1?l.Children.only(null):null});Z.displayName="SlotClone";var Vt=({children:e})=>t.jsx(t.Fragment,{children:e});function Xt(e){return l.isValidElement(e)&&e.type===Vt}function Jt(e,o){const r={...o};for(const s in o){const n=e[s],a=o[s];/^on[A-Z]/.test(s)?n&&a?r[s]=(...i)=>{a(...i),n(...i)}:n&&(r[s]=n):s==="style"?r[s]={...n,...a}:s==="className"&&(r[s]=[n,a].filter(Boolean).join(" "))}return{...e,...r}}function Zt(e){var s,n;let o=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,r=o&&"isReactWarning"in o&&o.isReactWarning;return r?e.ref:(o=(n=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:n.get,r=o&&"isReactWarning"in o&&o.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var qt=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],N=qt.reduce((e,o)=>{const r=l.forwardRef((s,n)=>{const{asChild:a,...c}=s,i=a?ee:o;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),t.jsx(i,{...c,ref:n})});return r.displayName=`Primitive.${o}`,{...e,[o]:r}},{});function Qt(e,o){e&&mt.flushSync(()=>e.dispatchEvent(o))}var er="DismissableLayer",q="dismissableLayer.update",tr="dismissableLayer.pointerDownOutside",rr="dismissableLayer.focusOutside",he,Ee=l.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Ne=l.forwardRef((e,o)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:s,onPointerDownOutside:n,onFocusOutside:a,onInteractOutside:c,onDismiss:i,...d}=e,u=l.useContext(Ee),[p,f]=l.useState(null),m=(p==null?void 0:p.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,x]=l.useState({}),C=O(o,v=>f(v)),h=Array.from(u.layers),[P]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),g=h.indexOf(P),y=p?h.indexOf(p):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,b=y>=g,_=sr(v=>{const R=v.target,U=[...u.branches].some(L=>L.contains(R));!b||U||(n==null||n(v),c==null||c(v),v.defaultPrevented||i==null||i())},m),E=ar(v=>{const R=v.target;[...u.branches].some(L=>L.contains(R))||(a==null||a(v),c==null||c(v),v.defaultPrevented||i==null||i())},m);return ht(v=>{y===u.layers.size-1&&(s==null||s(v),!v.defaultPrevented&&i&&(v.preventDefault(),i()))},m),l.useEffect(()=>{if(p)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(he=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(p)),u.layers.add(p),xe(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=he)}},[p,m,r,u]),l.useEffect(()=>()=>{p&&(u.layers.delete(p),u.layersWithOutsidePointerEventsDisabled.delete(p),xe())},[p,u]),l.useEffect(()=>{const v=()=>x({});return document.addEventListener(q,v),()=>document.removeEventListener(q,v)},[]),t.jsx(N.div,{...d,ref:C,style:{pointerEvents:w?b?"auto":"none":void 0,...e.style},onFocusCapture:S(e.onFocusCapture,E.onFocusCapture),onBlurCapture:S(e.onBlurCapture,E.onBlurCapture),onPointerDownCapture:S(e.onPointerDownCapture,_.onPointerDownCapture)})});Ne.displayName=er;var or="DismissableLayerBranch",nr=l.forwardRef((e,o)=>{const r=l.useContext(Ee),s=l.useRef(null),n=O(o,s);return l.useEffect(()=>{const a=s.current;if(a)return r.branches.add(a),()=>{r.branches.delete(a)}},[r.branches]),t.jsx(N.div,{...e,ref:n})});nr.displayName=or;function sr(e,o=globalThis==null?void 0:globalThis.document){const r=k(e),s=l.useRef(!1),n=l.useRef(()=>{});return l.useEffect(()=>{const a=i=>{if(i.target&&!s.current){let d=function(){je(tr,r,u,{discrete:!0})};const u={originalEvent:i};i.pointerType==="touch"?(o.removeEventListener("click",n.current),n.current=d,o.addEventListener("click",n.current,{once:!0})):d()}else o.removeEventListener("click",n.current);s.current=!1},c=window.setTimeout(()=>{o.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(c),o.removeEventListener("pointerdown",a),o.removeEventListener("click",n.current)}},[o,r]),{onPointerDownCapture:()=>s.current=!0}}function ar(e,o=globalThis==null?void 0:globalThis.document){const r=k(e),s=l.useRef(!1);return l.useEffect(()=>{const n=a=>{a.target&&!s.current&&je(rr,r,{originalEvent:a},{discrete:!1})};return o.addEventListener("focusin",n),()=>o.removeEventListener("focusin",n)},[o,r]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function xe(){const e=new CustomEvent(q);document.dispatchEvent(e)}function je(e,o,r,{discrete:s}){const n=r.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});o&&n.addEventListener(e,o,{once:!0}),s?Qt(n,a):n.dispatchEvent(a)}var V="focusScope.autoFocusOnMount",X="focusScope.autoFocusOnUnmount",ge={bubbles:!1,cancelable:!0},ir="FocusScope",Se=l.forwardRef((e,o)=>{const{loop:r=!1,trapped:s=!1,onMountAutoFocus:n,onUnmountAutoFocus:a,...c}=e,[i,d]=l.useState(null),u=k(n),p=k(a),f=l.useRef(null),m=O(o,h=>d(h)),x=l.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;l.useEffect(()=>{if(s){let h=function(w){if(x.paused||!i)return;const b=w.target;i.contains(b)?f.current=b:j(f.current,{select:!0})},P=function(w){if(x.paused||!i)return;const b=w.relatedTarget;b!==null&&(i.contains(b)||j(f.current,{select:!0}))},g=function(w){if(document.activeElement===document.body)for(const _ of w)_.removedNodes.length>0&&j(i)};document.addEventListener("focusin",h),document.addEventListener("focusout",P);const y=new MutationObserver(g);return i&&y.observe(i,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",h),document.removeEventListener("focusout",P),y.disconnect()}}},[s,i,x.paused]),l.useEffect(()=>{if(i){be.add(x);const h=document.activeElement;if(!i.contains(h)){const g=new CustomEvent(V,ge);i.addEventListener(V,u),i.dispatchEvent(g),g.defaultPrevented||(lr(pr(Ae(i)),{select:!0}),document.activeElement===h&&j(i))}return()=>{i.removeEventListener(V,u),setTimeout(()=>{const g=new CustomEvent(X,ge);i.addEventListener(X,p),i.dispatchEvent(g),g.defaultPrevented||j(h??document.body,{select:!0}),i.removeEventListener(X,p),be.remove(x)},0)}}},[i,u,p,x]);const C=l.useCallback(h=>{if(!r&&!s||x.paused)return;const P=h.key==="Tab"&&!h.altKey&&!h.ctrlKey&&!h.metaKey,g=document.activeElement;if(P&&g){const y=h.currentTarget,[w,b]=cr(y);w&&b?!h.shiftKey&&g===b?(h.preventDefault(),r&&j(w,{select:!0})):h.shiftKey&&g===w&&(h.preventDefault(),r&&j(b,{select:!0})):g===y&&h.preventDefault()}},[r,s,x.paused]);return t.jsx(N.div,{tabIndex:-1,...c,ref:m,onKeyDown:C})});Se.displayName=ir;function lr(e,{select:o=!1}={}){const r=document.activeElement;for(const s of e)if(j(s,{select:o}),document.activeElement!==r)return}function cr(e){const o=Ae(e),r=ve(o,e),s=ve(o.reverse(),e);return[r,s]}function Ae(e){const o=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const n=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||n?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)o.push(r.currentNode);return o}function ve(e,o){for(const r of e)if(!dr(r,{upTo:o}))return r}function dr(e,{upTo:o}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(o!==void 0&&e===o)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function ur(e){return e instanceof HTMLInputElement&&"select"in e}function j(e,{select:o=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&ur(e)&&o&&e.select()}}var be=fr();function fr(){let e=[];return{add(o){const r=e[0];o!==r&&(r==null||r.pause()),e=ye(e,o),e.unshift(o)},remove(o){var r;e=ye(e,o),(r=e[0])==null||r.resume()}}}function ye(e,o){const r=[...e],s=r.indexOf(o);return s!==-1&&r.splice(s,1),r}function pr(e){return e.filter(o=>o.tagName!=="A")}var mr="Arrow",Re=l.forwardRef((e,o)=>{const{children:r,width:s=10,height:n=5,...a}=e;return t.jsx(N.svg,{...a,ref:o,width:s,height:n,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:t.jsx("polygon",{points:"0,0 30,0 15,10"})})});Re.displayName=mr;var hr=Re,te="Popper",[Oe,_e]=we(te),[xr,Te]=Oe(te),Fe=e=>{const{__scopePopper:o,children:r}=e,[s,n]=l.useState(null);return t.jsx(xr,{scope:o,anchor:s,onAnchorChange:n,children:r})};Fe.displayName=te;var De="PopperAnchor",Le=l.forwardRef((e,o)=>{const{__scopePopper:r,virtualRef:s,...n}=e,a=Te(De,r),c=l.useRef(null),i=O(o,c);return l.useEffect(()=>{a.onAnchorChange((s==null?void 0:s.current)||c.current)}),s?null:t.jsx(N.div,{...n,ref:i})});Le.displayName=De;var re="PopperContent",[gr,vr]=Oe(re),Ie=l.forwardRef((e,o)=>{var le,ce,de,ue,fe,pe;const{__scopePopper:r,side:s="bottom",sideOffset:n=0,align:a="center",alignOffset:c=0,arrowPadding:i=0,avoidCollisions:d=!0,collisionBoundary:u=[],collisionPadding:p=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:x="optimized",onPlaced:C,...h}=e,P=Te(re,r),[g,y]=l.useState(null),w=O(o,I=>y(I)),[b,_]=l.useState(null),E=xt(b),v=(E==null?void 0:E.width)??0,R=(E==null?void 0:E.height)??0,U=s+(a!=="center"?"-"+a:""),L=typeof p=="number"?p:{top:0,right:0,bottom:0,left:0,...p},se=Array.isArray(u)?u:[u],et=se.length>0,B={padding:L,boundary:se.filter(yr),altBoundary:et},{refs:tt,floatingStyles:ae,placement:rt,isPositioned:z,middlewareData:T}=gt({strategy:"fixed",placement:U,whileElementsMounted:(...I)=>vt(...I,{animationFrame:x==="always"}),elements:{reference:P.anchor},middleware:[bt({mainAxis:n+R,alignmentAxis:c}),d&&yt({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?Nt():void 0,...B}),d&&wt({...B}),Pt({...B,apply:({elements:I,rects:me,availableWidth:ct,availableHeight:dt})=>{const{width:ut,height:ft}=me.reference,Y=I.floating.style;Y.setProperty("--radix-popper-available-width",`${ct}px`),Y.setProperty("--radix-popper-available-height",`${dt}px`),Y.setProperty("--radix-popper-anchor-width",`${ut}px`),Y.setProperty("--radix-popper-anchor-height",`${ft}px`)}}),b&&Ct({element:b,padding:i}),wr({arrowWidth:v,arrowHeight:R}),m&&Et({strategy:"referenceHidden",...B})]}),[ie,ot]=$e(rt),K=k(C);J(()=>{z&&(K==null||K())},[z,K]);const nt=(le=T.arrow)==null?void 0:le.x,st=(ce=T.arrow)==null?void 0:ce.y,at=((de=T.arrow)==null?void 0:de.centerOffset)!==0,[it,lt]=l.useState();return J(()=>{g&&lt(window.getComputedStyle(g).zIndex)},[g]),t.jsx("div",{ref:tt.setFloating,"data-radix-popper-content-wrapper":"",style:{...ae,transform:z?ae.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:it,"--radix-popper-transform-origin":[(ue=T.transformOrigin)==null?void 0:ue.x,(fe=T.transformOrigin)==null?void 0:fe.y].join(" "),...((pe=T.hide)==null?void 0:pe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:t.jsx(gr,{scope:r,placedSide:ie,onArrowChange:_,arrowX:nt,arrowY:st,shouldHideArrow:at,children:t.jsx(N.div,{"data-side":ie,"data-align":ot,...h,ref:w,style:{...h.style,animation:z?void 0:"none"}})})})});Ie.displayName=re;var ke="PopperArrow",br={top:"bottom",right:"left",bottom:"top",left:"right"},Me=l.forwardRef(function(o,r){const{__scopePopper:s,...n}=o,a=vr(ke,s),c=br[a.placedSide];return t.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:t.jsx(hr,{...n,ref:r,style:{...n.style,display:"block"}})})});Me.displayName=ke;function yr(e){return e!==null}var wr=e=>({name:"transformOrigin",options:e,fn(o){var P,g,y;const{placement:r,rects:s,middlewareData:n}=o,c=((P=n.arrow)==null?void 0:P.centerOffset)!==0,i=c?0:e.arrowWidth,d=c?0:e.arrowHeight,[u,p]=$e(r),f={start:"0%",center:"50%",end:"100%"}[p],m=(((g=n.arrow)==null?void 0:g.x)??0)+i/2,x=(((y=n.arrow)==null?void 0:y.y)??0)+d/2;let C="",h="";return u==="bottom"?(C=c?f:`${m}px`,h=`${-d}px`):u==="top"?(C=c?f:`${m}px`,h=`${s.floating.height+d}px`):u==="right"?(C=`${-d}px`,h=c?f:`${x}px`):u==="left"&&(C=`${s.floating.width+d}px`,h=c?f:`${x}px`),{data:{x:C,y:h}}}});function $e(e){const[o,r="center"]=e.split("-");return[o,r]}var Pr=Fe,He=Le,Cr=Ie,Er=Me,Nr="Portal",We=l.forwardRef((e,o)=>{var i;const{container:r,...s}=e,[n,a]=l.useState(!1);J(()=>a(!0),[]);const c=r||n&&((i=globalThis==null?void 0:globalThis.document)==null?void 0:i.body);return c?jt.createPortal(t.jsx(N.div,{...s,ref:o}),c):null});We.displayName=Nr;var oe="Popover",[Ue,Jr]=we(oe,[_e]),W=_e(),[jr,A]=Ue(oe),Be=e=>{const{__scopePopover:o,children:r,open:s,defaultOpen:n,onOpenChange:a,modal:c=!1}=e,i=W(o),d=l.useRef(null),[u,p]=l.useState(!1),[f=!1,m]=Ot({prop:s,defaultProp:n,onChange:a});return t.jsx(Pr,{...i,children:t.jsx(jr,{scope:o,contentId:_t(),triggerRef:d,open:f,onOpenChange:m,onOpenToggle:l.useCallback(()=>m(x=>!x),[m]),hasCustomAnchor:u,onCustomAnchorAdd:l.useCallback(()=>p(!0),[]),onCustomAnchorRemove:l.useCallback(()=>p(!1),[]),modal:c,children:r})})};Be.displayName=oe;var ze="PopoverAnchor",Sr=l.forwardRef((e,o)=>{const{__scopePopover:r,...s}=e,n=A(ze,r),a=W(r),{onCustomAnchorAdd:c,onCustomAnchorRemove:i}=n;return l.useEffect(()=>(c(),()=>i()),[c,i]),t.jsx(He,{...a,...s,ref:o})});Sr.displayName=ze;var Ke="PopoverTrigger",Ye=l.forwardRef((e,o)=>{const{__scopePopover:r,...s}=e,n=A(Ke,r),a=W(r),c=O(o,n.triggerRef),i=t.jsx(N.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":Ze(n.open),...s,ref:c,onClick:S(e.onClick,n.onOpenToggle)});return n.hasCustomAnchor?i:t.jsx(He,{asChild:!0,...a,children:i})});Ye.displayName=Ke;var ne="PopoverPortal",[Ar,Rr]=Ue(ne,{forceMount:void 0}),Ge=e=>{const{__scopePopover:o,forceMount:r,children:s,container:n}=e,a=A(ne,o);return t.jsx(Ar,{scope:o,forceMount:r,children:t.jsx(Pe,{present:r||a.open,children:t.jsx(We,{asChild:!0,container:n,children:s})})})};Ge.displayName=ne;var D="PopoverContent",Ve=l.forwardRef((e,o)=>{const r=Rr(D,e.__scopePopover),{forceMount:s=r.forceMount,...n}=e,a=A(D,e.__scopePopover);return t.jsx(Pe,{present:s||a.open,children:a.modal?t.jsx(Or,{...n,ref:o}):t.jsx(_r,{...n,ref:o})})});Ve.displayName=D;var Or=l.forwardRef((e,o)=>{const r=A(D,e.__scopePopover),s=l.useRef(null),n=O(o,s),a=l.useRef(!1);return l.useEffect(()=>{const c=s.current;if(c)return St(c)},[]),t.jsx(At,{as:ee,allowPinchZoom:!0,children:t.jsx(Xe,{...e,ref:n,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:S(e.onCloseAutoFocus,c=>{var i;c.preventDefault(),a.current||(i=r.triggerRef.current)==null||i.focus()}),onPointerDownOutside:S(e.onPointerDownOutside,c=>{const i=c.detail.originalEvent,d=i.button===0&&i.ctrlKey===!0,u=i.button===2||d;a.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:S(e.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1})})})}),_r=l.forwardRef((e,o)=>{const r=A(D,e.__scopePopover),s=l.useRef(!1),n=l.useRef(!1);return t.jsx(Xe,{...e,ref:o,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var c,i;(c=e.onCloseAutoFocus)==null||c.call(e,a),a.defaultPrevented||(s.current||(i=r.triggerRef.current)==null||i.focus(),a.preventDefault()),s.current=!1,n.current=!1},onInteractOutside:a=>{var d,u;(d=e.onInteractOutside)==null||d.call(e,a),a.defaultPrevented||(s.current=!0,a.detail.originalEvent.type==="pointerdown"&&(n.current=!0));const c=a.target;((u=r.triggerRef.current)==null?void 0:u.contains(c))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&n.current&&a.preventDefault()}})}),Xe=l.forwardRef((e,o)=>{const{__scopePopover:r,trapFocus:s,onOpenAutoFocus:n,onCloseAutoFocus:a,disableOutsidePointerEvents:c,onEscapeKeyDown:i,onPointerDownOutside:d,onFocusOutside:u,onInteractOutside:p,...f}=e,m=A(D,r),x=W(r);return Rt(),t.jsx(Se,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:n,onUnmountAutoFocus:a,children:t.jsx(Ne,{asChild:!0,disableOutsidePointerEvents:c,onInteractOutside:p,onEscapeKeyDown:i,onPointerDownOutside:d,onFocusOutside:u,onDismiss:()=>m.onOpenChange(!1),children:t.jsx(Cr,{"data-state":Ze(m.open),role:"dialog",id:m.contentId,...x,...f,ref:o,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Je="PopoverClose",Tr=l.forwardRef((e,o)=>{const{__scopePopover:r,...s}=e,n=A(Je,r);return t.jsx(N.button,{type:"button",...s,ref:o,onClick:S(e.onClick,()=>n.onOpenChange(!1))})});Tr.displayName=Je;var Fr="PopoverArrow",Dr=l.forwardRef((e,o)=>{const{__scopePopover:r,...s}=e,n=W(r);return t.jsx(Er,{...n,...s,ref:o})});Dr.displayName=Fr;function Ze(e){return e?"open":"closed"}var Lr=Be,Ir=Ye,kr=Ge,qe=Ve;const Mr=Lr,$r=Ir,Qe=l.forwardRef(({className:e,align:o="center",sideOffset:r=4,...s},n)=>t.jsx(kr,{children:t.jsx(qe,{ref:n,align:o,sideOffset:r,className:Tt("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})}));Qe.displayName=qe.displayName;function Hr(e){if(e>=1e6)return(e/1e6).toFixed(2).replace(/\.00$/,"")+"M";if(e>=1e3){let o=e/1e3;return(o%1===0?o.toFixed(0):o.toFixed(2).replace(/\.?0+$/,""))+"K"}else return e.toString()}function Wr(e){return e===1?"bg-gradient-to-r from-yellow-400 to-yellow-200 text-yellow-900 border-yellow-400":e===2?"bg-gradient-to-r from-gray-400 to-gray-200 text-gray-900 border-gray-400":e===3?"bg-gradient-to-r from-orange-400 to-orange-200 text-orange-900 border-orange-400":"bg-[#172554] text-[#eff6ff] border-[#172554]"}function Ur(e){return e===1?"ðŸ†":e===2?"ðŸ¥ˆ":e===3?"ðŸ¥‰":""}function Br(){const[e,o]=l.useState([]),r=async()=>{try{const n=await $.get("sales-encoding",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("access_token")}`}});o(n.data.topPerformers)}catch(n){console.error("Error fetching data:",n)}};l.useEffect(()=>{r()},[]);const s=new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"});return t.jsxs(F,{className:"fade-in-right w-full md:w-full bg-gradient-to-br from-blue-50 via-white to-blue-100 border-0 shadow-xl rounded-2xl",children:[t.jsxs(G,{className:"text-center",children:[t.jsx(H,{className:"text-[#172554] text-2xl font-bold",children:"Top 10 Agents"}),t.jsx(Q,{className:"text-blue-700",children:"of the month"})]}),t.jsx(M,{children:t.jsx("div",{className:"grid grid-cols-3 md:grid-cols-3 gap-4 h-56 overflow-auto",children:e.map((n,a)=>t.jsxs("div",{className:"relative flex flex-col items-center rounded-xl transition transform hover:-translate-y-1 p-2 md:p-1",children:[t.jsxs("div",{className:`
                  absolute top-0 left-3 z-50 
                  px-2 rounded-full border-2 font-bold flex items-center gap-1 
                  text-base md:text-xs
                  md:px-1 py-1 md:py-0.5
                  ${Wr(a+1)}
                `,style:{minWidth:36,justifyContent:"center"},children:[Ur(a+1)," ",a+1]}),t.jsxs(Mr,{children:[t.jsx($r,{asChild:!0,className:"cursor-pointer",children:t.jsx("div",{className:`transition-transform duration-200 ${a<3?"ring-4 ring-yellow-300":""} rounded-full`,children:t.jsxs(Ft,{className:"h-14 w-14 md:h-14 md:w-14 border-primary border-4 hover:scale-105 transition bg-transparent",children:[n.profile_pic?t.jsx(Dt,{src:`https://athomes.site/${n.profile_pic}`,alt:`${n.first_name} ${n.last_name}`,className:"rounded-full border border-border object-cover bg-transparent"}):null,t.jsx(Lt,{className:"font-bold text-2xl bg-[#172554] text-[#eff6ff] ",children:n.first_name?n.first_name.charAt(0).toUpperCase():"U"})]})})}),t.jsx(Qe,{className:"p-4 bg-white shadow-lg rounded-lg",children:t.jsxs("div",{className:"text-center",children:[t.jsxs("p",{className:"font-semibold text-lg",children:[n.first_name," ",n.middle_name," ",n.last_name]}),t.jsx("p",{className:"text-sm text-muted-foreground",children:n.email||""}),t.jsxs("p",{children:["Total Sales: ",t.jsx("span",{className:"text-green-500 text-sm",children:s.format(n.totalSales)})]}),t.jsxs("p",{children:["Total Reserved: ",t.jsxs("span",{className:"text-green-500 text-sm",children:["+ ",n.totalReserved]})]})]})})]}),t.jsxs("div",{className:"text-center mt-2",children:[t.jsxs("p",{className:"text-sm font-bold text-[#172554]",children:[n.first_name," ",n.last_name]}),t.jsx("p",{className:"text-sm text-blue-700",children:Hr(Number(n.totalSales))})]})]},n.id||a))})})]})}function zr(){const[e,o]=l.useState(0),[r,s]=l.useState(0),[n,a]=l.useState(0),[c,i]=l.useState(0),d=It(),u=async()=>{try{const f=await $.get("agent-broker",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("access_token")}`}});o(f.data.agentsListCount||0),s(f.data.pendingAgentsCount||0),a(f.data.agentsLicensedCount||0),i(f.data.agentsUnlicensedCount||0)}catch(f){console.error("Error fetching members:",f),$t.fire({icon:"error",title:"Error",text:"Failed to fetch data. Please login again.",confirmButtonText:"OK"}),localStorage.clear(),console.clear(),d("/")}};l.useEffect(()=>{u()},[]);const p=[{to:"/admin/affialiated",count:e,title:"Total Broker/Agents",icon:Ht,iconColor:"text-blue-400",cardGradient:"from-blue-100 via-blue-50 to-white",borderColor:"border-blue-400",textColor:"text-blue-700",glow:"shadow-blue-200"},{to:"/admin/affialiated/pendingRegister",count:r,title:"Pending Register",icon:Wt,iconColor:"text-yellow-400",cardGradient:"from-yellow-100 via-yellow-50 to-white",borderColor:"border-yellow-400",textColor:"text-yellow-700",glow:"shadow-yellow-200"},{to:"/admin/affialiated/licensed",count:n,title:"Total Licensed Affialiated",icon:Ut,iconColor:"text-green-400",cardGradient:"from-green-100 via-green-50 to-white",borderColor:"border-green-400",textColor:"text-green-700",glow:"shadow-green-200"},{to:"/admin/affialiated/unlicensed",count:c,title:"Total Unlicensed Affialiated",icon:Bt,iconColor:"text-red-400",cardGradient:"from-red-100 via-red-50 to-white",borderColor:"border-red-400",textColor:"text-red-700",glow:"shadow-red-200"}];return t.jsx("div",{className:"ml-72 md:ml-0 grid grid-cols-4 md:grid-cols-1 md:gap-4 md:p-5 md:mt-0 gap-6 items-start justify-center mt-5 md:px-5 mr-2",children:p.map(f=>t.jsx(kt,{to:f.to,className:"block group",children:t.jsxs(F,{className:`
              w-full md:w-full
              bg-gradient-to-br ${f.cardGradient}
              border-b-4 ${f.borderColor}
              rounded-2xl shadow-xl ${f.glow}
              backdrop-blur-md
              transition-all duration-300
              hover:scale-105 hover:shadow-2xl hover:border-t-4 hover:border-opacity-80
              hover:bg-opacity-90
              relative overflow-hidden
            `,style:{boxShadow:"0 8px 32px 0 rgba(31,38,135,0.10)",borderTop:"2px solid rgba(59,130,246,0.08)"},children:[t.jsx("div",{className:"absolute -top-8 -right-8 w-24 h-24 bg-white/40 rounded-full blur-2xl opacity-60 pointer-events-none"}),t.jsxs(G,{children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(H,{className:`text-4xl font-extrabold ${f.textColor} drop-shadow-lg group-hover:scale-110 transition-transform duration-300 slow-bounce`,children:f.count}),t.jsx("div",{className:"ml-2 h-12 w-12 flex items-center justify-center rounded-full bg-white/70 group-hover:bg-white/90 shadow-md transition-all duration-300",children:t.jsx(Mt,{icon:f.icon,className:`text-3xl ${f.iconColor} group-hover:scale-110 transition-transform duration-300`})})]}),t.jsx(Q,{className:`font-bold ${f.textColor} md:text-xs mt-2`,children:f.title})]})]})},f.title))})}function Zr(){return t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-4xl font-bold ml-72 md:ml-0 md:grid-cols-1 md:gap-2 md:px-5 md:mt-0 md:text-2xl",children:"Dashboard"}),t.jsx(zr,{})]}),t.jsxs("div",{className:"ml-72 md:ml-0 grid grid-cols-2 md:grid-cols-1 md:gap-2 md:p-5 md:mt-0 gap-2 items-start justify-center mt-5 md:px-5 mr-2",children:[t.jsx(Kt,{}),t.jsx(Yt,{})]}),t.jsxs("div",{className:"ml-72 md:ml-0 grid grid-cols-2 md:grid-cols-1 md:gap-2 md:p-5 md:mt-0 gap-2 items-start justify-center mt-5 md:px-5 mr-2",children:[t.jsx(Gt,{}),t.jsx(Br,{})]})]})}export{Zr as default};
