import{j as e,L as oe,r,u as ce,F as i,a8 as me,a9 as xe,aa as he,ab as fe,B as _,ac as ue,ad as $,d as be,S as ge}from"./index-B1xux7nW.js";import{c as m,C as x,b as je,a as h,d as f}from"./card-BENweYTJ.js";import{B as pe,a as we,b as Ne,c as ve}from"./breadcrumb-CXSnjQSM.js";import{L as u}from"./label-8qc7pw4D.js";import{S as b,a as g,b as j,c as p,d as a}from"./select-S8dYOqu_.js";import{I as L}from"./input-DilSF8vW.js";import{T as ye,h as Se,i as D,j as l,k as Ce,l as t}from"./dialog-DXga8jYz.js";import{V as Re}from"./ViewReceipt-CyMIwia8.js";function _e(){return e.jsx("div",{className:"bg-gradient-to-r from-blue-900 via-blue-800 to-blue-700 shadow-lg flex flex-row items-center gap-4 p-4 rounded-xl mb-8 border border-blue-800/40",children:e.jsx("div",{className:"flex flex-col items-start md:items-center md:justify-center md:ml-10 text-accent fade-in-right w-full",children:e.jsx(pe,{children:e.jsxs(we,{children:[e.jsx(Ne,{className:"text-accent",children:e.jsx(oe,{to:"/admin/sales-repor",children:"Sales Report"})}),e.jsx(ve,{})]})})})})}function Ie(){const[w,z]=r.useState([]),[d,k]=r.useState(""),[A,T]=r.useState(10),[O,X]=r.useState([]),[N,P]=r.useState(""),[v,F]=r.useState(""),[y,B]=r.useState(""),[S,I]=r.useState(""),[C,E]=r.useState(""),[K,H]=r.useState(!1),Q=ce(),U=async()=>{try{const s=await be.get("sales-encoding",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("access_token")}`}});z(s.data.salesEncodingReports),X(s.data.agents)}catch(s){console.error("Error fetching data:",s),ge.fire({icon:"error",title:"Error",text:"Failed to fetching data. Please login again.",confirmButtonText:"OK"}),localStorage.clear(),console.clear(),Q("/")}};r.useEffect(()=>{U()},[]);const W=s=>s>=1e6?`${(s/1e6).toFixed(2)} M`:s>=1e3?`${(s/1e3).toFixed(2)} K`:R.format(s),M=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"2-digit"}),R=new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}),q=s=>{k(s.target.value)},G=s=>{T(s==="all"?w.length:parseInt(s,10))},J=s=>{P(s.target.value)},Y=s=>{F(s.target.value)},Z=s=>{B(s)},ee=s=>{I(s)},se=s=>{E(s)},V=w.filter(s=>{const o=`${s.agent.personal_info.first_name} ${s.agent.personal_info.middle_name} ${s.agent.personal_info.last_name}`.toLowerCase(),c=new Date(s.date_on_sale),le=(!N||c>=new Date(N))&&(!v||c<=new Date(v)),ne=!y||s.agent.id===y,ie=!S||s.category===S,de=!C||s.remarks.toLowerCase()===C.toLowerCase();return le&&ne&&ie&&de&&(s.agent.user.acct_number.toLowerCase().includes(d.toLowerCase())||s.client_name.toLowerCase().includes(d.toLowerCase())||o.includes(d.toLowerCase())||s.category.toLowerCase().includes(d.toLowerCase()))}),n=V.slice(0,A),ae=n.reduce((s,o)=>{const c=parseFloat(o.amount);return s+(isNaN(c)?0:c)},0),re=n.filter(s=>s.remarks.toLowerCase()==="sold").length,te=n.filter(s=>s.remarks.toLowerCase()==="not sold").length;return e.jsxs("div",{className:"relative min-h-screen w-full flex flex-col md:flex-row gap-4 bg-gradient-to-br overflow-x-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-96 h-96 opacity-20 rounded-full blur-3xl -z-10 animate-pulse"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 opacity-20 rounded-full blur-3xl -z-10 animate-pulse"}),e.jsxs("div",{className:"ml-72 md:ml-0 gap-2 items-start justify-center mr-5 md:px-2 relative",children:[e.jsx(_e,{}),e.jsxs(m,{className:"bg-white/60 border-b-4 border-primary fade-in-left md:w-[380px] rounded-2xl shadow-2xl backdrop-blur-lg transition-all duration-300 hover:shadow-blue-200",children:[e.jsx(x,{children:e.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 md:gap-8",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-1 gap-4 md:gap-4 w-full",children:[e.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[e.jsx(u,{children:"Date Range"}),e.jsxs("div",{className:"flex flex-row gap-2 md:flex-col",children:[e.jsx(L,{type:"date",className:"w-full bg-white/80 border border-primary focus:ring-2 focus:ring-blue-300 transition",placeholder:"Start Date",value:N,onChange:J}),e.jsx("span",{className:"flex items-center md:hidden",children:"-"}),e.jsx(L,{type:"date",className:"w-full bg-white/80 border border-primary focus:ring-2 focus:ring-blue-300 transition",placeholder:"End Date",value:v,onChange:Y})]})]}),e.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[e.jsx(u,{children:"Agent/Broker"}),e.jsxs(b,{onValueChange:Z,value:y,children:[e.jsx(g,{className:"w-full bg-white/80 border border-primary focus:ring-2 focus:ring-blue-300 transition",children:e.jsx(j,{placeholder:"Select agent or broker"})}),e.jsx(p,{children:O.map(s=>e.jsxs(a,{value:s.id,children:[s.personal_info.first_name," ",s.personal_info.middle_name," ",s.personal_info.last_name," ",s.personal_info.extension_name]},s.id))})]})]}),e.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[e.jsx(u,{children:"Category"}),e.jsxs(b,{onValueChange:ee,value:S,children:[e.jsx(g,{className:"bg-white/80 border border-primary focus:ring-2 focus:ring-blue-300 transition",children:e.jsx(j,{placeholder:"Select category"})}),e.jsxs(p,{children:[e.jsx(a,{value:"Lot only",children:"Lot only"}),e.jsx(a,{value:"House and lot",children:"House and lot"}),e.jsx(a,{value:"Condominium/Apartment",children:"Condominium/Apartment"}),e.jsx(a,{value:"Commercial Properties",children:"Commercial Properties"}),e.jsx(a,{value:"Rental Properties",children:"Rental Properties"}),e.jsx(a,{value:"Farm Lot",children:"Farm Lot"})]})]})]}),e.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[e.jsx(u,{children:"Remarks"}),e.jsxs(b,{onValueChange:se,value:C,children:[e.jsx(g,{className:"bg-white/80 border border-primary focus:ring-2 focus:ring-blue-300 transition",children:e.jsx(j,{placeholder:"Select remarks"})}),e.jsxs(p,{children:[e.jsx(a,{value:"Sold",children:"Sold"}),e.jsx(a,{value:"Not Sold",children:"Not Sold"}),e.jsx(a,{value:"Pre-Selling",children:"Pre-Selling"}),e.jsx(a,{value:"RFO",children:"Ready for Occupancy - (RFO)"})]})]})]})]})})}),e.jsxs(je,{children:[e.jsxs("div",{className:"grid grid-cols-4 md:grid-cols-2 gap-2 md:gap-4 mb-6",children:[e.jsx("div",{children:e.jsx(m,{className:"max-h-32 border border-b-4 border-primary shadow-md bg-gradient-to-br from-blue-100 via-blue-50 to-white rounded-xl",children:e.jsxs(x,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(h,{className:"text-xl font-bold text-primary",children:W(ae)}),e.jsx("div",{className:"bg-primary bg-opacity-10 p-2 rounded-md flex items-center gap-2",children:e.jsx(i,{icon:me,className:"ml-2 h-10 text-white"})})]}),e.jsx(f,{className:"font-bold text-primary md:text-xs",children:"Total Sales"})]})})}),e.jsx("div",{children:e.jsx(m,{className:"max-h-32 border border-b-4 border-primary shadow-md bg-gradient-to-br from-blue-100 via-blue-50 to-white rounded-xl",children:e.jsxs(x,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(h,{className:"text-xl font-bold text-primary",children:n.length}),e.jsx("div",{className:"bg-primary bg-opacity-10 p-2 rounded-md flex items-center gap-2",children:e.jsx(i,{icon:xe,className:"ml-2 h-10 text-white"})})]}),e.jsx(f,{className:"font-bold text-primary md:text-xs",children:"Total Reservation"})]})})}),e.jsx("div",{children:e.jsx(m,{className:"max-h-32 border border-b-4 border-green-500 shadow-md bg-gradient-to-br from-green-100 via-green-50 to-white rounded-xl",children:e.jsxs(x,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(h,{className:"text-xl font-bold text-green-500",children:re}),e.jsx("div",{className:"bg-green-500 p-2 rounded-md flex items-center gap-2",children:e.jsx(i,{icon:he,className:"ml-2 h-10 text-white"})})]}),e.jsx(f,{className:"font-bold text-green-500 md:text-xs",children:"Sold Properties"})]})})}),e.jsx("div",{children:e.jsx(m,{className:"max-h-32 border border-b-4 border-red-500 shadow-md bg-gradient-to-br from-red-100 via-red-50 to-white rounded-xl",children:e.jsxs(x,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(h,{className:"text-xl font-bold text-red-500",children:te}),e.jsx("div",{className:"bg-red-500 p-2 rounded-md flex items-center gap-2",children:e.jsx(i,{icon:fe,className:"ml-2 h-10 text-white"})})]}),e.jsx(f,{className:"font-bold text-red-500 md:text-xs",children:"Not Sold Properties"})]})})})]}),e.jsxs("div",{className:"flex flex-wrap md:grid md:grid-cols-2 justify-end items-start md:items-center gap-2 md:gap-4 pt-5 mb-4",children:[e.jsxs(_,{onMouseEnter:()=>H(!0),onMouseLeave:()=>H(!1),onClick:()=>{T(w.length),k(""),P(""),F(""),B(""),I(""),E("")},className:"flex items-center gap-2 bg-blue-500 text-white hover:bg-blue-400 transition",children:[e.jsx(i,{icon:ue,className:`${K?"animate-spin":""}`}),"Refresh list"]}),e.jsxs(_,{className:"bg-red-500 text-white hover:bg-red-400 hover:text-white flex items-center gap-2 transition",children:[e.jsx(i,{icon:$}),e.jsx("span",{className:"md:text-xsm",children:"Download as PDF"})]}),e.jsxs(_,{className:"bg-green-500 text-white hover:bg-green-400 hover:text-white flex items-center gap-2 transition",children:[e.jsx(i,{icon:$}),e.jsx("span",{className:"md:text-xs",children:"Download as Excel"})]})]}),e.jsx("div",{className:"py-2 flex flex-col md:flex-row md:justify-between justify-between gap-4",children:e.jsxs("div",{className:"py-2 flex flex-row justify-between gap-4",children:[e.jsxs(b,{onValueChange:G,children:[e.jsxs(g,{className:"w-[120px] border border-primary md:w-28",children:[e.jsx("span",{className:"text-[#172554]",children:"Show"}),e.jsx(j,{placeholder:"All"})]}),e.jsxs(p,{children:[e.jsx(a,{value:"all",children:"All"}),e.jsx(a,{value:"10",children:"10"}),e.jsx(a,{value:"20",children:"20"}),e.jsx(a,{value:"30",children:"30"}),e.jsx(a,{value:"40",children:"40"}),e.jsx(a,{value:"50",children:"50"})]})]}),e.jsx(L,{type:"text",placeholder:"Search",className:"w-52 md:w-full",value:d,onChange:q})]})}),e.jsx("div",{className:"fade-in-left ",children:e.jsxs(ye,{children:[e.jsx(Se,{className:"bg-primary text-base",children:e.jsxs(D,{children:[e.jsx(l,{children:"#"}),e.jsx(l,{children:"Account No."}),e.jsx(l,{children:"Affiliated"}),e.jsx(l,{children:"Client name"}),e.jsx(l,{children:"Category"}),e.jsx(l,{children:"Reservation date"}),e.jsx(l,{children:"Location"}),e.jsx(l,{children:"Amount"}),e.jsx(l,{className:"text-right",children:"Action"})]})}),e.jsxs(Ce,{children:[n.length===0&&e.jsx(D,{children:e.jsx(t,{colSpan:10,className:"text-center",children:"No data found."})}),n.map((s,o)=>e.jsxs(D,{children:[e.jsx(t,{className:"font-medium border border-[#bfdbfe]",children:o+1}),e.jsx(t,{className:"font-medium border border-[#bfdbfe]",children:s.agent.user.acct_number}),e.jsxs(t,{className:"border border-[#bfdbfe]",children:[s.agent.personal_info.first_name," ",s.agent.personal_info.middle_name," ",s.agent.personal_info.last_name]}),e.jsx(t,{className:"border border-[#bfdbfe]",children:s.client_name}),e.jsx(t,{className:"border border-[#bfdbfe]",children:s.category}),e.jsx(t,{className:"border border-[#bfdbfe]",children:M.format(new Date(s.date_on_sale))}),e.jsx(t,{className:"border border-[#bfdbfe]",children:s.location}),e.jsx(t,{className:"border border-[#bfdbfe]",children:R.format(s.amount)}),e.jsx(t,{className:"text-right border border-[#bfdbfe]",children:e.jsx("div",{className:"flex flex-row gap-1 justify-end",children:e.jsx(Re,{sales:s,dateFormatter:M,currencyFormatter:R})})})]},s.id))]})]})}),e.jsx("div",{className:"flex flex-row justify-end mt-3",children:e.jsx("div",{children:e.jsxs("p",{className:"text-[#172554] text-sm w-full",children:["Showing 1 to ",Math.min(A,n.length)," of ",V.length," entries"]})})})]})]})]}),e.jsx("style",{children:`
          .fade-in-left {
            animation: fadeInLeft 0.7s cubic-bezier(.39,.575,.565,1) both;
          }
          @keyframes fadeInLeft {
            0% { opacity: 0; transform: translateX(-40px);}
            100% { opacity: 1; transform: translateX(0);}
          }
        `})]})}export{Ie as default};
