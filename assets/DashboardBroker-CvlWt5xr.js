import{r as o,j as e,u as R,c as A,S as P}from"./index-BMYc7Eyr.js";import{a as _}from"./dateUtils-D6w6W0GJ.js";import{c as b,C as E,a as u,b as p}from"./card-Re8qx3Z2.js";import{C as H}from"./react-apexcharts.min-DTh_D0ya.js";import{I as N}from"./input-Bp_50W1t.js";import{f as w,a as S,b as c,c as t,d as v,e as r}from"./table-_gJFl-nq.js";function k({chartData:l,totalSales:n,currencyFormatter:s}){const[a,i]=o.useState(!1),m={series:[{name:"Sales",data:l}],options:{chart:{type:"line",height:350},xaxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},stroke:{curve:"smooth"},title:{text:"Sales from January to December",align:"left"},tooltip:{y:{formatter:x=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(x)}}}};return o.useEffect(()=>{i(!0)},[]),e.jsx("div",{children:e.jsxs(b,{className:"bg-[#eff6ff] border-b-4 border-primary w-full md:w-full",children:[e.jsx(E,{children:e.jsx(u,{children:"Total Sales"})}),e.jsxs(p,{children:[e.jsx("p",{className:"text-lg font-semibold",children:s.format(n)}),e.jsx("div",{className:"w-full md:w-full mt-6",children:a&&e.jsx(H,{options:m.options,series:m.series,type:"line",height:350})})]})]})})}function F({topPerformers:l,currencyFormatter:n}){return e.jsx("div",{children:e.jsx(b,{className:"bg-[#eff6ff] border-b-4 border-primary w-full md:w-full h-full max-h-full",children:e.jsx(p,{children:e.jsxs("div",{children:[e.jsxs("div",{className:"py-5 flex flex-row justify-between items-center",children:[e.jsx(u,{children:"Top Affiliated Rankings"}),e.jsx(N,{type:"text",placeholder:"Search",className:"w-52"})]}),e.jsxs(w,{children:[e.jsx(S,{children:e.jsxs(c,{children:[e.jsx(t,{children:"Rank"}),e.jsx(t,{children:"Affiliated"}),e.jsx(t,{children:"Role"}),e.jsx(t,{children:"Total Reserved"}),e.jsx(t,{children:"Total Sales"})]})}),e.jsxs(v,{children:[l.length===0&&e.jsx(c,{children:e.jsx(r,{colSpan:5,className:"text-center",children:"No data available"})}),l.map((s,a)=>e.jsxs(c,{children:[e.jsx(r,{className:"font-medium border border-[#bfdbfe]",children:a+1}),e.jsxs(r,{className:"font-medium border border-[#bfdbfe]",children:[s.first_name," ",s.middle_name," ",s.last_name," ",s.extension_name]}),e.jsx(r,{className:"font-medium border border-[#bfdbfe]",children:s.role}),e.jsx(r,{className:"font-medium border border-[#bfdbfe]",children:s.totalReserved}),e.jsx(r,{className:"font-medium border border-[#bfdbfe]",children:n.format(s.totalSales)})]},s.id))]})]}),e.jsx("div",{className:"flex flex-row justify-end mt-3",children:e.jsx("div",{children:e.jsx("p",{className:"text-[#172554] text-sm w-full",children:"Showing 1 to 10 of 10 entries"})})})]})})})})}function M({sales:l,formatDateToMMDDYYYY:n,currencyFormatter:s}){return e.jsx(e.Fragment,{children:e.jsx(b,{className:"bg-[#eff6ff] border-b-4 border-primary w-full md:w-full",children:e.jsxs(p,{children:[e.jsxs("div",{className:"py-5 flex flex-row justify-between items-center",children:[e.jsx(u,{children:"Top 5 Recent Sales"}),e.jsx(N,{type:"text",placeholder:"Search",className:"w-52"})]}),e.jsxs(w,{children:[e.jsx(S,{children:e.jsxs(c,{children:[e.jsx(t,{children:"Top"}),e.jsx(t,{children:"Reservation date"}),e.jsx(t,{children:"Category"}),e.jsx(t,{children:"Remarks"}),e.jsx(t,{children:"Amount"})]})}),e.jsxs(v,{children:[l.length===0&&e.jsx(c,{children:e.jsx(r,{colSpan:5,className:"text-center",children:"No data available"})}),l.map((a,i)=>e.jsxs(c,{children:[e.jsx(r,{className:"border border-[#bfdbfe]",children:i+1}),e.jsx(r,{className:"border border-[#bfdbfe]",children:n(a.date_on_sale)}),e.jsx(r,{className:"border border-[#bfdbfe]",children:a.category}),e.jsx(r,{className:"border border-[#bfdbfe]",children:a.remarks}),e.jsx(r,{className:"border border-[#bfdbfe]",children:s.format(a.amount)})]},a.id))]})]}),e.jsx("div",{className:"flex flex-row justify-end mt-3",children:e.jsx("div",{children:e.jsx("p",{className:"text-[#172554] text-sm w-full",children:"Showing 1 to 10 of 10 entries"})})})]})})})}function K(){const[l,n]=o.useState([]),[s,a]=o.useState([]),[i,m]=o.useState(Array(12).fill(0)),[x,T]=o.useState(0),C=R(),D=async()=>{try{const f=await A.get("user/broker",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("access_token")}`}}),g=f.data.salesEncoding.map(d=>({...d,amount:typeof d.amount=="number"?d.amount:parseFloat(d.amount)})),y=Array(12).fill(0);g.forEach(d=>{const j=new Date(d.date_on_sale).getMonth();y[j]+=d.amount}),m(y),n(f.data.topPerformers),a(f.data.salesEncodingTop5),T(g.reduce((d,j)=>d+j.amount,0))}catch{P.fire({icon:"error",title:"Error",text:"Failed to fetching data. Please login again.",confirmButtonText:"OK"}),localStorage.clear(),console.clear(),C("/atHomes")}};o.useEffect(()=>{D()},[]);const h=new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"});return e.jsxs("div",{className:"py-5 md:pt-20",children:[e.jsx("div",{className:"flex justify-between md:flex-row",children:e.jsx("h1",{className:"text-4xl font-bold ml-72 md:ml-0 md:grid-cols-1 md:text-2xl md:gap-2 md:p-5 md:mt-0",children:"Dashboard"})}),e.jsxs("div",{className:"ml-72 md:ml-0 grid grid-cols-2 md:grid-cols-1 md:gap-4 md:p-6 md:mt-0 gap-4 items-start justify-center mt-6 md:px-6 mr-4",children:[e.jsx(k,{chartData:i,totalSales:x,currencyFormatter:h}),e.jsx(F,{topPerformers:l,currencyFormatter:h})]}),e.jsx("div",{className:"ml-72 md:ml-0 grid grid-cols-1 md:grid-cols-1 md:gap-4 md:p-6 md:mt-0 gap-4 items-start justify-center mt-6 md:px-6 mr-4",children:e.jsx(M,{sales:s,formatDateToMMDDYYYY:_,currencyFormatter:h})})]})}export{K as default};
