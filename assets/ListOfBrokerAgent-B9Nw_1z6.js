import{j as s,O as Y,a9 as $,r as N,u as F,F as d,Y as P,X as y,B as D,a as V,aa as H,d as M,S as R}from"./index-DzP73YiP.js";import{S as O,a as Q,b as X,c as z,d as a}from"./select-CDDnd22d.js";import{I as G}from"./input-Dz3A7Y41.js";import{T as K,h as q,i as C,j as l,k as J,l as r,D as W,a as Z,b as g,c as ee,d as se,g as re,f as le}from"./dialog-BXUA4-iJ.js";import{f as oe,a as ie}from"./dateUtils-D6w6W0GJ.js";const de=$("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function T({className:v,variant:_,...i}){return s.jsx("div",{className:Y(de({variant:_}),v),...i})}function he(){const[v,_]=N.useState([]),[i,L]=N.useState(""),[b,k]=N.useState("all"),B=F(),E=async()=>{try{const e=await M.get("agent-broker",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("access_token")}`}});_(e.data.agentList)}catch(e){console.error("Error fetching agent and broker:",e),R.fire({icon:"error",title:"Error",text:"Failed to fetching agent and broker. Please login again.",confirmButtonText:"OK"}),localStorage.clear(),console.clear(),B("/")}};N.useEffect(()=>{E()},[]);const I=e=>{L(e.target.value)},U=e=>{k(e==="all"?"all":parseInt(e))},u=v.filter(e=>{var c,n,t,x,m,h,f;const w=`${(c=e==null?void 0:e.user)==null?void 0:c.acct_number}`.toLowerCase(),p=`${(n=e==null?void 0:e.personal_info)==null?void 0:n.first_name} ${(t=e==null?void 0:e.personal_info)==null?void 0:t.middle_name} ${(x=e==null?void 0:e.personal_info)==null?void 0:x.last_name} ${(m=e==null?void 0:e.personal_info)==null?void 0:m.extension_name}`.toLowerCase(),j=((h=e==null?void 0:e.user)==null?void 0:h.role)===1?"agent":((f=e==null?void 0:e.user)==null?void 0:f.role)===2?"broker":"";return p.includes(i.toLowerCase())||j.includes(i.toLowerCase())||w.includes(i.toLowerCase())}),A=b==="all"?u:u.slice(0,b);return s.jsxs("div",{className:"p-2",children:[s.jsxs("div",{className:"py-2 flex flex-row justify-between gap-4",children:[s.jsxs(O,{onValueChange:U,children:[s.jsxs(Q,{className:"w-[120px] border border-primary md:w-28",children:[s.jsx("span",{className:"text-[#172554]",children:"Show"}),s.jsx(X,{placeholder:"All"})," "]}),s.jsxs(z,{children:[s.jsx(a,{value:"all",children:"All"}),s.jsx(a,{value:"10",children:"10"}),s.jsx(a,{value:"20",children:"20"}),s.jsx(a,{value:"30",children:"30"}),s.jsx(a,{value:"40",children:"40"}),s.jsx(a,{value:"50",children:"50"})]})]}),s.jsx(G,{type:"text",placeholder:"Search",className:"w-52 md:w-full",value:i,onChange:I})]}),s.jsx("div",{className:"fade-in-left",children:s.jsxs(K,{children:[s.jsx(q,{children:s.jsxs(C,{children:[s.jsx(l,{children:"#"}),s.jsx(l,{children:"Fullname"}),s.jsx(l,{children:"Type"}),s.jsx(l,{children:"Email address"}),s.jsx(l,{children:"Contact number"}),s.jsx(l,{children:"Date Approved"}),s.jsx(l,{children:"Status"}),s.jsx(l,{className:"text-right",children:"Action"})]})}),s.jsx(J,{children:A.length>0?A.map((e,w)=>{var p,j,c,n,t,x,m,h,f;return s.jsxs(C,{children:[s.jsx(r,{className:"font-medium border border-[#bfdbfe]",children:w+1}),s.jsxs(r,{className:"border border-[#bfdbfe] uppercase",children:[e.personal_info.first_name," ",e.personal_info.middle_name," ",e.personal_info.last_name," ",e.personal_info.extension_name]}),s.jsx(r,{className:"font-medium border border-[#bfdbfe]",children:((p=e==null?void 0:e.user)==null?void 0:p.role)===1?s.jsx("span",{className:"inline-flex unlicenseds-center rounded-md bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700 ring-1 ring-blue-700/10 ring-inset",children:"Agent"}):((j=e==null?void 0:e.user)==null?void 0:j.role)===2?s.jsx("span",{className:"inline-flex unlicenseds-center rounded-md bg-green-50 px-2 py-1 text-xs font-medium text-green-700 ring-1 ring-green-600/20 ring-inset",children:"Broker"}):(c=e==null?void 0:e.user)==null?void 0:c.role}),s.jsx(r,{className:"border border-[#bfdbfe]",children:e==null?void 0:e.user.email}),s.jsx(r,{className:"border border-[#bfdbfe]",children:e==null?void 0:e.personal_info.phone}),s.jsx(r,{className:"border border-[#bfdbfe]",children:oe(e==null?void 0:e.user.updated_at)}),s.jsx(r,{className:"border border-[#bfdbfe]",children:(()=>{var S;const o=(S=e==null?void 0:e.prc_liscence_number)==null?void 0:S.trim();return!o||o.toUpperCase()==="N/A"||o.toUpperCase()==="NA"||o.length<4||o.toLowerCase()==="n/a"||o.toLowerCase()==="na"||o.toLowerCase()===""?s.jsxs(T,{className:"bg-red-500 hover:bg-red-500 gap-1",children:[s.jsx(d,{icon:P}),"Unlicensed"]}):s.jsxs(T,{className:"bg-green-500 hover:bg-green-500 gap-1",children:[s.jsx(d,{icon:y})," Licensed"]})})()}),s.jsx(r,{className:"text-right border border-[#bfdbfe]",children:s.jsx("div",{className:"flex flex-row gap-1 justify-end",children:s.jsxs(W,{children:[s.jsx(Z,{children:s.jsx(D,{className:"w-8 h-8 rounded-md bg-gradient-to-br from-blue-500 to-blue-700 shadow hover:from-blue-600 hover:to-blue-800 transition-all duration-200",children:s.jsx(d,{icon:V,className:"text-white"})})}),s.jsx(g,{className:"md:max-w-[420px] rounded-2xl bg-gradient-to-br from-blue-50 to-blue-100 shadow-2xl border border-blue-200",children:s.jsxs(ee,{children:[s.jsxs(se,{className:"text-start text-2xl font-bold text-blue-900 flex items-center gap-2",children:[s.jsx(d,{icon:y,className:"text-blue-500"}),"Agent & Broker Details"]}),s.jsx(re,{children:s.jsxs("div",{className:"flex flex-col gap-6 mt-6 mb-4",children:[s.jsxs("div",{className:"border-b pb-4 mb-2 text-start",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(d,{icon:H,className:"text-blue-400"}),s.jsx("h2",{className:"text-lg font-bold text-blue-800",children:"Personal Details"})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-1 text-sm text-gray-700",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold",children:"Account #:"})," ",e==null?void 0:e.user.acct_number]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold",children:"Name:"})," ",(n=e==null?void 0:e.personal_info)==null?void 0:n.first_name," ",(t=e==null?void 0:e.personal_info)==null?void 0:t.middle_name," ",(x=e==null?void 0:e.personal_info)==null?void 0:x.last_name]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold",children:"Email:"})," ",(m=e==null?void 0:e.user)==null?void 0:m.email]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold",children:"Username:"})," ",(h=e==null?void 0:e.user)==null?void 0:h.username]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold",children:"Phone:"})," ",(f=e==null?void 0:e.personal_info)==null?void 0:f.phone]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold",children:"Gender:"})," ",e.personal_info.gender.charAt(0).toUpperCase()+e.personal_info.gender.slice(1)]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold",children:"Complete Address:"})," ",e.personal_info.complete_address]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-semibold",children:"Status:"}),e.user.status===0&&s.jsx("span",{className:"px-2 py-0.5 rounded-full bg-green-100 text-green-700 text-xs font-semibold",children:"Approved"}),e.user.status===1&&s.jsx("span",{className:"px-2 py-0.5 rounded-full bg-yellow-100 text-yellow-700 text-xs font-semibold",children:"Pending"}),e.user.status!==0&&e.user.status!==1&&s.jsx("span",{className:"px-2 py-0.5 rounded-full bg-red-100 text-red-700 text-xs font-semibold",children:"Declined"})]})]})]}),s.jsxs("div",{className:"text-start",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(d,{icon:y,className:"text-blue-400"}),s.jsx("h2",{className:"text-lg font-bold text-blue-800",children:"Identity Information"})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-1 text-sm text-gray-700",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold",children:"PRC License #:"})," ",(e==null?void 0:e.prc_liscence_number)||"N/A"]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold",children:"DHSUD Reg. #:"})," ",(e==null?void 0:e.dhsud_registration_number)||"N/A"]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold",children:"Type:"})," ",(e==null?void 0:e.user.role)===1?"Agent":(e==null?void 0:e.user.role)===2?"Broker":"N/A"]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold",children:"Validity Date:"})," ",ie((e==null?void 0:e.validation_date)||"N/A")]})]})]})]})}),s.jsx(le,{asChild:!0,children:s.jsx(D,{className:"bg-red-500 hover:bg-red-400 text-white rounded-lg mt-2 shadow",children:"Close"})})]})})]})})})]},e.id)}):s.jsx(C,{children:s.jsx(r,{colSpan:9,className:"text-center border border-[#bfdbfe]",children:"No data available"})})})]})}),s.jsx("div",{className:"flex flex-row justify-end mt-3",children:s.jsx("div",{children:s.jsxs("p",{className:"text-[#172554] text-sm w-full",children:["Showing 1 to ",b==="all"?u.length:b," of ",u.length," entries"]})})})]})}export{he as default};
