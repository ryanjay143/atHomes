import{r as d,u as O,j as e,F as g,f as C,a as S,L as P,B as E,t as T,m as J,c as Z,S as y}from"./index-CQC72zjh.js";import{C as K,c as Q,b as W}from"./card-X4J_fwiF.js";import{I as i}from"./input-EmXlBmy2.js";import{L as n}from"./label-D9PEdY0j.js";import{S as F,a as D,b as k,c as R,d as j}from"./select-D-lNktOk.js";const A=()=>{const m="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let h="Acc-";for(let x=0;x<9;x++){const p=m.charAt(Math.floor(Math.random()*m.length));h+=p}return h};function ae(){const[m,h]=d.useState(""),[x,p]=d.useState(!1),[f,B]=d.useState(!1),[b,L]=d.useState(!1),[a,u]=d.useState({}),[_,N]=d.useState(!1),w=O(),[t,c]=d.useState({acct_number:"",first_name:"",middle_name:"",last_name:"",extension_name:"",email:"",phone:"",gender:"",role:"",complete_address:"",username:"",password:"",confirm_password:"",prc_liscence_number:"",dhsud_registration_number:"",validation_date:"",last_school_att:""});d.useEffect(()=>{const r=A();h(r),c(s=>({...s,acct_number:r}))},[]);const o=r=>{const{name:s,value:l}=r.target;c({...t,[s]:l})},q=r=>{const{value:s}=r.target;p(!1),c({...t,password:s,confirm_password:""});const l=/[A-Z]/.test(s),G=/[!@#$%^&*()]/.test(s);s.length<8||!l||!G?u(v=>({...v,password:"Password must be at least 8 characters long, include an uppercase letter and a symbol."})):u(v=>{const{password:X,...H}=v;return H})},V=()=>{B(!f)},I=()=>{L(!b)},M=async r=>{if(r.preventDefault(),_)return;N(!0);const s={};if(t.first_name||(s.first_name="First name is required."),t.last_name||(s.last_name="Last name is required."),t.email||(s.email="Email is required."),t.phone||(s.phone="Mobile number is required."),t.gender||(s.gender="Gender is required."),t.role||(s.role="Account type is required."),t.complete_address||(s.complete_address="Complete address is required."),t.username||(s.username="Username is required."),t.password||(s.password="Password is required."),t.confirm_password||(s.confirm_password="Confirm password is required."),t.password!==t.confirm_password&&(s.confirm_password="Passwords do not match."),t.last_school_att||(s.last_school_att="Last school or course attended is required."),t.role==="2"&&(t.prc_liscence_number||(s.prc_liscence_number="PRC License Number is required for Brokers."),t.dhsud_registration_number||(s.dhsud_registration_number="DHSUD Registration Number is required for Brokers."),t.validation_date||(s.validation_date="Validity Date is required for Brokers.")),u(s),Object.keys(s).length>0){N(!1);return}try{const l=await Z.post("register",t);y.fire({title:"Registration successful!",text:"Please wait for approval.",icon:"success",showConfirmButton:!1,showCloseButton:!0,timer:3e3,timerProgressBar:!0}).then(()=>w("/athomes")),console.log(l.data),c({acct_number:A(),first_name:"",middle_name:"",last_name:"",extension_name:"",email:"",phone:"",gender:"",role:"",complete_address:"",username:"",password:"",confirm_password:"",prc_liscence_number:"",dhsud_registration_number:"",validation_date:"",last_school_att:""}),u({})}catch(l){console.error("Registration failed:",l),l.response&&l.response.data&&l.response.data.message==="Email already taken"?y.fire({title:"Email already taken!",text:"Please login instead.",icon:"warning",showConfirmButton:!0}).then(()=>{w("/athomes/user-register")}):y.fire({title:"Error or Email already taken!",text:"Please try again.",icon:"error",showConfirmButton:!1,showCloseButton:!0,timer:3e3,timerProgressBar:!0})}finally{N(!1),w("/athomes/user-register")}},U=()=>{const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()";let s="";for(let l=0;l<8;l++)s+=r.charAt(Math.floor(Math.random()*r.length));c({...t,password:s,confirm_password:s}),p(!0)};return e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:e.jsxs("form",{onSubmit:M,className:"w-full max-w-6xl",children:[e.jsx(K,{className:"flex justify-center items-start mb-4",children:e.jsx(Q,{className:"text-3xl font-bold",children:"Registration"})}),e.jsxs(W,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("span",{className:"block text-gray-700 text-lg font-bold mb-2",children:"Personal Details"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"first_name",children:"First name"})," ",e.jsx("span",{className:"text-red-500",children:"*"}),e.jsx(i,{type:"text",name:"first_name",className:"h-9 bg-white",placeholder:"Enter your first name",onChange:o}),a.first_name&&e.jsx("span",{className:"text-red-500 text-sm",children:a.first_name})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"middle_name",children:"Middle name"}),e.jsx(i,{type:"text",name:"middle_name",className:"h-9 bg-white",placeholder:"Enter your middle name",onChange:o})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"last_name",children:"Last name"})," ",e.jsx("span",{className:"text-red-500",children:"*"}),e.jsx(i,{type:"text",name:"last_name",className:"h-9 bg-white",placeholder:"Enter your last name",onChange:o}),a.last_name&&e.jsx("span",{className:"text-red-500 text-sm",children:a.last_name})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"extension_name",children:"Extension name"})," ",e.jsx("span",{className:"md:text-[7px] md:font-bold",children:"(Jr, Sr. III)"}),e.jsx(i,{type:"text",name:"extension_name",className:"h-9 bg-white",placeholder:"Enter your extension name",onChange:o})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("span",{className:"block text-gray-700 text-lg font-bold mb-2",children:"Contact Details"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"email",children:"Email"})," ",e.jsx("span",{className:"text-red-500",children:"*"}),e.jsx(i,{type:"email",name:"email",className:"h-9 bg-white",placeholder:"Enter your email",onChange:o}),a.email&&e.jsx("span",{className:"text-red-500 text-sm",children:a.email})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"phone",children:"Mobile number"})," ",e.jsx("span",{className:"text-red-500",children:"*"}),e.jsx(i,{type:"text",name:"phone",className:"h-9 bg-white",placeholder:"Enter mobile number",onChange:o}),a.phone&&e.jsx("span",{className:"text-red-500 text-sm",children:a.phone})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"gender",children:"Gender"})," ",e.jsx("span",{className:"text-red-500",children:"*"}),e.jsxs(F,{onValueChange:r=>c({...t,gender:r}),children:[e.jsx(D,{className:"h-9 bg-white",children:e.jsx(k,{placeholder:"Select gender"})}),e.jsxs(R,{children:[e.jsx(j,{value:"male",children:"Male"}),e.jsx(j,{value:"female",children:"Female"})]})]}),a.gender&&e.jsx("span",{className:"text-red-500 text-sm",children:a.gender})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"complete_address",children:"Complete address"})," ",e.jsx("span",{className:"text-red-500",children:"*"}),e.jsx(i,{type:"text",name:"complete_address",className:"h-9 bg-white",placeholder:"Enter complete address",onChange:o}),a.complete_address&&e.jsx("span",{className:"text-red-500 text-sm",children:a.complete_address})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("span",{className:"block text-gray-700 text-lg font-bold mb-2",children:"Account Details"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"hidden",children:[e.jsx(n,{htmlFor:"acct_number",children:"Account number"}),e.jsx(i,{type:"text",name:"acct_number",className:"h-9 bg-white",value:m,readOnly:!0})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"username",children:"Username"})," ",e.jsx("span",{className:"text-red-500",children:"*"}),e.jsx(i,{type:"text",name:"username",className:"h-9 bg-white",placeholder:"Enter username",onChange:o}),a.username&&e.jsx("span",{className:"text-red-500 text-sm",children:a.username})]}),e.jsxs("div",{className:"mt-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(n,{htmlFor:"password",children:["Password ",e.jsx("span",{className:"text-red-500",children:"*"})," "]}),e.jsx("button",{type:"button",className:"text-blue-500 text-sm hover:underline md:text-[10px]",onClick:U,children:"Generate Password"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(i,{type:f?"text":"password",name:"password",className:"h-9 bg-white pr-10",placeholder:"Password",value:t.password,onChange:q}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 flex items-center px-3",onClick:V,children:e.jsx(g,{icon:f?C:S,className:"text-gray-500"})})]}),a.password&&e.jsx("span",{className:"text-red-500 text-xs",children:a.password})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"confirm_password",children:"Confirm Password"})," ",e.jsx("span",{className:"text-red-500",children:"*"}),e.jsxs("div",{className:"relative",children:[e.jsx(i,{type:b?"text":"password",name:"confirm_password",className:"h-9 bg-white pr-10",placeholder:"Confirm Password",value:t.confirm_password,onChange:o,readOnly:x}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 flex items-center px-3",onClick:I,children:e.jsx(g,{icon:b?C:S,className:"text-gray-500"})})]}),a.confirm_password&&e.jsx("span",{className:"text-red-500 text-sm",children:a.confirm_password})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("span",{className:"block text-gray-700 text-lg font-bold mb-2",children:"Identity Details"}),e.jsxs("div",{className:"grid grid-cols-5 gap-4 w-full md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"type",children:"Type"})," ",e.jsx("span",{className:"text-red-500",children:"*"}),e.jsxs(F,{onValueChange:r=>{console.log("Selected Role:",r),c({...t,role:r})},children:[e.jsx(D,{className:"h-9 bg-white",children:e.jsx(k,{placeholder:"Select Agent or Broker"})}),e.jsxs(R,{children:[e.jsx(j,{value:"1",children:"Agent"}),e.jsx(j,{value:"2",children:"Broker"})]})]}),a.role&&e.jsx("span",{className:"text-red-500 text-sm",children:a.role})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"prc_liscence_number",children:"PRC License Number"}),e.jsx(i,{type:"text",name:"prc_liscence_number",className:"h-9 bg-white",placeholder:"Enter PRC License No:",onChange:o}),a.prc_liscence_number&&e.jsx("span",{className:"text-red-500 text-sm",children:a.prc_liscence_number})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"dhsud_registration_number",className:"md:text-[9px] md:font-bold text-xs",children:"DHSUD Registration Number"}),e.jsx(i,{type:"text",name:"dhsud_registration_number",className:"h-9 bg-white",placeholder:"Enter DHSUD Registration No:",onChange:r=>{o(r),console.log("DHSUD Registration Number:",r.target.value)}}),a.dhsud_registration_number&&e.jsx("span",{className:"text-red-500 text-sm",children:a.dhsud_registration_number})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"validation_date",children:"Validity Date"}),e.jsx(i,{type:"date",name:"validation_date",className:"h-9 bg-white md:w-[183px]",onChange:r=>{const l=r.target.value.split("-").reverse().join("-");o({target:{name:"validation_date",value:l}}),console.log("Validation Date:",l)}}),a.validation_date&&e.jsx("span",{className:"text-red-500 text-sm",children:a.validation_date})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"last_school_att",className:"text-[11px] font-bold",children:"Last School or Course attended"})," ",e.jsx("span",{className:"text-red-500 ",children:"*"}),e.jsx(i,{type:"text",name:"last_school_att",className:"h-9 bg-white",placeholder:"Enter Last School or Course attended",onChange:o}),a.last_school_att&&e.jsx("span",{className:"text-red-500 text-sm",children:a.last_school_att})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-6",children:[e.jsx(P,{to:"/athomes/user-login",children:e.jsxs(E,{className:"bg-red-500 hover:bg-red-600",children:[e.jsx(g,{icon:T}),"Back"]})}),e.jsx(E,{type:"submit",className:"bg-green-600 hover:bg-green-700",disabled:_,children:_?e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Registering..."}),e.jsx("span",{className:"animate-spin border-2 border-white border-t-transparent rounded-full w-4 h-4"})]}):e.jsxs(e.Fragment,{children:["Register now",e.jsx(g,{icon:J})]})})]}),e.jsxs("div",{className:"flex justify-center space-x-2 mt-4",children:[e.jsx("span",{children:"Already have an account?"}),e.jsx(P,{to:"/athomes/user-login",className:"text-primary",children:"Login here"})]})]})]})})}export{ae as default};
