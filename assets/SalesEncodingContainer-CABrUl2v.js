import{j as e,L as be,r,R as pe,B as G,F as m,$ as je,af as Z,ad as ee,ab as se,ae,a4 as te,ag as Ne,g as re,d as M,S as B,ah as ve,ai as Se,aj as we,a1 as ye,u as Ce,a3 as _e,a2 as ke}from"./index-BqgKW3tX.js";import{B as Ae,a as Fe,b as Pe,c as De}from"./breadcrumb-CMARPdCn.js";import{c as Ee,C as Be,b as Le}from"./card-DMwL5mhC.js";import{I as C}from"./input-BPORAoyB.js";import{S as L,a as T,b as I,c as R,d as t}from"./select-yW0ppv6d.js";import{D as le,a as Te,b as ne,c as oe,d as ie,g as ce,e as de,T as Ie,h as Re,i as K,j as k,k as Oe,l as y}from"./dialog-bG-Ik3It.js";import{L as g}from"./label-L0oGHOiY.js";import{N as me}from"./react-number-format.es-Bh2RKreN.js";import{V as $e}from"./ViewReceipt-DXgzl9b9.js";function ze(){return e.jsx("div",{className:"bg-gradient-to-r from-blue-900 via-blue-800 to-blue-700 shadow-lg flex flex-row items-center gap-4 p-4 rounded-xl mb-8 border border-blue-800/40",children:e.jsx("div",{className:"flex flex-col items-start md:items-center md:justify-center md:ml-10 text-accent fade-in-right w-full",children:e.jsx(Ae,{children:e.jsxs(Fe,{children:[e.jsx(Pe,{className:"text-accent",children:e.jsx(be,{to:"/admin/sales-encoding",children:"List of Sales Encoding"})}),e.jsx(De,{})]})})})})}function Ge({fetchAgent:i}){const[o,h]=r.useState({agent_id:"",category:"",date_on_sale:new Date().toISOString().split("T")[0],amount:"",location:"",remarks:"",image:null,client_name:""}),[V,b]=r.useState("Choose agent or broker"),[c,v]=r.useState({}),[A,F]=r.useState(!1),[S,P]=r.useState(!1),[p,j]=r.useState([]),[w,N]=r.useState(null),[D,_]=pe.useState(""),[s,f]=r.useState(null);r.useEffect(()=>{(async()=>{try{const l=await M.get("sales-encoding",{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}});j(l.data.agents)}catch(l){console.error("Error fetching agents:",l)}})()},[]);const E=a=>{const{value:l}=a;_(l),h({...o,amount:l}),v(l===""?{amount:"Amount is required"}:{})},O=(a,l)=>{h({...o,[a]:l});const u=p.find(x=>x.id===l);if(u){const x=`${u.personal_info.first_name} ${u.personal_info.middle_name} ${u.personal_info.last_name} ${u.personal_info.extension_name}`;b(x)}},q=a=>{const l=a.target.value;h({...o,date_on_sale:l})},$=a=>{const{name:l,value:u}=a.target;h({...o,[l]:u})},J=a=>{var u;const l=((u=a.target.files)==null?void 0:u[0])||null;if(l&&(["image/jpeg","image/png","image/jpg"].includes(l.type)?l.size>5242880?(N("File size exceeds the maximum limit of 5MB."),h({...o,image:null})):(N(null),h({...o,image:l})):(N("Invalid file type. Only JPEG, PNG, and JPG are allowed."),h({...o,image:null}))),l){const x=new FileReader;x.onloadend=()=>{f(x.result)},x.onerror=()=>{N("Failed to read file")},x.readAsDataURL(l)}},U=()=>{const a={};return o.agent_id||(a.agent_id="Agent/Broker is required."),o.category||(a.category="Category is required."),o.date_on_sale||(a.date_on_sale="Date of Sale is required."),o.amount||(a.amount="Amount of Sale is required."),o.location||(a.location="Location of Property is required."),o.remarks||(a.remarks="Remarks are required."),o.image||(a.image="Proof of Transaction is required."),o.client_name||(a.client_name="Client name is required."),v(a),Object.keys(a).length===0},z=async a=>{if(a.preventDefault(),!U()||S)return;P(!0);const l=new FormData;Object.entries(o).forEach(([u,x])=>{l.append(u,x)});try{await M.post("sales-encoding",l,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${localStorage.getItem("access_token")}`}}),i(),h({agent_id:"",category:"",date_on_sale:new Date().toISOString().split("T")[0],amount:"",location:"",remarks:"",image:null,client_name:""}),_(""),b("Choose agent or broker"),F(!1),f(null),B.fire({icon:"success",title:"Success",text:"Sales created successfully.",showConfirmButton:!1,timer:3e3,timerProgressBar:!0})}catch{B.fire({icon:"error",title:"Failed to create sales encoding",text:"There was an error while saving your sales encoding. Please try again.",confirmButtonText:"Retry"})}finally{P(!1)}};return e.jsx("div",{children:e.jsxs(le,{open:A,onOpenChange:F,children:[e.jsx(Te,{asChild:!0,children:e.jsxs(G,{className:"h-10 bg-gradient-to-r from-blue-500 to-blue-700 text-white shadow-md hover:from-blue-600 hover:to-blue-800 transition-all duration-200 rounded-lg",children:[e.jsx(m,{icon:je,className:"mr-2"}),"Add Sales"]})}),e.jsx(ne,{className:"md:w-[90%] max-w-xl h-full md:h-[85%] overflow-auto bg-gradient-to-br from-blue-50 to-blue-100 shadow-2xl border border-blue-200",children:e.jsxs(oe,{children:[e.jsxs(ie,{className:"text-start text-2xl font-bold text-blue-900 flex items-center gap-2",children:[e.jsx(m,{icon:Z,className:"text-blue-500"}),"Add Sales Encoding"]}),e.jsx(ce,{children:e.jsx("form",{onSubmit:z,children:e.jsxs("div",{className:"text-start flex flex-col gap-6 mt-4",children:[e.jsxs("div",{className:"grid w-full items-start gap-2",children:[e.jsxs(g,{className:"font-semibold text-blue-900 flex items-center gap-2",children:[e.jsx(m,{icon:ee,className:"text-blue-400"}),"Agent/Broker"]}),e.jsxs(L,{onValueChange:a=>O("agent_id",a),children:[e.jsx(T,{className:"rounded-lg border-blue-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200",children:e.jsx(I,{placeholder:"Choose agent or broker",children:V})}),e.jsx(R,{children:p.map(a=>e.jsxs(t,{value:a.id,children:[a.personal_info.first_name," ",a.personal_info.middle_name," ",a.personal_info.last_name]},a.id))})]}),c.agent_id&&e.jsx("p",{className:"text-red-500 text-xs",children:c.agent_id})]}),e.jsxs("div",{className:"grid w-full items-start gap-2",children:[e.jsx(g,{className:"font-semibold text-blue-900",children:"Category"}),e.jsxs(L,{onValueChange:a=>O("category",a),children:[e.jsx(T,{className:"rounded-lg border-blue-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200",children:e.jsx(I,{placeholder:"Select category"})}),e.jsxs(R,{children:[e.jsx(t,{value:"Lot only",children:"Lot only"}),e.jsx(t,{value:"House and lot",children:"House and lot"}),e.jsx(t,{value:"Condominium/Apartment",children:"Condominium/Apartment"}),e.jsx(t,{value:"Commercial Properties",children:"Commercial Properties"}),e.jsx(t,{value:"Rental Properties",children:"Rental Properties"}),e.jsx(t,{value:"Farm Lot",children:"Farm Lot"}),e.jsx(t,{value:"Block and lot",children:"Block and lot"})]})]}),c.category&&e.jsx("p",{className:"text-red-500 text-xs",children:c.category})]}),e.jsxs("div",{className:"grid w-full items-center gap-2",children:[e.jsxs(g,{className:"font-semibold text-blue-900 flex items-center gap-2",children:[e.jsx(m,{icon:se,className:"text-blue-400"}),"Client Name"]}),e.jsx(C,{type:"text",name:"client_name",placeholder:"Enter client name",value:o.client_name,onChange:$,className:"rounded-lg border-blue-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200"}),c.client_name&&e.jsx("p",{className:"text-red-500 text-xs",children:c.client_name})]}),e.jsxs("div",{className:"grid w-full items-center gap-2",children:[e.jsxs(g,{className:"font-semibold text-blue-900 flex items-center gap-2",children:[e.jsx(m,{icon:ae,className:"text-blue-400"}),"Reservation Date"]}),e.jsx(C,{type:"date",name:"date_on_sale",value:o.date_on_sale,onChange:q,className:"rounded-lg border-blue-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200"}),c.date_on_sale&&e.jsx("p",{className:"text-red-500 text-xs",children:c.date_on_sale})]}),e.jsxs("div",{className:"grid w-full items-center gap-2",children:[e.jsx(g,{className:"font-semibold text-blue-900",children:"Amount of Sale"}),e.jsx(me,{value:D,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,allowNegative:!1,placeholder:"0.00",onValueChange:E,className:"flex h-9 w-full rounded-lg border border-blue-300 bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-200 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm"}),c.amount&&e.jsx("p",{className:"text-red-500 text-xs",children:c.amount})]}),e.jsxs("div",{className:"grid w-full items-center gap-2",children:[e.jsxs(g,{className:"font-semibold text-blue-900 flex items-center gap-2",children:[e.jsx(m,{icon:te,className:"text-blue-400"}),"Location of Property"]}),e.jsx(C,{type:"text",name:"location",placeholder:"Enter location of property",onChange:$,className:"rounded-lg border-blue-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200"}),c.location&&e.jsx("p",{className:"text-red-500 text-xs",children:c.location})]}),e.jsxs("div",{className:"grid w-full items-center gap-2",children:[e.jsx(g,{className:"font-semibold text-blue-900",children:"Remarks"}),e.jsxs(L,{onValueChange:a=>O("remarks",a),children:[e.jsx(T,{className:"rounded-lg border-blue-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200",children:e.jsx(I,{placeholder:"Select remarks"})}),e.jsxs(R,{children:[e.jsx(t,{value:"Sold",children:"Sold"}),e.jsx(t,{value:"Not Sold",children:"Not Sold"}),e.jsx(t,{value:"Pre-Selling",children:"Pre-Selling"}),e.jsx(t,{value:"RFO",children:"Ready for Occupancy - (RFO)"})]})]}),c.remarks&&e.jsx("p",{className:"text-red-500 text-xs",children:c.remarks})]}),e.jsxs("div",{className:"grid w-full gap-2",children:[e.jsxs(g,{className:"font-semibold text-blue-900 flex items-center gap-2",children:[e.jsx(m,{icon:Ne,className:"text-blue-400"}),"Upload Proof of Transaction",e.jsx("span",{className:"text-xs text-red-500 ml-2",children:"(JPEG, PNG, JPG only, max 5MB)"})]}),e.jsx(C,{type:"file",name:"image",accept:".jpg,.jpeg,.png,image/jpeg,image/png",onChange:J,className:"rounded-lg border-blue-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200"}),w&&e.jsx("p",{className:"text-red-500 text-xs",children:w}),c.image&&e.jsx("p",{className:"text-red-500 text-xs",children:c.image}),s&&e.jsx("div",{className:"mt-2 flex justify-center",children:e.jsx("img",{src:s,alt:"Preview",className:"max-w-xs rounded-lg border border-blue-200 shadow"})})]}),e.jsx(de,{className:"mt-4",children:e.jsx(G,{type:"submit",disabled:S,className:"w-full bg-gradient-to-r from-blue-600 to-blue-800 text-white rounded-lg shadow hover:from-blue-700 hover:to-blue-900 flex items-center justify-center gap-2",children:S?e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Submitting..."}),e.jsx("span",{className:"animate-spin border-2 border-white border-t-transparent rounded-full w-4 h-4"})]}):e.jsxs(e.Fragment,{children:[e.jsx(m,{icon:re}),e.jsx("span",{children:"Submit"})]})})})]})})})]})})]})})}const Ve=({sales:i,open:o,onOpenChange:h,getAgentBroker:V,fetchAgent:b})=>{var Y,X;const c=`https://athomes.site/${i.image}`,[v,A]=r.useState((Y=i.agent)!=null&&Y.id?String(i.agent.id):""),[F,S]=r.useState(i.category||""),[P,p]=r.useState(((X=i.date_on_sale)==null?void 0:X.split("T")[0])||""),[j,w]=r.useState(i.amount.toString()||""),[N,D]=r.useState(i.location||""),[_,s]=r.useState(c),[f,E]=r.useState(i.remarks||""),[O,q]=r.useState(i.client_name||""),[$,J]=r.useState(!1),[U,z]=r.useState(null),[a,l]=r.useState(null),[u,x]=r.useState(null),Q=r.useRef(null),ue=d=>{var H;const n=(H=d.target.files)==null?void 0:H[0];if(n){const he=["image/jpeg","image/png","image/jpg"];if(!n.type.startsWith("image/")||!he.includes(n.type)){x("Please select a valid image file (JPEG, PNG, or JPG).");return}if(n.size>5242880){x("The selected file exceeds the maximum size of 5MB.");return}x(null);const W=new FileReader;W.onloadend=()=>{typeof W.result=="string"&&(s(W.result),l(n))},W.readAsDataURL(n)}else x("Please select a valid image file.")},xe=()=>{s(c),Q.current&&(Q.current.value=""),l(null)};r.useEffect(()=>{var d,n;o&&(A((d=i.agent)!=null&&d.id?String(i.agent.id):""),S(i.category||""),p(((n=i.date_on_sale)==null?void 0:n.split("T")[0])||""),w(i.amount.toString()||""),D(i.location||""),E(i.remarks||""),q(i.client_name||""),s(c),z(null),l(null))},[o,i]);const ge=async d=>{if(d.preventDefault(),!$){J(!0),z(null);try{const n=new FormData;n.append("agent_id",v),n.append("category",F),n.append("date_on_sale",P),n.append("amount",j),n.append("location",N),n.append("remarks",f),n.append("client_name",O),a&&n.append("image",a),(await M.post(`updateSalesEncoding/${i.id}`,n,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,"Content-Type":"multipart/form-data"}})).status===200&&(h(!1),w(""),b(),B.fire({icon:"success",title:"Success",text:"Sales encoding updated successfully!",timer:2e3,timerProgressBar:!0,showConfirmButton:!1}))}catch(n){if(n.response&&n.response.data&&n.response.data.errors){const H=Object.values(n.response.data.errors).flat().join(", ");z(H)}else z("An error occurred while updating.")}finally{J(!1)}}},fe=d=>{const{value:n}=d;w(n)};return e.jsx(le,{open:o,onOpenChange:h,children:e.jsxs(ne,{className:"md:w-[95%] max-w-xl h-full overflow-auto bg-gradient-to-br from-blue-50 to-blue-100 shadow-2xl border border-blue-200",children:[e.jsxs(oe,{className:"text-start",children:[e.jsxs(ie,{className:"text-2xl font-bold text-blue-900 flex items-center gap-2",children:[e.jsx(m,{icon:Z,className:"text-blue-500"}),"Edit Sales Encoding"]}),e.jsx(ce,{children:e.jsx("span",{className:"text-blue-800 md:text-sm mt-1",children:"Make changes to your sales here. Click save when you're done."})})]}),e.jsxs("form",{onSubmit:ge,children:[e.jsxs("div",{className:"grid gap-6 py-4",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsxs(g,{htmlFor:"agent",className:"text-blue-900 font-semibold flex items-center gap-2",children:[e.jsx(m,{icon:ee,className:"text-blue-400"}),"Agent/Broker"]}),e.jsxs(L,{value:v,onValueChange:A,children:[e.jsx(T,{className:"col-span-3 uppercase rounded-lg border-blue-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200",children:e.jsx(I,{placeholder:"Choose agent or broker"})}),e.jsx(R,{children:V.map(d=>e.jsxs(t,{className:"uppercase",value:String(d.id),children:[d.personal_info.first_name," ",d.personal_info.middle_name," ",d.personal_info.last_name," ",d.personal_info.extension_name]},d.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(g,{htmlFor:"category",className:"text-blue-900 font-semibold",children:"Category"}),e.jsxs(L,{value:F,onValueChange:S,children:[e.jsx(T,{className:"col-span-3 rounded-lg border-blue-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200",children:e.jsx(I,{placeholder:"Select category"})}),e.jsxs(R,{children:[e.jsx(t,{value:"Lot only",children:"Lot only"}),e.jsx(t,{value:"House and lot",children:"House and lot"}),e.jsx(t,{value:"Condominium/Apartment",children:"Condominium/Apartment"}),e.jsx(t,{value:"Commercial Properties",children:"Commercial Properties"}),e.jsx(t,{value:"Rental Properties",children:"Rental Properties"}),e.jsx(t,{value:"Farm Lot",children:"Farm Lot"}),e.jsx(t,{value:"Block and lot",children:"Block and lot"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsxs(g,{htmlFor:"client_name",className:"text-blue-900 font-semibold flex items-center gap-2",children:[e.jsx(m,{icon:se,className:"text-blue-400"}),"Client Name"]}),e.jsx(C,{value:O,onChange:d=>q(d.target.value),className:"col-span-3 rounded-lg border-blue-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsxs(g,{htmlFor:"date_on_sale",className:"text-blue-900 font-semibold flex items-center gap-2",children:[e.jsx(m,{icon:ae,className:"text-blue-400"}),"Date"]}),e.jsx(C,{type:"date",value:P,onChange:d=>p(d.target.value),className:"col-span-3 rounded-lg border-blue-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsxs(g,{htmlFor:"amount",className:"text-blue-900 font-semibold flex items-center gap-2",children:[e.jsx(m,{icon:ve,className:"text-green-500"}),"Amount"]}),e.jsx(me,{value:j,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,allowNegative:!1,placeholder:"0.00",onValueChange:fe,className:"flex h-9 col-span-3 w-full rounded-lg border border-blue-300 bg-transparent px-3 py-1 text-base shadow-sm transition-colors placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-200 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsxs(g,{htmlFor:"location",className:"text-blue-900 font-semibold flex items-center gap-2",children:[e.jsx(m,{icon:te,className:"text-red-400"}),"Location"]}),e.jsx(C,{value:N,onChange:d=>D(d.target.value),className:"col-span-3 rounded-lg border-blue-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsxs(g,{htmlFor:"remarks",className:"text-blue-900 font-semibold flex items-center gap-2",children:[e.jsx(m,{icon:Se,className:"text-indigo-400"}),"Remarks"]}),e.jsxs(L,{value:f,onValueChange:E,children:[e.jsx(T,{className:"col-span-3 rounded-lg border-blue-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200",children:e.jsx(I,{placeholder:"Select remarks"})}),e.jsxs(R,{children:[e.jsx(t,{value:"Sold",children:"Sold"}),e.jsx(t,{value:"Not Sold",children:"Not Sold"}),e.jsx(t,{value:"Pre-Selling",children:"Pre-Selling"}),e.jsx(t,{value:"RFO",children:"Ready for Occupancy - (RFO)"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsxs(g,{htmlFor:"Image",className:"text-blue-900 font-semibold flex items-center gap-2",children:[e.jsx(m,{icon:we,className:"text-pink-400"}),"Proof of Transaction"]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("span",{className:"text-xs text-red-500 ml-2",children:"(JPEG, PNG, JPG only, max 5MB)"}),e.jsx(C,{type:"file",accept:".jpg,.jpeg,.png,image/jpeg,image/png",onChange:ue,ref:Q,className:"rounded-lg border-blue-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200"}),u&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:u})]})]}),_&&e.jsxs("div",{className:"relative mt-4 flex justify-center",children:[e.jsx("img",{src:_,alt:"Selected Preview",className:"max-h-48 object-cover rounded-lg border border-blue-200 shadow"}),_!==c&&e.jsx(G,{type:"button",onClick:xe,className:"absolute top-2 right-2 h-8 w-8 bg-red-500 hover:bg-red-400 rounded-full p-1 shadow-md",children:e.jsx(m,{icon:ye,className:"text-white"})})]})]}),U&&e.jsx("div",{className:"text-red-500 text-center",children:U}),e.jsx(de,{children:e.jsx(G,{type:"submit",disabled:$,className:"w-full bg-gradient-to-r from-green-500 to-green-700 hover:from-green-600 hover:to-green-800 text-white rounded-lg shadow flex items-center justify-center gap-2",children:$?e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Saving..."}),e.jsx("span",{className:"animate-spin border-2 border-white border-t-transparent rounded-full w-4 h-4"})]}):e.jsxs(e.Fragment,{children:[e.jsx(m,{icon:re}),e.jsx("span",{children:"Save changes"})]})})})]})]})})};function Ze(){const[i,o]=r.useState([]),[h,V]=r.useState([]),[b,c]=r.useState(""),[v,A]=r.useState(10),[F,S]=r.useState(null),P=Ce();r.useEffect(()=>{p()},[]);const p=async()=>{try{const s=await M.get("sales-encoding",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("access_token")}`}});o(s.data.salesEncodingAdmin.map(f=>({...f,amount:typeof f.amount=="number"?f.amount:parseFloat(f.amount)}))),V(s.data.agents),A(s.data.salesEncodingAdmin.length),o(s.data.salesEncodingAdmin)}catch{B.fire({icon:"error",title:"Error",text:"Failed to fetching data. Please login again.",confirmButtonText:"OK"}),localStorage.clear(),console.clear(),P("/")}},j=i.filter(s=>s.category.toLowerCase().includes(b.toLowerCase())||new Date(s.date_on_sale).toLocaleDateString().toLowerCase().includes(b.toLowerCase())||s.amount.toString().toLowerCase().includes(b.toLowerCase())||s.location.toLowerCase().includes(b.toLowerCase())||s.remarks.toLowerCase().includes(b.toLowerCase())||s.client_name.toLowerCase().includes(b.toLowerCase())),w=j.slice(0,v),N=new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}),D=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"2-digit"}),_=async s=>{if((await B.fire({title:"Are you sure?",text:"Sale cant be revert — feel free to make a new one.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"})).isConfirmed)try{await M.delete(`sales-encoding/${s}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("access_token")}`}}),B.fire({icon:"success",title:"Deleted!",text:"Sales encoding has been deleted.",timer:1500,showConfirmButton:!1}),p()}catch{B.fire({icon:"error",title:"Error!",text:"Failed to delete sales encoding."})}};return e.jsx("div",{className:"flex flex-col md:flex-row gap-4",children:e.jsxs("div",{className:"ml-72 md:ml-0  gap-2 items-start justify-center mr-5 md:px-2 ",children:[e.jsx(ze,{}),e.jsxs(Ee,{className:"bg-[#eef2ff] border-b-4 border-primary fade-in-left md:w-[380px]",children:[e.jsx(Be,{children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4 justify-between",children:[e.jsxs("div",{className:"flex flex-col items-start bg-gradient-to-r from-blue-100 to-blue-200 px-4 py-2 rounded-lg shadow-sm",children:[e.jsx("span",{className:"text-xs text-blue-700 font-semibold",children:"Total Sales Encodings"}),e.jsx("span",{className:"text-2xl font-bold text-blue-900",children:j.length})]}),e.jsx("div",{className:"flex items-center",children:e.jsx(Ge,{fetchAgent:p})})]})}),e.jsxs(Le,{children:[e.jsxs("div",{className:"py-2 flex flex-row justify-between gap-4",children:[e.jsxs(L,{onValueChange:s=>A(s==="all"?j.length:parseInt(s,10)),children:[e.jsxs(T,{className:"w-[120px] border border-primary",children:[e.jsx("span",{className:"text-[#172554]",children:"Show"}),e.jsx(I,{placeholder:"All"})]}),e.jsxs(R,{children:[e.jsx(t,{value:"all",children:"All"}),e.jsx(t,{value:"5",children:"5"}),e.jsx(t,{value:"10",children:"10"}),e.jsx(t,{value:"20",children:"20"}),e.jsx(t,{value:"30",children:"30"}),e.jsx(t,{value:"40",children:"40"}),e.jsx(t,{value:"50",children:"50"})]})]}),e.jsx(C,{type:"text",placeholder:"Search",className:"w-52 md:w-full",value:b,onChange:s=>c(s.target.value)})]}),e.jsx("div",{className:"fade-in-left ",children:e.jsxs(Ie,{className:"w-full",children:[e.jsx(Re,{className:"bg-primary text-base",children:e.jsxs(K,{children:[e.jsx(k,{children:"#"}),e.jsx(k,{children:"Client name"}),e.jsx(k,{children:"Category"}),e.jsx(k,{children:"Reservation Date"}),e.jsx(k,{children:"Amount"}),e.jsx(k,{children:"Location"}),e.jsx(k,{children:"Remarks"}),e.jsx(k,{className:"text-right",children:"Action"})]})}),e.jsxs(Oe,{children:[w.length===0&&e.jsx(K,{children:e.jsx(y,{colSpan:8,className:"text-center text-sm font-medium text-gray-500",children:"No record found."})}),w.map((s,f)=>e.jsxs(K,{children:[e.jsx(y,{className:"font-medium border border-[#bfdbfe]",children:f+1}),e.jsx(y,{className:"border border-[#bfdbfe]",children:s.client_name}),e.jsx(y,{className:"font-medium border border-[#bfdbfe]",children:s.category}),e.jsx(y,{className:"border border-[#bfdbfe]",children:D.format(new Date(s.date_on_sale))}),e.jsx(y,{className:"border border-[#bfdbfe]",children:e.jsx("span",{children:N.format(s.amount)})}),e.jsx(y,{className:"border border-[#bfdbfe]",children:s.location}),e.jsx(y,{className:"border border-[#bfdbfe]",children:s.remarks}),e.jsx(y,{className:"text-right border border-[#bfdbfe]",children:e.jsxs("div",{className:"flex flex-row gap-1 justify-end",children:[e.jsx($e,{sales:s,dateFormatter:D,currencyFormatter:N}),e.jsx(G,{className:"h-8 w-8 font-medium bg-green-500 hover:bg-green-400 text-sm rounded-md",onClick:()=>S(s.id),children:e.jsx(m,{icon:_e})}),e.jsx(Ve,{sales:s,open:F===s.id,onOpenChange:E=>S(E?s.id:null),getAgentBroker:h,fetchAgent:p}),e.jsx(G,{className:"h-8 w-8 font-medium bg-red-500 hover:bg-red-400 text-sm rounded-md",onClick:()=>_(s.id),children:e.jsx(m,{icon:ke})})]})})]},s.id))]})]})}),e.jsx("div",{className:"flex flex-row justify-end mt-3",children:e.jsx("div",{children:e.jsxs("p",{className:"text-[#172554] text-sm w-full",children:["Showing 1 to ",Math.min(v,j.length)," of ",j.length," entries"]})})})]})]})]})})}export{Ze as default};
