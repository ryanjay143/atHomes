import{r as o,u as Z,j as e,F as j,a as E,b as F,L as R,B as L,e as $,g as K,d as Q,S as A}from"./index-BqgKW3tX.js";import{C as X,a as Y,b as ee}from"./card-DMwL5mhC.js";import{I as i}from"./input-BPORAoyB.js";import{L as n}from"./label-L0oGHOiY.js";import{S as D,a as B,b as q,c as I,d as f}from"./select-yW0ppv6d.js";const V=()=>{const h="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let x="Acc-";for(let u=0;u<9;u++){const p=h.charAt(Math.floor(Math.random()*h.length));x+=p}return x};function ie(){const[h,x]=o.useState(""),[u,p]=o.useState(!1),[_,U]=o.useState(!1),[N,M]=o.useState(!1),[a,b]=o.useState({}),[w,v]=o.useState(!1),y=Z(),[s,d]=o.useState({acct_number:"",first_name:"",middle_name:"",last_name:"",extension_name:"",email:"",phone:"",gender:"",role:"",complete_address:"",username:"",password:"",confirm_password:"",prc_liscence_number:"",dhsud_registration_number:"",validation_date:"",last_school_att:""});o.useEffect(()=>{const r=V();x(r),d(t=>({...t,acct_number:r}))},[]);const l=r=>{const{name:t,value:c}=r.target;d({...s,[t]:c})},G=r=>{const{value:t}=r.target;p(!1),d({...s,password:t,confirm_password:""});const c=/[A-Z]/.test(t),J=/[!@#$%^&*()]/.test(t);t.length<8||!c||!J?b(P=>({...P,password:"Password must be at least 8 characters long, include an uppercase letter and a symbol."})):b(P=>{const{password:se,...W}=P;return W})},H=()=>{U(!_)},O=()=>{M(!N)},C=s.role==="1",m=s.role==="2",g=s.prc_liscence_number.trim(),k=g.toUpperCase()==="N/A",S=m&&k;o.useEffect(()=>{d(r=>({...r,prc_liscence_number:"",validation_date:""}))},[s.role]);const T=async r=>{if(r.preventDefault(),w)return;v(!0);const t={};if(s.first_name||(t.first_name="First name is required."),s.last_name||(t.last_name="Last name is required."),s.email||(t.email="Email is required."),s.phone||(t.phone="Mobile number is required."),s.gender||(t.gender="Gender is required."),s.role||(t.role="Account type is required."),s.complete_address||(t.complete_address="Complete address is required."),s.username||(t.username="Username is required."),s.password||(t.password="Password is required."),s.confirm_password||(t.confirm_password="Confirm password is required."),s.password!==s.confirm_password&&(t.confirm_password="Passwords do not match."),s.last_school_att||(t.last_school_att="Last school or course attended is required."),m&&((!g||k)&&(t.prc_liscence_number="PRC License Number is required for Brokers and cannot be N/A."),g&&!k&&!s.validation_date&&(t.validation_date="Validity Date is required for Brokers with a valid PRC License Number.")),C&&g.length>4&&!s.validation_date&&(t.validation_date="Validity Date is required for Agents with a valid PRC License Number."),b(t),Object.keys(t).length>0){v(!1);return}try{await Q.post("register",s),A.fire({title:"Registration successful!",text:"Please wait for approval.",icon:"success",showConfirmButton:!1,showCloseButton:!0,timer:3e3,timerProgressBar:!0}).then(()=>y("/")),d({acct_number:V(),first_name:"",middle_name:"",last_name:"",extension_name:"",email:"",phone:"",gender:"",role:"",complete_address:"",username:"",password:"",confirm_password:"",prc_liscence_number:"",dhsud_registration_number:"",validation_date:"",last_school_att:""}),b({})}catch(c){console.error("Registration failed:",c),c.response&&c.response.data&&c.response.data.message==="Email already taken"?A.fire({title:"Email already taken!",text:"Please login instead.",icon:"warning",showConfirmButton:!0}).then(()=>{y("/user-register")}):A.fire({title:"Error or Email already taken!",text:"Please try again.",icon:"error",showConfirmButton:!1,showCloseButton:!0,timer:3e3,timerProgressBar:!0})}finally{v(!1),y("/user-register")}},z=()=>{const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()";let t="";for(let c=0;c<8;c++)t+=r.charAt(Math.floor(Math.random()*r.length));d({...s,password:t,confirm_password:t}),p(!0)};return e.jsxs("div",{className:"relative flex justify-center items-center min-h-screen bg-gradient-to-br from-blue-900 via-blue-400 to-blue-200 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-96 h-96 bg-blue-300 opacity-20 rounded-full blur-3xl -z-10 animate-pulse"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-purple-300 opacity-20 rounded-full blur-3xl -z-10 animate-pulse"}),e.jsxs("form",{onSubmit:T,className:"w-full max-w-6xl z-10",children:[e.jsx(X,{className:"flex justify-center items-start mb-4 text-white",children:e.jsx(Y,{className:"text-3xl font-bold",children:"Registration"})}),e.jsxs(ee,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("span",{className:"block text-lg font-bold mb-2 text-white",children:"Personal Details"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 md:grid-cols-2 text-white",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"first_name",children:"First name"})," ",e.jsx("span",{className:"text-red-500",children:"*"}),e.jsx(i,{type:"text",name:"first_name",className:"h-9 bg-white text-black",placeholder:"Enter your first name",onChange:l}),a.first_name&&e.jsx("span",{className:"text-red-400 text-sm",children:a.first_name})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"middle_name",children:"Middle name"}),e.jsx(i,{type:"text",name:"middle_name",className:"h-9 bg-white text-black",placeholder:"Enter your middle name",onChange:l})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"last_name",children:"Last name"})," ",e.jsx("span",{className:"text-red-500",children:"*"}),e.jsx(i,{type:"text",name:"last_name",className:"h-9 bg-white text-black",placeholder:"Enter your last name",onChange:l}),a.last_name&&e.jsx("span",{className:"text-red-400 text-sm",children:a.last_name})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"extension_name",children:"Extension name"})," ",e.jsx("span",{className:"md:text-[7px] md:font-bold",children:"(Jr, Sr. III)"}),e.jsx(i,{type:"text",name:"extension_name",className:"h-9 bg-white text-black",placeholder:"Enter your extension name",onChange:l})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("span",{className:"block text-white text-lg font-bold mb-2",children:"Contact Details"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 md:grid-cols-2 text-white",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"email",children:"Email"})," ",e.jsx("span",{className:"text-red-500",children:"*"}),e.jsx(i,{type:"email",name:"email",className:"h-9 bg-white text-black",placeholder:"Enter your email",onChange:l}),a.email&&e.jsx("span",{className:"text-red-400 text-sm",children:a.email})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"phone",children:"Mobile number"})," ",e.jsx("span",{className:"text-red-500",children:"*"}),e.jsx(i,{type:"text",name:"phone",className:"h-9 bg-white text-black",placeholder:"Enter mobile number",onChange:l}),a.phone&&e.jsx("span",{className:"text-red-400 text-sm",children:a.phone})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"gender",children:"Gender"})," ",e.jsx("span",{className:"text-red-500",children:"*"}),e.jsxs(D,{onValueChange:r=>d({...s,gender:r}),children:[e.jsx(B,{className:"h-9 bg-white/60 text-black",children:e.jsx(q,{placeholder:"Select gender"})}),e.jsxs(I,{children:[e.jsx(f,{value:"male",children:"Male"}),e.jsx(f,{value:"female",children:"Female"})]})]}),a.gender&&e.jsx("span",{className:"text-red-400 text-sm",children:a.gender})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"complete_address",children:"Complete address"})," ",e.jsx("span",{className:"text-red-500",children:"*"}),e.jsx(i,{type:"text",name:"complete_address",className:"h-9 bg-white text-black",placeholder:"Enter complete address",onChange:l}),a.complete_address&&e.jsx("span",{className:"text-red-400 text-sm",children:a.complete_address})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("span",{className:"block text-lg font-bold mb-2 text-white",children:"Account Details"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 md:grid-cols-2 text-white",children:[e.jsxs("div",{className:"hidden",children:[e.jsx(n,{htmlFor:"acct_number",children:"Account number"}),e.jsx(i,{type:"text",name:"acct_number",className:"h-9 bg-white text-black",value:h,readOnly:!0})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"username",children:"Username"})," ",e.jsx("span",{className:"text-red-500",children:"*"}),e.jsx(i,{type:"text",name:"username",className:"h-9 bg-white text-black",placeholder:"Enter username",onChange:l}),e.jsx("p",{className:"text-xs text-white",children:"Username must not be the same as your email."}),a.username&&e.jsx("span",{className:"text-red-400 text-sm",children:a.username})]}),e.jsxs("div",{className:"mt-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(n,{htmlFor:"password",children:["Password ",e.jsx("span",{className:"text-red-500",children:"*"})," "]}),e.jsx("button",{type:"button",className:"text-blue-900 text-sm hover:underline md:text-[10px]",onClick:z,children:"Generate Password?"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(i,{type:_?"text":"password",name:"password",className:"h-9 bg-white pr-10 text-black",placeholder:"Password",value:s.password,onChange:G}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 flex items-center px-3",onClick:H,children:e.jsx(j,{icon:_?E:F,className:"text-gray-500"})})]}),a.password&&e.jsx("span",{className:"text-red-600 text-xs font-bold",children:a.password})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"confirm_password",children:"Confirm Password"})," ",e.jsx("span",{className:"text-red-500",children:"*"}),e.jsxs("div",{className:"relative",children:[e.jsx(i,{type:N?"text":"password",name:"confirm_password",className:"h-9 bg-white pr-10 text-black",placeholder:"Confirm Password",value:s.confirm_password,onChange:l,readOnly:u}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 flex items-center px-3",onClick:O,children:e.jsx(j,{icon:N?E:F,className:"text-gray-500"})})]}),a.confirm_password&&e.jsx("span",{className:"text-red-600 text-xs font-bold",children:a.confirm_password})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("span",{className:"block text-lg font-bold mb-2 text-white",children:"Identity Details"}),e.jsxs("div",{className:"grid grid-cols-5 gap-4 w-full md:grid-cols-2 text-white",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"type",children:"Type"})," ",e.jsx("span",{className:"text-red-500",children:"*"}),e.jsxs(D,{onValueChange:r=>{d({...s,role:r,validation_date:""})},value:s.role,children:[e.jsx(B,{className:"h-9 bg-white/60 text-black",children:e.jsx(q,{placeholder:"Select Agent or Broker"})}),e.jsxs(I,{children:[e.jsx(f,{value:"1",children:"Agent"}),e.jsx(f,{value:"2",children:"Broker"})]})]}),a.role&&e.jsx("span",{className:"text-red-400 text-sm",children:a.role})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"prc_liscence_number",children:"PRC License Number"}),e.jsxs("div",{className:"relative flex items-center",children:[e.jsx(i,{type:"text",name:"prc_liscence_number",className:"h-9 bg-white pr-16 text-black/50",placeholder:"Enter PRC License No: or type/select N/A",value:s.prc_liscence_number,onChange:l,autoComplete:"off"}),e.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2",children:e.jsx("button",{type:"button",className:`bg-blue-500 rounded px-2 py-1 text-xs text-white hover:bg-blue-400 transition ${m?"opacity-50 cursor-not-allowed":""}`,onClick:()=>!m&&l({target:{name:"prc_liscence_number",value:"N/A"}}),tabIndex:-1,disabled:m,children:"N/A"})})]}),!(S||a.prc_liscence_number)&&e.jsxs("p",{className:"text-[10px] 9",children:["If no PRC License Number, type or click ",e.jsx("b",{children:"N/A"})," or leave blank."]}),S&&e.jsx("span",{className:"text-red-500 text-xs font-bold",children:"Please input a valid PRC License Number."}),a.prc_liscence_number&&e.jsx("span",{className:"text-red-500 text-sm",children:a.prc_liscence_number})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"dhsud_registration_number",className:"md:text-[9px] md:font-bold text-xs",children:"DHSUD Registration Number"}),e.jsxs("div",{className:"relative flex items-center",children:[e.jsx(i,{type:"text",name:"dhsud_registration_number",className:"h-9 bg-white pr-16 text-black/50",placeholder:"Enter DHSUD Registration No:",value:s.dhsud_registration_number,onChange:l,autoComplete:"off"}),e.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2",children:e.jsx("button",{type:"button",className:"bg-blue-500 rounded px-2 py-1 text-xs text-white hover:bg-blue-400 transition",onClick:()=>l({target:{name:"dhsud_registration_number",value:"N/A"}}),tabIndex:-1,children:"N/A"})})]}),e.jsxs("p",{className:"text-[10px] 9",children:["If no DHSUD Registration Number, type or click ",e.jsx("b",{children:"N/A"})," or leave blank."]}),a.dhsud_registration_number&&e.jsx("span",{className:"text-red-500 text-sm",children:a.dhsud_registration_number})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"validation_date",children:"Validity Date"}),e.jsx(i,{type:"date",name:"validation_date",className:"h-9 bg-white w-full text-black",onChange:r=>{l({target:{name:"validation_date",value:r.target.value}})},value:s.validation_date,disabled:!s.role||C&&(s.prc_liscence_number.trim().length<4||s.prc_liscence_number.trim().toUpperCase()==="N/A")||m&&(s.prc_liscence_number.trim()===""||s.prc_liscence_number.trim().toUpperCase()==="N/A"),required:C&&s.prc_liscence_number.trim().length>=4&&s.prc_liscence_number.trim().toUpperCase()!=="N/A"||m&&s.prc_liscence_number.trim()!==""&&s.prc_liscence_number.trim().toUpperCase()!=="N/A"}),a.validation_date&&e.jsx("span",{className:"text-red-500 text-sm",children:a.validation_date})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"last_school_att",className:"text-[11px] font-bold",children:"School or Course attended"})," ",e.jsx("span",{className:"text-red-500 ",children:"*"}),e.jsx(i,{type:"text",name:"last_school_att",className:"h-9 bg-white text-black",placeholder:"Enter Last School or Course attended",onChange:l}),a.last_school_att&&e.jsx("span",{className:"text-red-500 text-sm",children:a.last_school_att})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-6",children:[e.jsx(R,{to:"/user-login",children:e.jsxs(L,{className:"bg-red-500 hover:bg-red-600",children:[e.jsx(j,{icon:$}),"Back"]})}),e.jsx(L,{type:"submit",className:"bg-green-600 hover:bg-green-700",disabled:w,children:w?e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Registering..."}),e.jsx("span",{className:"animate-spin border-2 border-white border-t-transparent rounded-full w-4 h-4"})]}):e.jsxs(e.Fragment,{children:["Register now",e.jsx(j,{icon:K})]})})]}),e.jsxs("div",{className:"flex justify-center space-x-2 mt-4",children:[e.jsx("span",{className:"text-white",children:"Already have an account?"}),e.jsx(R,{to:"/user-login",className:"text-primary",children:"Login here"})]})]})]})]})}export{ie as default};
