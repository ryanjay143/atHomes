import{r as i,j as t,c as W,h as vt,i as bt,k as F,l as yt,m as S,n as B,o as Ne,p as Pt,q as Et,s as Ct,t as wt,v as jt,w as Nt,x as At,y as Rt,z as Ot,A as re,C as St,D as Tt,P as Ae,E as _t,G as Ft,H as Dt,I as It,J as Lt,K as kt,M as Mt,N as $t,O as Ht,u as Ut,L as G,F as Z,Q as Bt,T as Wt,U as zt,V as Kt,S as Vt}from"./index-BwIRozVU.js";/* empty css              */import{c as A,C as R,a as O,b as q,d as k}from"./card-BulVOlky.js";import{C as Re}from"./react-apexcharts.min-RloC_oKV.js";import{T as Xt,a as Yt,b as Q,c as U,d as Jt,e as L}from"./table-Cnx-iMhC.js";const Gt=()=>{const[e,n]=i.useState(!1),[r,s]=i.useState(Array(12).fill(0)),o=async()=>{try{const c=(await W.get("sales-encoding",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("access_token")}`}})).data.salesEncoding.map(d=>({...d,amount:typeof d.amount=="number"?d.amount:parseFloat(d.amount)})),f=Array(12).fill(0);c.forEach(d=>{const u=new Date(d.date_on_sale).getMonth();f[u]+=d.amount}),s(f)}catch(l){console.error("Error fetching data:",l)}};i.useEffect(()=>{o()},[]);const a={series:[{name:"Sales",data:r}],options:{chart:{type:"line",height:350},xaxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},stroke:{curve:"smooth"},title:{text:"Sales from January to December",align:"left"},tooltip:{y:{formatter:l=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(l)}}}};return i.useEffect(()=>{n(!0)},[]),t.jsx(t.Fragment,{children:t.jsxs(A,{className:"fade-in-left w-full md:w-full bg-[#eff6ff] border-b-4 border-primary",children:[t.jsx(R,{children:t.jsx(O,{className:"text-[#172554]",children:"Overall Sales"})}),t.jsx(q,{children:e&&t.jsx(Re,{options:a.options,series:a.series,type:"line",height:350})})]})})},Zt=()=>{const[e,n]=i.useState(!1),[r,s]=i.useState({series:[{name:"Total Reservation",data:[]}],options:{chart:{type:"bar",height:350},xaxis:{categories:[]},title:{text:"Top Reservation Housing of this Month",align:"left"}}});return i.useEffect(()=>{n(!0),W.get("sales-encoding",{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}}).then(o=>{const a=o.data.salesdashboard,l=a.map(f=>f.category),c=a.map(f=>f.totalReserved);s({series:[{name:"Total Reservation",data:c}],options:{...r.options,xaxis:{categories:l}}})}).catch(o=>{console.error("Error fetching data:",o)})},[]),t.jsx(t.Fragment,{children:t.jsxs(A,{className:"fade-in-right w-full md:w-full bg-[#eff6ff] border-b-4 border-primary",children:[t.jsx(R,{children:t.jsx(O,{className:"text-[#172554]",children:"Top Housing Category"})}),t.jsx(q,{children:e&&t.jsx(Re,{options:r.options,series:r.series,type:"bar",height:350})})]})})};function qt(){const[e,n]=i.useState([]),r=async()=>{try{const o=await W.get("sales-encoding",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("access_token")}`}});n(o.data.topPerformers)}catch(o){console.error("Error fetching data:",o)}};i.useEffect(()=>{r()},[]);const s=new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"});return t.jsx(t.Fragment,{children:t.jsxs(A,{className:"fade-in-left w-full md:w-full bg-[#eff6ff] border-b-4 border-primary ",children:[t.jsxs(R,{children:[t.jsx(O,{children:"Top Performers"}),t.jsx(k,{children:"of this month"})]}),t.jsx(q,{children:t.jsxs(Xt,{children:[t.jsx(Yt,{children:t.jsxs(Q,{children:[t.jsx(U,{children:"Rank"}),t.jsx(U,{children:"Affiliated"}),t.jsx(U,{children:"Role"}),t.jsx(U,{children:"Total Reserved"}),t.jsx(U,{children:"Total Sales"})]})}),t.jsxs(Jt,{children:[e.length===0&&t.jsx(Q,{children:t.jsx(L,{className:"text-center border",colSpan:5,children:"No data available."})}),e.map((o,a)=>t.jsxs(Q,{children:[t.jsx(L,{className:"font-medium border border-[#bfdbfe]",children:a+1}),t.jsxs(L,{className:"font-medium border border-[#bfdbfe]",children:[o.first_name," ",o.middle_name," ",o.last_name," ",o.extension_name]}),t.jsx(L,{className:"text-right border border-[#bfdbfe]",children:o.role}),t.jsx(L,{className:"text-right border border-[#bfdbfe]",children:o.totalReserved}),t.jsx(L,{className:"text-right border border-[#bfdbfe]",children:s.format(o.totalSales)})]},o.id))]})]})})]})})}var oe=i.forwardRef((e,n)=>{const{children:r,...s}=e,o=i.Children.toArray(r),a=o.find(er);if(a){const l=a.props.children,c=o.map(f=>f===a?i.Children.count(l)>1?i.Children.only(null):i.isValidElement(l)?l.props.children:null:f);return t.jsx(ne,{...s,ref:n,children:i.isValidElement(l)?i.cloneElement(l,void 0,c):null})}return t.jsx(ne,{...s,ref:n,children:r})});oe.displayName="Slot";var ne=i.forwardRef((e,n)=>{const{children:r,...s}=e;if(i.isValidElement(r)){const o=rr(r),a=tr(s,r.props);return r.type!==i.Fragment&&(a.ref=n?vt(n,o):o),i.cloneElement(r,a)}return i.Children.count(r)>1?i.Children.only(null):null});ne.displayName="SlotClone";var Qt=({children:e})=>t.jsx(t.Fragment,{children:e});function er(e){return i.isValidElement(e)&&e.type===Qt}function tr(e,n){const r={...n};for(const s in n){const o=e[s],a=n[s];/^on[A-Z]/.test(s)?o&&a?r[s]=(...c)=>{a(...c),o(...c)}:o&&(r[s]=o):s==="style"?r[s]={...o,...a}:s==="className"&&(r[s]=[o,a].filter(Boolean).join(" "))}return{...e,...r}}function rr(e){var s,o;let n=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,r=n&&"isReactWarning"in n&&n.isReactWarning;return r?e.ref:(n=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,r=n&&"isReactWarning"in n&&n.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var nr=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],j=nr.reduce((e,n)=>{const r=i.forwardRef((s,o)=>{const{asChild:a,...l}=s,c=a?oe:n;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),t.jsx(c,{...l,ref:o})});return r.displayName=`Primitive.${n}`,{...e,[n]:r}},{});function sr(e,n){e&&bt.flushSync(()=>e.dispatchEvent(n))}var or="DismissableLayer",se="dismissableLayer.update",ar="dismissableLayer.pointerDownOutside",ir="dismissableLayer.focusOutside",ye,Oe=i.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Se=i.forwardRef((e,n)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:a,onInteractOutside:l,onDismiss:c,...f}=e,d=i.useContext(Oe),[u,v]=i.useState(null),m=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=i.useState({}),C=F(n,x=>v(x)),p=Array.from(d.layers),[E]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),h=p.indexOf(E),y=u?p.indexOf(u):-1,P=d.layersWithOutsidePointerEventsDisabled.size>0,b=y>=h,D=dr(x=>{const _=x.target,K=[...d.branches].some($=>$.contains(_));!b||K||(o==null||o(x),l==null||l(x),x.defaultPrevented||c==null||c())},m),w=ur(x=>{const _=x.target;[...d.branches].some($=>$.contains(_))||(a==null||a(x),l==null||l(x),x.defaultPrevented||c==null||c())},m);return yt(x=>{y===d.layers.size-1&&(s==null||s(x),!x.defaultPrevented&&c&&(x.preventDefault(),c()))},m),i.useEffect(()=>{if(u)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(ye=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),Pe(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=ye)}},[u,m,r,d]),i.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),Pe())},[u,d]),i.useEffect(()=>{const x=()=>g({});return document.addEventListener(se,x),()=>document.removeEventListener(se,x)},[]),t.jsx(j.div,{...f,ref:C,style:{pointerEvents:P?b?"auto":"none":void 0,...e.style},onFocusCapture:S(e.onFocusCapture,w.onFocusCapture),onBlurCapture:S(e.onBlurCapture,w.onBlurCapture),onPointerDownCapture:S(e.onPointerDownCapture,D.onPointerDownCapture)})});Se.displayName=or;var cr="DismissableLayerBranch",lr=i.forwardRef((e,n)=>{const r=i.useContext(Oe),s=i.useRef(null),o=F(n,s);return i.useEffect(()=>{const a=s.current;if(a)return r.branches.add(a),()=>{r.branches.delete(a)}},[r.branches]),t.jsx(j.div,{...e,ref:o})});lr.displayName=cr;function dr(e,n=globalThis==null?void 0:globalThis.document){const r=B(e),s=i.useRef(!1),o=i.useRef(()=>{});return i.useEffect(()=>{const a=c=>{if(c.target&&!s.current){let f=function(){Te(ar,r,d,{discrete:!0})};const d={originalEvent:c};c.pointerType==="touch"?(n.removeEventListener("click",o.current),o.current=f,n.addEventListener("click",o.current,{once:!0})):f()}else n.removeEventListener("click",o.current);s.current=!1},l=window.setTimeout(()=>{n.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(l),n.removeEventListener("pointerdown",a),n.removeEventListener("click",o.current)}},[n,r]),{onPointerDownCapture:()=>s.current=!0}}function ur(e,n=globalThis==null?void 0:globalThis.document){const r=B(e),s=i.useRef(!1);return i.useEffect(()=>{const o=a=>{a.target&&!s.current&&Te(ir,r,{originalEvent:a},{discrete:!1})};return n.addEventListener("focusin",o),()=>n.removeEventListener("focusin",o)},[n,r]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function Pe(){const e=new CustomEvent(se);document.dispatchEvent(e)}function Te(e,n,r,{discrete:s}){const o=r.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});n&&o.addEventListener(e,n,{once:!0}),s?sr(o,a):o.dispatchEvent(a)}var ee="focusScope.autoFocusOnMount",te="focusScope.autoFocusOnUnmount",Ee={bubbles:!1,cancelable:!0},fr="FocusScope",_e=i.forwardRef((e,n)=>{const{loop:r=!1,trapped:s=!1,onMountAutoFocus:o,onUnmountAutoFocus:a,...l}=e,[c,f]=i.useState(null),d=B(o),u=B(a),v=i.useRef(null),m=F(n,p=>f(p)),g=i.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;i.useEffect(()=>{if(s){let p=function(P){if(g.paused||!c)return;const b=P.target;c.contains(b)?v.current=b:N(v.current,{select:!0})},E=function(P){if(g.paused||!c)return;const b=P.relatedTarget;b!==null&&(c.contains(b)||N(v.current,{select:!0}))},h=function(P){if(document.activeElement===document.body)for(const D of P)D.removedNodes.length>0&&N(c)};document.addEventListener("focusin",p),document.addEventListener("focusout",E);const y=new MutationObserver(h);return c&&y.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",E),y.disconnect()}}},[s,c,g.paused]),i.useEffect(()=>{if(c){we.add(g);const p=document.activeElement;if(!c.contains(p)){const h=new CustomEvent(ee,Ee);c.addEventListener(ee,d),c.dispatchEvent(h),h.defaultPrevented||(pr(vr(Fe(c)),{select:!0}),document.activeElement===p&&N(c))}return()=>{c.removeEventListener(ee,d),setTimeout(()=>{const h=new CustomEvent(te,Ee);c.addEventListener(te,u),c.dispatchEvent(h),h.defaultPrevented||N(p??document.body,{select:!0}),c.removeEventListener(te,u),we.remove(g)},0)}}},[c,d,u,g]);const C=i.useCallback(p=>{if(!r&&!s||g.paused)return;const E=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,h=document.activeElement;if(E&&h){const y=p.currentTarget,[P,b]=mr(y);P&&b?!p.shiftKey&&h===b?(p.preventDefault(),r&&N(P,{select:!0})):p.shiftKey&&h===P&&(p.preventDefault(),r&&N(b,{select:!0})):h===y&&p.preventDefault()}},[r,s,g.paused]);return t.jsx(j.div,{tabIndex:-1,...l,ref:m,onKeyDown:C})});_e.displayName=fr;function pr(e,{select:n=!1}={}){const r=document.activeElement;for(const s of e)if(N(s,{select:n}),document.activeElement!==r)return}function mr(e){const n=Fe(e),r=Ce(n,e),s=Ce(n.reverse(),e);return[r,s]}function Fe(e){const n=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const o=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||o?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)n.push(r.currentNode);return n}function Ce(e,n){for(const r of e)if(!hr(r,{upTo:n}))return r}function hr(e,{upTo:n}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(n!==void 0&&e===n)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function xr(e){return e instanceof HTMLInputElement&&"select"in e}function N(e,{select:n=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&xr(e)&&n&&e.select()}}var we=gr();function gr(){let e=[];return{add(n){const r=e[0];n!==r&&(r==null||r.pause()),e=je(e,n),e.unshift(n)},remove(n){var r;e=je(e,n),(r=e[0])==null||r.resume()}}}function je(e,n){const r=[...e],s=r.indexOf(n);return s!==-1&&r.splice(s,1),r}function vr(e){return e.filter(n=>n.tagName!=="A")}var br="Arrow",De=i.forwardRef((e,n)=>{const{children:r,width:s=10,height:o=5,...a}=e;return t.jsx(j.svg,{...a,ref:n,width:s,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:t.jsx("polygon",{points:"0,0 30,0 15,10"})})});De.displayName=br;var yr=De,ae="Popper",[Ie,Le]=Ne(ae),[Pr,ke]=Ie(ae),Me=e=>{const{__scopePopper:n,children:r}=e,[s,o]=i.useState(null);return t.jsx(Pr,{scope:n,anchor:s,onAnchorChange:o,children:r})};Me.displayName=ae;var $e="PopperAnchor",He=i.forwardRef((e,n)=>{const{__scopePopper:r,virtualRef:s,...o}=e,a=ke($e,r),l=i.useRef(null),c=F(n,l);return i.useEffect(()=>{a.onAnchorChange((s==null?void 0:s.current)||l.current)}),s?null:t.jsx(j.div,{...o,ref:c})});He.displayName=$e;var ie="PopperContent",[Er,Cr]=Ie(ie),Ue=i.forwardRef((e,n)=>{var pe,me,he,xe,ge,ve;const{__scopePopper:r,side:s="bottom",sideOffset:o=0,align:a="center",alignOffset:l=0,arrowPadding:c=0,avoidCollisions:f=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:v="partial",hideWhenDetached:m=!1,updatePositionStrategy:g="optimized",onPlaced:C,...p}=e,E=ke(ie,r),[h,y]=i.useState(null),P=F(n,H=>y(H)),[b,D]=i.useState(null),w=Pt(b),x=(w==null?void 0:w.width)??0,_=(w==null?void 0:w.height)??0,K=s+(a!=="center"?"-"+a:""),$=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},de=Array.isArray(d)?d:[d],ot=de.length>0,V={padding:$,boundary:de.filter(jr),altBoundary:ot},{refs:at,floatingStyles:ue,placement:it,isPositioned:X,middlewareData:I}=Et({strategy:"fixed",placement:K,whileElementsMounted:(...H)=>Ct(...H,{animationFrame:g==="always"}),elements:{reference:E.anchor},middleware:[wt({mainAxis:o+_,alignmentAxis:l}),f&&jt({mainAxis:!0,crossAxis:!1,limiter:v==="partial"?St():void 0,...V}),f&&Nt({...V}),At({...V,apply:({elements:H,rects:be,availableWidth:mt,availableHeight:ht})=>{const{width:xt,height:gt}=be.reference,J=H.floating.style;J.setProperty("--radix-popper-available-width",`${mt}px`),J.setProperty("--radix-popper-available-height",`${ht}px`),J.setProperty("--radix-popper-anchor-width",`${xt}px`),J.setProperty("--radix-popper-anchor-height",`${gt}px`)}}),b&&Rt({element:b,padding:c}),Nr({arrowWidth:x,arrowHeight:_}),m&&Ot({strategy:"referenceHidden",...V})]}),[fe,ct]=ze(it),Y=B(C);re(()=>{X&&(Y==null||Y())},[X,Y]);const lt=(pe=I.arrow)==null?void 0:pe.x,dt=(me=I.arrow)==null?void 0:me.y,ut=((he=I.arrow)==null?void 0:he.centerOffset)!==0,[ft,pt]=i.useState();return re(()=>{h&&pt(window.getComputedStyle(h).zIndex)},[h]),t.jsx("div",{ref:at.setFloating,"data-radix-popper-content-wrapper":"",style:{...ue,transform:X?ue.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ft,"--radix-popper-transform-origin":[(xe=I.transformOrigin)==null?void 0:xe.x,(ge=I.transformOrigin)==null?void 0:ge.y].join(" "),...((ve=I.hide)==null?void 0:ve.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:t.jsx(Er,{scope:r,placedSide:fe,onArrowChange:D,arrowX:lt,arrowY:dt,shouldHideArrow:ut,children:t.jsx(j.div,{"data-side":fe,"data-align":ct,...p,ref:P,style:{...p.style,animation:X?void 0:"none"}})})})});Ue.displayName=ie;var Be="PopperArrow",wr={top:"bottom",right:"left",bottom:"top",left:"right"},We=i.forwardRef(function(n,r){const{__scopePopper:s,...o}=n,a=Cr(Be,s),l=wr[a.placedSide];return t.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:t.jsx(yr,{...o,ref:r,style:{...o.style,display:"block"}})})});We.displayName=Be;function jr(e){return e!==null}var Nr=e=>({name:"transformOrigin",options:e,fn(n){var E,h,y;const{placement:r,rects:s,middlewareData:o}=n,l=((E=o.arrow)==null?void 0:E.centerOffset)!==0,c=l?0:e.arrowWidth,f=l?0:e.arrowHeight,[d,u]=ze(r),v={start:"0%",center:"50%",end:"100%"}[u],m=(((h=o.arrow)==null?void 0:h.x)??0)+c/2,g=(((y=o.arrow)==null?void 0:y.y)??0)+f/2;let C="",p="";return d==="bottom"?(C=l?v:`${m}px`,p=`${-f}px`):d==="top"?(C=l?v:`${m}px`,p=`${s.floating.height+f}px`):d==="right"?(C=`${-f}px`,p=l?v:`${g}px`):d==="left"&&(C=`${s.floating.width+f}px`,p=l?v:`${g}px`),{data:{x:C,y:p}}}});function ze(e){const[n,r="center"]=e.split("-");return[n,r]}var Ar=Me,Ke=He,Rr=Ue,Or=We,Sr="Portal",Ve=i.forwardRef((e,n)=>{var c;const{container:r,...s}=e,[o,a]=i.useState(!1);re(()=>a(!0),[]);const l=r||o&&((c=globalThis==null?void 0:globalThis.document)==null?void 0:c.body);return l?Tt.createPortal(t.jsx(j.div,{...s,ref:n}),l):null});Ve.displayName=Sr;var ce="Popover",[Xe,Qr]=Ne(ce,[Le]),z=Le(),[Tr,T]=Xe(ce),Ye=e=>{const{__scopePopover:n,children:r,open:s,defaultOpen:o,onOpenChange:a,modal:l=!1}=e,c=z(n),f=i.useRef(null),[d,u]=i.useState(!1),[v=!1,m]=It({prop:s,defaultProp:o,onChange:a});return t.jsx(Ar,{...c,children:t.jsx(Tr,{scope:n,contentId:Lt(),triggerRef:f,open:v,onOpenChange:m,onOpenToggle:i.useCallback(()=>m(g=>!g),[m]),hasCustomAnchor:d,onCustomAnchorAdd:i.useCallback(()=>u(!0),[]),onCustomAnchorRemove:i.useCallback(()=>u(!1),[]),modal:l,children:r})})};Ye.displayName=ce;var Je="PopoverAnchor",_r=i.forwardRef((e,n)=>{const{__scopePopover:r,...s}=e,o=T(Je,r),a=z(r),{onCustomAnchorAdd:l,onCustomAnchorRemove:c}=o;return i.useEffect(()=>(l(),()=>c()),[l,c]),t.jsx(Ke,{...a,...s,ref:n})});_r.displayName=Je;var Ge="PopoverTrigger",Ze=i.forwardRef((e,n)=>{const{__scopePopover:r,...s}=e,o=T(Ge,r),a=z(r),l=F(n,o.triggerRef),c=t.jsx(j.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":rt(o.open),...s,ref:l,onClick:S(e.onClick,o.onOpenToggle)});return o.hasCustomAnchor?c:t.jsx(Ke,{asChild:!0,...a,children:c})});Ze.displayName=Ge;var le="PopoverPortal",[Fr,Dr]=Xe(le,{forceMount:void 0}),qe=e=>{const{__scopePopover:n,forceMount:r,children:s,container:o}=e,a=T(le,n);return t.jsx(Fr,{scope:n,forceMount:r,children:t.jsx(Ae,{present:r||a.open,children:t.jsx(Ve,{asChild:!0,container:o,children:s})})})};qe.displayName=le;var M="PopoverContent",Qe=i.forwardRef((e,n)=>{const r=Dr(M,e.__scopePopover),{forceMount:s=r.forceMount,...o}=e,a=T(M,e.__scopePopover);return t.jsx(Ae,{present:s||a.open,children:a.modal?t.jsx(Ir,{...o,ref:n}):t.jsx(Lr,{...o,ref:n})})});Qe.displayName=M;var Ir=i.forwardRef((e,n)=>{const r=T(M,e.__scopePopover),s=i.useRef(null),o=F(n,s),a=i.useRef(!1);return i.useEffect(()=>{const l=s.current;if(l)return _t(l)},[]),t.jsx(Ft,{as:oe,allowPinchZoom:!0,children:t.jsx(et,{...e,ref:o,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:S(e.onCloseAutoFocus,l=>{var c;l.preventDefault(),a.current||(c=r.triggerRef.current)==null||c.focus()}),onPointerDownOutside:S(e.onPointerDownOutside,l=>{const c=l.detail.originalEvent,f=c.button===0&&c.ctrlKey===!0,d=c.button===2||f;a.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:S(e.onFocusOutside,l=>l.preventDefault(),{checkForDefaultPrevented:!1})})})}),Lr=i.forwardRef((e,n)=>{const r=T(M,e.__scopePopover),s=i.useRef(!1),o=i.useRef(!1);return t.jsx(et,{...e,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var l,c;(l=e.onCloseAutoFocus)==null||l.call(e,a),a.defaultPrevented||(s.current||(c=r.triggerRef.current)==null||c.focus(),a.preventDefault()),s.current=!1,o.current=!1},onInteractOutside:a=>{var f,d;(f=e.onInteractOutside)==null||f.call(e,a),a.defaultPrevented||(s.current=!0,a.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const l=a.target;((d=r.triggerRef.current)==null?void 0:d.contains(l))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&o.current&&a.preventDefault()}})}),et=i.forwardRef((e,n)=>{const{__scopePopover:r,trapFocus:s,onOpenAutoFocus:o,onCloseAutoFocus:a,disableOutsidePointerEvents:l,onEscapeKeyDown:c,onPointerDownOutside:f,onFocusOutside:d,onInteractOutside:u,...v}=e,m=T(M,r),g=z(r);return Dt(),t.jsx(_e,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:o,onUnmountAutoFocus:a,children:t.jsx(Se,{asChild:!0,disableOutsidePointerEvents:l,onInteractOutside:u,onEscapeKeyDown:c,onPointerDownOutside:f,onFocusOutside:d,onDismiss:()=>m.onOpenChange(!1),children:t.jsx(Rr,{"data-state":rt(m.open),role:"dialog",id:m.contentId,...g,...v,ref:n,style:{...v.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),tt="PopoverClose",kr=i.forwardRef((e,n)=>{const{__scopePopover:r,...s}=e,o=T(tt,r);return t.jsx(j.button,{type:"button",...s,ref:n,onClick:S(e.onClick,()=>o.onOpenChange(!1))})});kr.displayName=tt;var Mr="PopoverArrow",$r=i.forwardRef((e,n)=>{const{__scopePopover:r,...s}=e,o=z(r);return t.jsx(Or,{...o,...s,ref:n})});$r.displayName=Mr;function rt(e){return e?"open":"closed"}var Hr=Ye,Ur=Ze,Br=qe,nt=Qe;const Wr=Hr,zr=Ur,st=i.forwardRef(({className:e,align:n="center",sideOffset:r=4,...s},o)=>t.jsx(Br,{children:t.jsx(nt,{ref:o,align:n,sideOffset:r,className:kt("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})}));st.displayName=nt.displayName;function Kr(e){if(e>=1e6)return(e/1e6).toFixed(2).replace(/\.00$/,"")+"M";if(e>=1e3){let n=e/1e3;return(n%1===0?n.toFixed(0):n.toFixed(2).replace(/\.?0+$/,""))+"K"}else return e.toString()}function Vr(){const[e,n]=i.useState([]),r=async()=>{try{const s=await W.get("sales-encoding",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("access_token")}`}});n(s.data.topPerformers)}catch(s){console.error("Error fetching data:",s)}};return i.useEffect(()=>{r()},[]),t.jsxs(A,{className:"fade-in-right w-full md:w-full bg-[#eff6ff] border-b-4 border-primary",children:[t.jsxs(R,{className:"text-center",children:[t.jsx(O,{children:"Top 10 Agents"}),t.jsx(k,{children:"of the month"})]}),t.jsx(q,{children:t.jsx("div",{className:"grid grid-cols-5 md:grid-cols-3 gap-4 h-56 overflow-auto",children:e.map((s,o)=>t.jsxs("div",{className:"relative flex flex-col items-center",children:[t.jsx("div",{className:"absolute top-0 left-3 bg-[#172554] rounded-full z-50 px-2 py-1 text-[#eff6ff]",children:o+1}),t.jsxs(Wr,{children:[t.jsx(zr,{asChild:!0,children:t.jsxs(Mt,{className:"h-12 w-12 md:h-12 md:w-12 border-primary border-4",children:[s.profile_pic?t.jsx($t,{src:`https://athomes.site/${s.profile_pic}`,alt:`${s.first_name} ${s.last_name}`,className:"rounded-full border border-border object-cover"}):null,t.jsx(Ht,{className:"font-bold text-2xl bg-[#172554] text-[#eff6ff] ",children:s.first_name?s.first_name.charAt(0).toUpperCase():"U"})]})}),t.jsx(st,{className:"p-4 bg-white shadow-lg rounded-lg",children:t.jsxs("div",{className:"text-center",children:[t.jsxs("p",{className:"font-semibold",children:[s.first_name," ",s.last_name]}),t.jsx("p",{className:"text-sm text-muted-foreground",children:s.email||""})]})})]}),t.jsxs("div",{className:"text-center mt-2",children:[t.jsxs("p",{className:"text-sm font-bold",children:[s.first_name," ",s.last_name]}),t.jsx("p",{className:"text-sm",children:Kr(Number(s.totalSales))})]})]},s.id||o))})})]})}function Xr(){const[e,n]=i.useState(0),[r,s]=i.useState(0),[o,a]=i.useState(0),[l,c]=i.useState(0),f=Ut(),d=async()=>{try{const u=await W.get("agent-broker",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("access_token")}`}});n(u.data.agentsListCount||0),s(u.data.pendingAgentsCount||0),a(u.data.agentsLicensedCount||0),c(u.data.agentsUnlicensedCount||0)}catch(u){console.error("Error fetching members:",u),Vt.fire({icon:"error",title:"Error",text:"Failed to fetch data. Please login again.",confirmButtonText:"OK"}),localStorage.clear(),console.clear(),f("/")}};return i.useEffect(()=>{d()},[]),t.jsxs("div",{className:"ml-72 md:ml-0 grid grid-cols-4 md:grid-cols-1 md:gap-2 md:p-5 md:mt-0 gap-2 items-start justify-center mt-5 md:px-5 mr-2",children:[t.jsx(G,{to:"/admin/affialiated",className:"block",children:t.jsx(A,{className:"fade-in-left w-full md:w-full bg-[#eff6ff] border-b-4 border-primary",children:t.jsxs(R,{children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(O,{className:"text-3xl font-bold text-primary animate-bounce",children:e}),t.jsx(Z,{icon:Bt,className:"ml-2 h-10 text-blue-300"})]}),t.jsx(k,{className:"font-bold text-primary md:text-xs",children:"Total Broker/Agents"})]})})}),t.jsx(G,{to:"/admin/affialiated/pendingRegister",className:"block",children:t.jsx(A,{className:"fade-in-left w-full md:w-full bg-[#eff6ff] border-b-4 border-primary",children:t.jsxs(R,{children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(O,{className:"text-3xl font-bold text-black animate-bounce",children:r}),t.jsx(Z,{icon:Wt,className:"ml-2 h-10 text-[#3f3f46]"})]}),t.jsx(k,{className:"font-bold text-black md:text-xs",children:"Pending Register"})]})})}),t.jsx(G,{to:"/admin/affialiated/licensed",className:"block",children:t.jsx(A,{className:"fade-in-left w-full md:w-full bg-[#eff6ff] border-b-4 border-primary",children:t.jsxs(R,{children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(O,{className:"text-3xl font-bold text-green-500 animate-bounce",children:o}),t.jsx(Z,{icon:zt,className:"ml-2 h-10 text-green-200"})]}),t.jsx(k,{className:"font-bold text-green-500 md:text-xs",children:"Total Licensed Affialiated"})]})})}),t.jsx(G,{to:"/admin/affialiated/unlicensed",className:"block",children:t.jsx(A,{className:"fade-in-left w-full md:w-full bg-[#eff6ff] border-b-4 border-primary",children:t.jsxs(R,{children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(O,{className:"text-3xl font-bold text-red-500 animate-bounce",children:l}),t.jsx(Z,{icon:Kt,className:"ml-2 h-10 text-red-200"})]}),t.jsx(k,{className:"font-bold text-red-500 md:text-xs",children:"Total Unlicensed Affialiated"})]})})})]})}function en(){return t.jsxs("div",{className:"py-5 md:pt-20",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-4xl font-bold ml-72 md:ml-0 md:grid-cols-1 md:gap-2 md:p-5 md:mt-0 md:text-2xl",children:"Dashboard"}),t.jsx(Xr,{})]}),t.jsxs("div",{className:"ml-72 md:ml-0 grid grid-cols-2 md:grid-cols-1 md:gap-2 md:p-5 md:mt-0 gap-2 items-start justify-center mt-5 md:px-5 mr-2",children:[t.jsx(Gt,{}),t.jsx(Zt,{})]}),t.jsxs("div",{className:"ml-72 md:ml-0 grid grid-cols-2 md:grid-cols-1 md:gap-2 md:p-5 md:mt-0 gap-2 items-start justify-center mt-5 md:px-5 mr-2",children:[t.jsx(qt,{}),t.jsx(Vr,{})]})]})}export{en as default};
