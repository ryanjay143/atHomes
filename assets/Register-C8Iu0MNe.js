import{r as d,u as O,j as e,F as j,f as C,a as P,L as S,B as E,d as T,e as J,c as Z,S as y}from"./index-DbVzqaR2.js";import{C as K,a as Q,b as W}from"./card-D03_EK3d.js";import{I as i}from"./input-D4lZY7Mq.js";import{L as n}from"./label--gR4uVPu.js";import{S as F,a as A,b as k,c as D,d as g}from"./select-DTnlgXDw.js";const L=()=>{const m="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let h="Acc-";for(let x=0;x<9;x++){const p=m.charAt(Math.floor(Math.random()*m.length));h+=p}return h};function ae(){const[m,h]=d.useState(""),[x,p]=d.useState(!1),[b,R]=d.useState(!1),[f,B]=d.useState(!1),[a,u]=d.useState({}),[_,N]=d.useState(!1),w=O(),[t,c]=d.useState({acct_number:"",first_name:"",middle_name:"",last_name:"",extension_name:"",email:"",phone:"",gender:"",role:"",complete_address:"",username:"",password:"",confirm_password:"",prc_liscence_number:"",dhsud_registration_number:"",validation_date:"",last_school_att:""});d.useEffect(()=>{const r=L();h(r),c(s=>({...s,acct_number:r}))},[]);const l=r=>{const{name:s,value:o}=r.target;c({...t,[s]:o})},I=r=>{const{value:s}=r.target;p(!1),c({...t,password:s,confirm_password:""});const o=/[A-Z]/.test(s),G=/[!@#$%^&*()]/.test(s);s.length<8||!o||!G?u(v=>({...v,password:"Password must be at least 8 characters long, include an uppercase letter and a symbol."})):u(v=>{const{password:X,...H}=v;return H})},q=()=>{R(!b)},V=()=>{B(!f)},M=async r=>{if(r.preventDefault(),_)return;N(!0);const s={};if(t.first_name||(s.first_name="First name is required."),t.last_name||(s.last_name="Last name is required."),t.email||(s.email="Email is required."),t.phone||(s.phone="Mobile number is required."),t.gender||(s.gender="Gender is required."),t.role||(s.role="Account type is required."),t.complete_address||(s.complete_address="Complete address is required."),t.username||(s.username="Username is required."),t.password||(s.password="Password is required."),t.confirm_password||(s.confirm_password="Confirm password is required."),t.password!==t.confirm_password&&(s.confirm_password="Passwords do not match."),t.last_school_att||(s.last_school_att="Last school or course attended is required."),t.role==="2"&&(t.prc_liscence_number||(s.prc_liscence_number="PRC License Number is required for Brokers."),t.validation_date||(s.validation_date="Validity Date is required for Brokers.")),u(s),Object.keys(s).length>0){N(!1);return}try{await Z.post("register",t),y.fire({title:"Registration successful!",text:"Please wait for approval.",icon:"success",showConfirmButton:!1,showCloseButton:!0,timer:3e3,timerProgressBar:!0}).then(()=>w("/")),c({acct_number:L(),first_name:"",middle_name:"",last_name:"",extension_name:"",email:"",phone:"",gender:"",role:"",complete_address:"",username:"",password:"",confirm_password:"",prc_liscence_number:"",dhsud_registration_number:"",validation_date:"",last_school_att:""}),u({})}catch(o){console.error("Registration failed:",o),o.response&&o.response.data&&o.response.data.message==="Email already taken"?y.fire({title:"Email already taken!",text:"Please login instead.",icon:"warning",showConfirmButton:!0}).then(()=>{w("/user-register")}):y.fire({title:"Error or Email already taken!",text:"Please try again.",icon:"error",showConfirmButton:!1,showCloseButton:!0,timer:3e3,timerProgressBar:!0})}finally{N(!1),w("/user-register")}},U=()=>{const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()";let s="";for(let o=0;o<8;o++)s+=r.charAt(Math.floor(Math.random()*r.length));c({...t,password:s,confirm_password:s}),p(!0)};return e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:e.jsxs("form",{onSubmit:M,className:"w-full max-w-6xl",children:[e.jsx(K,{className:"flex justify-center items-start mb-4",children:e.jsx(Q,{className:"text-3xl font-bold",children:"Registration"})}),e.jsxs(W,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("span",{className:"block text-gray-700 text-lg font-bold mb-2",children:"Personal Details"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"first_name",children:"First name"})," ",e.jsx("span",{className:"text-red-500",children:"*"}),e.jsx(i,{type:"text",name:"first_name",className:"h-9 bg-white",placeholder:"Enter your first name",onChange:l}),a.first_name&&e.jsx("span",{className:"text-red-500 text-sm",children:a.first_name})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"middle_name",children:"Middle name"}),e.jsx(i,{type:"text",name:"middle_name",className:"h-9 bg-white",placeholder:"Enter your middle name",onChange:l})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"last_name",children:"Last name"})," ",e.jsx("span",{className:"text-red-500",children:"*"}),e.jsx(i,{type:"text",name:"last_name",className:"h-9 bg-white",placeholder:"Enter your last name",onChange:l}),a.last_name&&e.jsx("span",{className:"text-red-500 text-sm",children:a.last_name})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"extension_name",children:"Extension name"})," ",e.jsx("span",{className:"md:text-[7px] md:font-bold",children:"(Jr, Sr. III)"}),e.jsx(i,{type:"text",name:"extension_name",className:"h-9 bg-white",placeholder:"Enter your extension name",onChange:l})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("span",{className:"block text-gray-700 text-lg font-bold mb-2",children:"Contact Details"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"email",children:"Email"})," ",e.jsx("span",{className:"text-red-500",children:"*"}),e.jsx(i,{type:"email",name:"email",className:"h-9 bg-white",placeholder:"Enter your email",onChange:l}),a.email&&e.jsx("span",{className:"text-red-500 text-sm",children:a.email})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"phone",children:"Mobile number"})," ",e.jsx("span",{className:"text-red-500",children:"*"}),e.jsx(i,{type:"text",name:"phone",className:"h-9 bg-white",placeholder:"Enter mobile number",onChange:l}),a.phone&&e.jsx("span",{className:"text-red-500 text-sm",children:a.phone})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"gender",children:"Gender"})," ",e.jsx("span",{className:"text-red-500",children:"*"}),e.jsxs(F,{onValueChange:r=>c({...t,gender:r}),children:[e.jsx(A,{className:"h-9 bg-white",children:e.jsx(k,{placeholder:"Select gender"})}),e.jsxs(D,{children:[e.jsx(g,{value:"male",children:"Male"}),e.jsx(g,{value:"female",children:"Female"})]})]}),a.gender&&e.jsx("span",{className:"text-red-500 text-sm",children:a.gender})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"complete_address",children:"Complete address"})," ",e.jsx("span",{className:"text-red-500",children:"*"}),e.jsx(i,{type:"text",name:"complete_address",className:"h-9 bg-white",placeholder:"Enter complete address",onChange:l}),a.complete_address&&e.jsx("span",{className:"text-red-500 text-sm",children:a.complete_address})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("span",{className:"block text-gray-700 text-lg font-bold mb-2",children:"Account Details"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"hidden",children:[e.jsx(n,{htmlFor:"acct_number",children:"Account number"}),e.jsx(i,{type:"text",name:"acct_number",className:"h-9 bg-white",value:m,readOnly:!0})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"username",children:"Username"})," ",e.jsx("span",{className:"text-red-500",children:"*"}),e.jsx(i,{type:"text",name:"username",className:"h-9 bg-white",placeholder:"Enter username",onChange:l}),a.username&&e.jsx("span",{className:"text-red-500 text-sm",children:a.username})]}),e.jsxs("div",{className:"mt-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(n,{htmlFor:"password",children:["Password ",e.jsx("span",{className:"text-red-500",children:"*"})," "]}),e.jsx("button",{type:"button",className:"text-blue-500 text-sm hover:underline md:text-[10px]",onClick:U,children:"Generate Password"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(i,{type:b?"text":"password",name:"password",className:"h-9 bg-white pr-10",placeholder:"Password",value:t.password,onChange:I}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 flex items-center px-3",onClick:q,children:e.jsx(j,{icon:b?C:P,className:"text-gray-500"})})]}),a.password&&e.jsx("span",{className:"text-red-500 text-xs",children:a.password})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"confirm_password",children:"Confirm Password"})," ",e.jsx("span",{className:"text-red-500",children:"*"}),e.jsxs("div",{className:"relative",children:[e.jsx(i,{type:f?"text":"password",name:"confirm_password",className:"h-9 bg-white pr-10",placeholder:"Confirm Password",value:t.confirm_password,onChange:l,readOnly:x}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 flex items-center px-3",onClick:V,children:e.jsx(j,{icon:f?C:P,className:"text-gray-500"})})]}),a.confirm_password&&e.jsx("span",{className:"text-red-500 text-sm",children:a.confirm_password})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("span",{className:"block text-gray-700 text-lg font-bold mb-2",children:"Identity Details"}),e.jsxs("div",{className:"grid grid-cols-5 gap-4 w-full md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"type",children:"Type"})," ",e.jsx("span",{className:"text-red-500",children:"*"}),e.jsxs(F,{onValueChange:r=>{c({...t,role:r})},children:[e.jsx(A,{className:"h-9 bg-white",children:e.jsx(k,{placeholder:"Select Agent or Broker"})}),e.jsxs(D,{children:[e.jsx(g,{value:"1",children:"Agent"}),e.jsx(g,{value:"2",children:"Broker"})]})]}),a.role&&e.jsx("span",{className:"text-red-500 text-sm",children:a.role})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"prc_liscence_number",children:"PRC License Number"}),e.jsxs("div",{className:"relative flex items-center",children:[e.jsx(i,{type:"text",name:"prc_liscence_number",className:"h-9 bg-white pr-16",placeholder:"Enter PRC License No: or type/select N/A",value:t.prc_liscence_number,onChange:l,autoComplete:"off"}),e.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2",children:e.jsx("button",{type:"button",className:"bg-blue-500 rounded px-2 py-1 text-xs text-white hover:bg-blue-400 transition",onClick:()=>l({target:{name:"prc_liscence_number",value:"N/A"}}),tabIndex:-1,children:"N/A"})})]}),e.jsxs("p",{className:"text-[10px] text-blue-500",children:["If no PRC License Number, type or click ",e.jsx("b",{children:"N/A"})," or leave blank."]}),a.prc_liscence_number&&e.jsx("span",{className:"text-red-500 text-sm",children:a.prc_liscence_number})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"dhsud_registration_number",className:"md:text-[9px] md:font-bold text-xs",children:"DHSUD Registration Number"}),e.jsxs("div",{className:"relative flex items-center",children:[e.jsx(i,{type:"text",name:"dhsud_registration_number",className:"h-9 bg-white pr-16",placeholder:"Enter DHSUD Registration No:",value:t.dhsud_registration_number,onChange:l,autoComplete:"off"}),e.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2",children:e.jsx("button",{type:"button",className:"bg-blue-500 rounded px-2 py-1 text-xs text-white hover:bg-blue-400 transition",onClick:()=>l({target:{name:"dhsud_registration_number",value:"N/A"}}),tabIndex:-1,children:"N/A"})})]}),e.jsxs("p",{className:"text-[10px] text-blue-500",children:["If no DHSUD Registration Number, type or click ",e.jsx("b",{children:"N/A"})," or leave blank."]}),a.dhsud_registration_number&&e.jsx("span",{className:"text-red-500 text-sm",children:a.dhsud_registration_number})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"validation_date",children:"Validity Date"}),e.jsx(i,{type:"date",name:"validation_date",className:"h-9 bg-white w-full",onChange:r=>{const o=r.target.value.split("-").reverse().join("-");l({target:{name:"validation_date",value:o}})}}),a.validation_date&&e.jsx("span",{className:"text-red-500 text-sm",children:a.validation_date})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"last_school_att",className:"text-[11px] font-bold",children:"Last School or Course attended"})," ",e.jsx("span",{className:"text-red-500 ",children:"*"}),e.jsx(i,{type:"text",name:"last_school_att",className:"h-9 bg-white",placeholder:"Enter Last School or Course attended",onChange:l}),a.last_school_att&&e.jsx("span",{className:"text-red-500 text-sm",children:a.last_school_att})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-6",children:[e.jsx(S,{to:"/user-login",children:e.jsxs(E,{className:"bg-red-500 hover:bg-red-600",children:[e.jsx(j,{icon:T}),"Back"]})}),e.jsx(E,{type:"submit",className:"bg-green-600 hover:bg-green-700",disabled:_,children:_?e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Registering..."}),e.jsx("span",{className:"animate-spin border-2 border-white border-t-transparent rounded-full w-4 h-4"})]}):e.jsxs(e.Fragment,{children:["Register now",e.jsx(j,{icon:J})]})})]}),e.jsxs("div",{className:"flex justify-center space-x-2 mt-4",children:[e.jsx("span",{children:"Already have an account?"}),e.jsx(S,{to:"/user-login",className:"text-primary",children:"Login here"})]})]})]})})}export{ae as default};
