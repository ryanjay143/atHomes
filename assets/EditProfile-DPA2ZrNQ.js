import{r as o,j as e,Q as U,T as F,U as z,F as p,Z as L,_ as T,b as C,a as P,B as $,S,d as k}from"./index-B1xux7nW.js";import{c as G}from"./card-BENweYTJ.js";import{I as i}from"./input-DilSF8vW.js";const E=5,R=E*1024*1024,D=["image/jpeg","image/png","image/jpg","image/webp"],Z=()=>{const[f,x]=o.useState(!1),d=o.useRef(null),[h,g]=o.useState(null),[u,w]=o.useState(null),[j,I]=o.useState(!1),[_,A]=o.useState(!1),[r,v]=o.useState({username:"",email:"",password:"",password_confirmation:""}),[c,y]=o.useState("account"),[a,m]=o.useState({first_name:"",middle_name:"",last_name:"",extension_name:"",complete_address:"",phone:"",profile_pic:""}),l=t=>{const{name:s,value:n}=t.target;c==="account"?v({...r,[s]:n}):m({...a,[s]:n})},B=t=>{var n;const s=(n=t.target.files)==null?void 0:n[0];if(w(null),s){if(!D.includes(s.type)){w("Only image files (jpeg, jpg, png, webp) are allowed."),g(null),m({...a,profile_pic:""}),d.current&&(d.current.value="");return}if(s.size>R){w(`Image size must be less than ${E}MB.`),g(null),m({...a,profile_pic:""}),d.current&&(d.current.value="");return}const b=URL.createObjectURL(s);g(b),m({...a,profile_pic:s})}},M=async t=>{if(t.preventDefault(),f)return;if(x(!0),u){x(!1),S.fire({title:"Error",text:u,icon:"error",showConfirmButton:!0});return}const s=new FormData;s.append("username",r.username),s.append("email",r.email),s.append("first_name",a.first_name),s.append("middle_name",a.middle_name),s.append("last_name",a.last_name),s.append("extension_name",a.extension_name||""),s.append("phone",a.phone),s.append("complete_address",a.complete_address),r.password&&(s.append("password",r.password),s.append("password_confirmation",r.password_confirmation));const n=document.querySelector('input[type="file"]');n&&n.files&&n.files[0]&&s.append("profile_pic",n.files[0]);try{const b=await k.post("broker/edit-profile",s,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${localStorage.getItem("access_token")}`}});S.fire({title:"Success",text:b.data.message,icon:"success",showConfirmButton:!1,showCloseButton:!0,timer:3e3,timerProgressBar:!0}).then(()=>{d.current&&(d.current.value="")}),N()}catch{}finally{x(!1)}},N=async()=>{try{const t=await k.get("user/broker",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("access_token")}`}}),s=t.data.personalInfo;m({first_name:s.first_name??"",middle_name:s.middle_name??"",last_name:s.last_name??"",extension_name:s.extension_name??"",complete_address:s.complete_address??"",phone:s.phone??"",profile_pic:s.profile_pic??""}),v(t.data.user)}catch{}};return o.useEffect(()=>{N()},[]),e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-80 h-80 opacity-20 rounded-full blur-3xl -z-10 animate-pulse"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-80 h-80 opacity-20 rounded-full blur-3xl -z-10 animate-pulse"}),e.jsx(G,{className:"w-full max-w-2xl bg-white/60 border-b-4 border-primary rounded-2xl shadow-2xl backdrop-blur-lg transition-all duration-300 hover:shadow-blue-200 z-10",children:e.jsxs("div",{className:"flex flex-col items-center py-8 px-6",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2 mb-6",children:[e.jsxs("div",{className:"relative group",children:[e.jsxs(U,{className:"h-32 w-32 border-4 border-primary shadow-lg",children:[h||a.profile_pic?e.jsx(F,{src:h||(typeof a.profile_pic=="string"?`https://athomes.site/${a.profile_pic}`:void 0),alt:"Profile",className:"rounded-full border border-border object-cover"}):null,e.jsx(z,{className:"font-bold text-3xl bg-[#172554] text-[#eff6ff]",children:a.first_name?a.first_name.charAt(0).toUpperCase():"U"})]}),e.jsxs("label",{htmlFor:"profile_pic",className:"absolute bottom-2 right-2 bg-blue-600 text-white rounded-full p-2 shadow-lg cursor-pointer group-hover:scale-110 transition-transform",title:"Change Profile Picture",children:[e.jsx(p,{icon:L}),e.jsx("input",{id:"profile_pic",type:"file",name:"profile_pic",accept:"image/jpeg,image/png,image/jpg,image/webp",className:"hidden",onChange:B,ref:d})]})]}),e.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"Profile Picture (JPEG, PNG, WEBP, Max 5MB)"}),u&&e.jsx("div",{className:"text-red-600 text-sm mt-1",children:u})]}),e.jsxs("h1",{className:"text-3xl font-extrabold text-blue-900 mb-2 flex items-center gap-2",children:[e.jsx(p,{icon:T,className:"text-blue-500"}),"Edit Profile"]}),e.jsxs("div",{className:"flex w-full mb-6 rounded-xl overflow-hidden shadow",children:[e.jsx("button",{className:`flex-1 py-3 text-lg font-semibold transition-all duration-200 ${c==="account"?"bg-blue-600 text-white shadow":"bg-white/70 text-blue-700 hover:bg-blue-100"}`,onClick:()=>y("account"),type:"button",children:"User Account"}),e.jsx("button",{className:`flex-1 py-3 text-lg font-semibold transition-all duration-200 ${c==="personal"?"bg-blue-600 text-white shadow":"bg-white/70 text-blue-700 hover:bg-blue-100"}`,onClick:()=>y("personal"),type:"button",children:"Personal Info"})]}),e.jsxs("form",{onSubmit:M,className:"w-full",children:[c==="account"&&e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-blue-900 font-semibold mb-1",children:"Username"}),e.jsx(i,{type:"text",name:"username",value:r.username,onChange:l,className:"w-full h-12 px-3 py-2 rounded-lg border-2 border-blue-200 focus:border-blue-400 bg-white/80 transition",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-blue-900 font-semibold mb-1",children:"Email"}),e.jsx(i,{type:"email",name:"email",value:r.email,onChange:l,className:"w-full h-12 px-3 py-2 rounded-lg border-2 border-blue-200 focus:border-blue-400 bg-white/80 transition",required:!0})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-blue-900 font-semibold mb-1",children:"Change password"}),e.jsx(i,{type:j?"text":"password",name:"password",value:r.password,onChange:l,className:"w-full h-12 px-3 py-2 rounded-lg border-2 border-blue-200 focus:border-blue-400 bg-white/80 transition pr-12"}),e.jsx("button",{type:"button",className:"absolute right-3 top-12 transform -translate-y-1/2 text-blue-400 hover:text-blue-700",tabIndex:-1,onClick:()=>I(t=>!t),style:{background:"none",border:"none",padding:0,margin:0},children:e.jsx(p,{icon:j?C:P})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-blue-900 font-semibold mb-1",children:"Password confirmation"}),e.jsx(i,{type:_?"text":"password",name:"password_confirmation",value:r.password_confirmation,onChange:l,className:"w-full h-12 px-3 py-2 rounded-lg border-2 border-blue-200 focus:border-blue-400 bg-white/80 transition pr-12"}),e.jsx("button",{type:"button",className:"absolute right-3 top-12 transform -translate-y-1/2 text-blue-400 hover:text-blue-700",tabIndex:-1,onClick:()=>A(t=>!t),style:{background:"none",border:"none",padding:0,margin:0},children:e.jsx(p,{icon:_?C:P})})]})]}),c==="personal"&&e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-blue-900 font-semibold mb-1",children:"Firstname"}),e.jsx(i,{type:"text",name:"first_name",value:a.first_name,onChange:l,className:"w-full h-12 px-3 py-2 rounded-lg border-2 border-blue-200 focus:border-blue-400 bg-white/80 transition"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-blue-900 font-semibold mb-1",children:"Middlename"}),e.jsx(i,{type:"text",name:"middle_name",value:a.middle_name,onChange:l,className:"w-full h-12 px-3 py-2 rounded-lg border-2 border-blue-200 focus:border-blue-400 bg-white/80 transition"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-blue-900 font-semibold mb-1",children:"Lastname"}),e.jsx(i,{type:"text",name:"last_name",value:a.last_name,onChange:l,className:"w-full h-12 px-3 py-2 rounded-lg border-2 border-blue-200 focus:border-blue-400 bg-white/80 transition"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-blue-900 font-semibold mb-1",children:"Extension"}),e.jsx(i,{type:"text",name:"extension_name",value:a.extension_name,onChange:l,className:"w-full h-12 px-3 py-2 rounded-lg border-2 border-blue-200 focus:border-blue-400 bg-white/80 transition"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-blue-900 font-semibold mb-1",children:"Address"}),e.jsx(i,{type:"text",name:"complete_address",value:a.complete_address,onChange:l,className:"w-full h-12 px-3 py-2 rounded-lg border-2 border-blue-200 focus:border-blue-400 bg-white/80 transition"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-blue-900 font-semibold mb-1",children:"Phone"}),e.jsx(i,{type:"text",name:"phone",value:a.phone,onChange:l,className:"w-full h-12 px-3 py-2 rounded-lg border-2 border-blue-200 focus:border-blue-400 bg-white/80 transition"})]})]})]}),e.jsx($,{type:"submit",className:"w-full mt-8 bg-gradient-to-r from-blue-600 to-blue-400 hover:from-blue-700 hover:to-blue-500 text-white font-bold py-3 rounded-xl shadow-lg transition-all duration-200",disabled:f,children:f?e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Saving..."}),e.jsx("span",{className:"animate-spin cursor-not-allowed border-2 border-white border-t-transparent rounded-full w-4 h-4 ml-2"})]}):e.jsx(e.Fragment,{children:e.jsx("span",{children:"Save changes"})})})]})]})}),e.jsx("style",{children:`
          .fade-in-left {
            animation: fadeInLeft 0.7s cubic-bezier(.39,.575,.565,1) both;
          }
          @keyframes fadeInLeft {
            0% { opacity: 0; transform: translateX(-40px);}
            100% { opacity: 1; transform: translateX(0);}
          }
        `})]})};export{Z as default};
