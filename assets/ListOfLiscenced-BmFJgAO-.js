import{r as j,j as e,B as g,F as T,f as L,c as E}from"./index-Bg6bGyZ4.js";import{S as I,a as Y,b as B,c as k,d as o}from"./select-CSnqEcul.js";import{I as $}from"./input-CCw8CkUf.js";import{f as H,a as M,b as u,c as a,d as P,e as s}from"./table-Bt9KMKLe.js";import{D as R,a as F,b as U,c as V,d as O,g as Q,f as z}from"./dialog-CQcSrkr9.js";import{f as G,a as q}from"./dateUtils-D6w6W0GJ.js";function er(){const[w,D]=j.useState([]),[d,v]=j.useState(""),[h,y]=j.useState("all"),A=async()=>{try{const r=await E.get("agent-broker",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("access_token")}`}});D(r.data.agentsLicensed)}catch(r){console.error("Error fetching members:",r)}};j.useEffect(()=>{A()},[]);const C=r=>{v(r.target.value)},S=r=>{y(r==="all"?"all":parseInt(r))},c=w.filter(r=>{var t,l,n,i,x,m;const b=`${r.prc_liscence_number}`.toLowerCase(),p=`${(t=r==null?void 0:r.personal_info)==null?void 0:t.first_name} ${(l=r==null?void 0:r.personal_info)==null?void 0:l.middle_name} ${(n=r==null?void 0:r.personal_info)==null?void 0:n.last_name} ${(i=r==null?void 0:r.personal_info)==null?void 0:i.extension_name}`.toLowerCase(),f=((x=r==null?void 0:r.user)==null?void 0:x.role)===1?"agent":((m=r==null?void 0:r.user)==null?void 0:m.role)===2?"broker":"";return p.includes(d.toLowerCase())||f.includes(d.toLowerCase())||b.includes(d.toLowerCase())}),N=h==="all"?c:c.slice(0,h);return e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"py-2 flex flex-row justify-between gap-4",children:[e.jsxs(I,{onValueChange:S,children:[e.jsxs(Y,{className:"w-[120px] border border-primary md:w-28",children:[e.jsx("span",{className:"text-[#172554]",children:"Show"}),e.jsx(B,{placeholder:"All"})," "]}),e.jsxs(k,{children:[e.jsx(o,{value:"all",children:"All"}),e.jsx(o,{value:"10",children:"10"}),e.jsx(o,{value:"20",children:"20"}),e.jsx(o,{value:"30",children:"30"}),e.jsx(o,{value:"40",children:"40"}),e.jsx(o,{value:"50",children:"50"})]})]}),e.jsx($,{type:"text",placeholder:"Search",className:"w-52 md:w-full",value:d,onChange:C})]}),e.jsx("div",{className:"fade-in-left",children:e.jsxs(H,{children:[e.jsx(M,{children:e.jsxs(u,{children:[e.jsx(a,{children:"#"}),e.jsx(a,{children:"Licensed No."}),e.jsx(a,{children:"Fullname"}),e.jsx(a,{children:"Type"}),e.jsx(a,{children:"Email address"}),e.jsx(a,{children:"Contact number"}),e.jsx(a,{children:"Date Approved"}),e.jsx(a,{className:"text-right",children:"Action"})]})}),e.jsx(P,{children:N.length>0?N.map((r,b)=>{var p,f,t,l,n,i,x,m,_;return e.jsxs(u,{children:[e.jsx(s,{className:"font-medium border border-[#bfdbfe]",children:b+1}),e.jsx(s,{className:"border border-[#bfdbfe] uppercase",children:r.prc_liscence_number}),e.jsxs(s,{className:"font-medium border border-[#bfdbfe] uppercase",children:[r.personal_info.first_name," ",r.personal_info.middle_name," ",r.personal_info.last_name," ",r.personal_info.extension_name]}),e.jsx(s,{className:"border border-[#bfdbfe]",children:((p=r==null?void 0:r.user)==null?void 0:p.role)===1?e.jsx("span",{className:"inline-flex unlicenseds-center rounded-md bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700 ring-1 ring-blue-700/10 ring-inset",children:"Agent"}):((f=r==null?void 0:r.user)==null?void 0:f.role)===2?e.jsx("span",{className:"inline-flex unlicenseds-center rounded-md bg-green-50 px-2 py-1 text-xs font-medium text-green-700 ring-1 ring-green-600/20 ring-inset",children:"Broker"}):(t=r==null?void 0:r.user)==null?void 0:t.role}),e.jsx(s,{className:"border border-[#bfdbfe]",children:r.user.email}),e.jsx(s,{className:"border border-[#bfdbfe]",children:r.personal_info.phone}),e.jsx(s,{className:"border border-[#bfdbfe]",children:G(r==null?void 0:r.user.updated_at)}),e.jsx(s,{className:"text-right border border-[#bfdbfe]",children:e.jsx("div",{className:"flex flex-row gap-1 justify-end",children:e.jsxs(R,{children:[e.jsx(F,{children:e.jsx(g,{className:"w-8 h-8 rounded-md border border-primary",children:e.jsx(T,{icon:L,className:"text-[#eff6ff]"})})}),e.jsx(U,{className:"md:max-w-[400px]",children:e.jsxs(V,{children:[e.jsx(O,{className:"text-start",children:"Agent and Broker Details"}),e.jsx(Q,{children:e.jsxs("div",{className:"flex flex-col gap-4 mt-5 mb-5",children:[e.jsxs("div",{className:"border-b pb-2 mb-4 text-start",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Personal Details"}),e.jsxs("p",{children:["Name: ",(l=r==null?void 0:r.personal_info)==null?void 0:l.first_name," ",(n=r==null?void 0:r.personal_info)==null?void 0:n.middle_name," ",(i=r==null?void 0:r.personal_info)==null?void 0:i.last_name]}),e.jsxs("p",{children:["Email: ",(x=r==null?void 0:r.user)==null?void 0:x.email]}),e.jsxs("p",{children:["Username: ",(m=r==null?void 0:r.user)==null?void 0:m.username]}),e.jsxs("p",{children:["Phone: ",(_=r==null?void 0:r.personal_info)==null?void 0:_.phone]}),e.jsxs("p",{children:["Gender: ",r.personal_info.gender.charAt(0).toUpperCase()+r.personal_info.gender.slice(1)]}),e.jsxs("p",{children:["Complete Address: ",r.personal_info.complete_address]}),e.jsxs("p",{children:["Status: ",r.user.status===0?"Approved":r.user.status===1?"Pending":"Decline"]})]}),e.jsxs("div",{className:"text-start",children:[e.jsx("h2",{className:"text-lg font-bold ",children:"Identity Information"}),e.jsxs("p",{children:["PRC License Number: ",(r==null?void 0:r.prc_liscence_number)||"N/A"]}),e.jsxs("p",{children:["DHSUD Registration Number: ",(r==null?void 0:r.dhsud_registration_number)||"N/A"]}),e.jsxs("p",{children:["Type: ",(r==null?void 0:r.user.role)===1?"Agent":(r==null?void 0:r.user.role)===2?"Broker":"N/A"]}),e.jsxs("p",{children:["Validity Date: ",q((r==null?void 0:r.validation_date)||"N/A")]})]})]})}),e.jsx(z,{asChild:!0,children:e.jsx(g,{className:"bg-red-500 hover:bg-red-400",children:"Close"})})]})})]})})})]},r.id)}):e.jsx(u,{children:e.jsx(s,{colSpan:8,className:"text-center border border-[#bfdbfe]",children:"No data available"})})})]})}),e.jsx("div",{className:"flex flex-row justify-end mt-3",children:e.jsx("div",{children:e.jsxs("p",{className:"text-[#172554] text-sm w-full",children:["Showing 1 to ",h==="all"?c.length:h," of ",c.length," entries"]})})})]})}export{er as default};
