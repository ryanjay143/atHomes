import{r as l,j as t,c as U,k as ht,l as xt,m as F,n as gt,o as R,p as H,q as Ne,s as vt,t as bt,v as yt,w as wt,x as Pt,y as Nt,z as jt,A as Et,C as Ct,D as Q,E as St,G as At,P as je,H as Rt,I as Ot,J as _t,K as Tt,M as Ft,N as Dt,O as Lt,Q as It,T as kt,u as Mt,L as G,F as J,U as $t,V as Ht,W as Wt,X as Ut,S as Bt}from"./index-xgvVzwjv.js";/* empty css              */import{c as E,C as T,a as A,b as W,d as I}from"./card-DfGv4U6O.js";import{C as Ee}from"./react-apexcharts.min-BCszHVwW.js";import{I as zt}from"./input-D7RsSNb2.js";const Kt=()=>{const[e,s]=l.useState(!1),[r,o]=l.useState(Array(12).fill(0)),[n,a]=l.useState(0),c=async()=>{try{const u=(await U.get("sales-encoding",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("access_token")}`}})).data.salesEncodingDashboardYearly.map(m=>({...m,amount:typeof m.amount=="number"?m.amount:parseFloat(m.amount)})),f=Array(12).fill(0);let g=0;u.forEach(m=>{const h=new Date(m.date_on_sale).getMonth();f[h]+=m.amount,g+=m.amount}),o(f),a(g)}catch(d){console.error("Error fetching data:",d)}};l.useEffect(()=>{c()},[]);const i={series:[{name:"Sales",data:r}],options:{chart:{type:"line",height:350,toolbar:{show:!1},dropShadow:{enabled:!0,top:3,left:2,blur:4,opacity:.2},zoom:{enabled:!1}},colors:["#2563eb"],dataLabels:{enabled:!1},markers:{size:5,colors:["#fff"],strokeColors:"#2563eb",strokeWidth:3,hover:{size:8}},grid:{borderColor:"#e5e7eb",strokeDashArray:4,row:{colors:["#f9fafb","transparent"],opacity:.5}},xaxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],labels:{style:{colors:"#64748b",fontWeight:500}}},yaxis:{labels:{formatter:d=>d>0?d.toLocaleString():"",style:{colors:"#64748b",fontWeight:500}}},stroke:{curve:"smooth",width:4},title:{text:void 0},tooltip:{theme:"light",y:{formatter:d=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(d)}},legend:{show:!1}}};return l.useEffect(()=>{s(!0)},[]),t.jsxs(E,{className:"fade-in-left w-full md:w-full bg-gradient-to-br from-blue-50 via-white to-blue-100 border-0 shadow-xl rounded-2xl relative overflow-hidden",children:[t.jsxs(T,{className:"flex flex-row items-center justify-between pb-2",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"bg-blue-100 px-3 py-1 rounded-full text-blue-700 text-xs font-semibold shadow-sm",children:"SALES"}),t.jsxs("div",{children:[t.jsx(A,{className:"text-[#172554] text-xl font-bold",children:"Overall Sales"}),t.jsx("div",{className:"text-xs text-blue-700 font-medium",children:"Yearly Overview"})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"text-2xl font-extrabold text-green-500",children:new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",maximumFractionDigits:0}).format(n)}),t.jsx("div",{className:"text-xs text-gray-500",children:"Total Sales"})]})]}),t.jsx(W,{className:"pt-0",children:e&&t.jsx("div",{className:"w-full",children:t.jsx(Ee,{options:i.options,series:i.series,type:"line",height:320})})}),t.jsx("div",{className:"absolute -bottom-10 -right-10 w-40 h-40 bg-blue-200 opacity-30 rounded-full blur-2xl pointer-events-none"})]})},Vt=()=>{const[e,s]=l.useState(!1),[r,o]=l.useState({series:[{name:"Total Reservation",data:[]}],options:{chart:{type:"bar",height:350,toolbar:{show:!1},animations:{enabled:!0,speed:800}},plotOptions:{bar:{borderRadius:8,horizontal:!1,columnWidth:"45%"}},dataLabels:{enabled:!0,style:{colors:["#fff"],fontWeight:700,fontSize:"14px"},formatter:function(n){return n.toLocaleString()},offsetY:-6},xaxis:{categories:[],labels:{style:{colors:"#64748b",fontWeight:500}}},yaxis:{labels:{style:{colors:"#64748b",fontWeight:500}}},grid:{borderColor:"#cbd5e1",strokeDashArray:0,xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}},row:{colors:["#f1f5f9","transparent"],opacity:.5},position:"back"},colors:["#2563eb"],title:{text:"Top Reservation Housing of this Month",align:"left",style:{fontSize:"18px",color:"#172554",fontWeight:700}},tooltip:{theme:"light"},legend:{show:!1}}});return l.useEffect(()=>{s(!0),U.get("sales-encoding",{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}}).then(n=>{const a=n.data.salesdashboard,c=a.map(d=>d.category),i=a.map(d=>d.totalReserved);o(d=>({series:[{name:"Total Reservation",data:i}],options:{...d.options,xaxis:{...d.options.xaxis,categories:c}}}))}).catch(n=>{console.error("Error fetching data:",n)})},[]),t.jsxs(E,{className:"fade-in-left w-full md:w-full bg-gradient-to-br from-blue-50 via-white to-blue-100 border-0 shadow-xl rounded-2xl relative overflow-hidden",children:[t.jsx(T,{className:"flex flex-row items-center justify-between pb-2",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"bg-blue-100 px-3 py-1 rounded-full text-blue-700 text-xs font-semibold shadow-sm",children:"HOUSING"}),t.jsxs("div",{children:[t.jsx(A,{className:"text-[#172554] text-xl font-bold",children:"Top Housing Category"}),t.jsx("div",{className:"text-xs text-blue-700 font-medium",children:"Monthly Reservations"})]})]})}),t.jsx(W,{className:"pt-0",children:e&&t.jsx("div",{className:"w-full",children:t.jsx(Ee,{options:r.options,series:r.series,type:"bar",height:350})})}),t.jsx("div",{className:"absolute -bottom-10 -right-10 w-40 h-40 bg-blue-200 opacity-30 rounded-full blur-2xl pointer-events-none"})]})};function Yt(){const[e,s]=l.useState([]),[r,o]=l.useState(""),n=async()=>{try{const i=await U.get("sales-encoding",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("access_token")}`}});s(i.data.topPerformers)}catch(i){console.error("Error fetching data:",i)}};l.useEffect(()=>{n()},[]);const a=new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",maximumFractionDigits:0}),c=l.useMemo(()=>{if(!r.trim())return e;const i=r.toLowerCase();return e.filter(d=>[d.first_name,d.middle_name,d.last_name,d.extension_name,d.role,String(d.totalReserved),String(d.totalSales)].filter(Boolean).join(" ").toLowerCase().includes(i))},[r,e]);return t.jsx(E,{className:"fade-in-left w-full md:w-full bg-gradient-to-br from-blue-50 via-white to-blue-100 border-0 shadow-xl rounded-2xl relative overflow-hidden",children:t.jsxs(W,{className:"flex flex-col h-[500px]",children:[t.jsxs("div",{className:"flex flex-row justify-between items-center py-5 flex-shrink-0",children:[t.jsxs("div",{children:[t.jsx(A,{children:"Top Performers"}),t.jsx(I,{className:"text-xs text-blue-700 font-medium",children:"of this month"})]}),t.jsx(zt,{type:"text",placeholder:"Search",className:"w-52",value:r,onChange:i=>o(i.target.value)})]}),t.jsx("div",{className:"flex-1 overflow-auto",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-4 ",children:[c.length===0&&t.jsx("div",{className:"col-span-full text-center text-gray-500 py-8",children:"No data available"}),c.map((i,d)=>t.jsx(E,{className:"bg-white border border-[#bfdbfe] rounded-xl shadow hover:shadow-lg transition",children:t.jsxs(W,{className:"flex flex-col gap-2 p-4",children:[t.jsxs("span",{className:"inline-block bg-blue-100 text-blue-700 text-[11px] font-semibold px-3 py-1 rounded-full mb-1",children:["Rank #",d+1]}),t.jsxs("div",{className:"font-semibold text-lg text-[#172554] truncate",children:[i.first_name," ",i.middle_name," ",i.last_name," ",i.extension_name]}),t.jsx("span",{className:"inline-block bg-yellow-100 text-yellow-800 text-xs font-semibold px-3 py-1 rounded-full mb-1",children:i.role}),t.jsxs("div",{className:"flex flex-row justify-between items-end mt-2",children:[t.jsx("span",{className:"text-xs text-gray-500",children:"Total Reserved"}),t.jsx("span",{className:"font-bold text-blue-700",children:i.totalReserved})]}),t.jsxs("div",{className:"flex flex-row justify-between items-end",children:[t.jsx("span",{className:"text-xs text-gray-500",children:"Total Sales"}),t.jsx("span",{className:"font-bold text-green-700",children:a.format(i.totalSales)})]})]})},i.id))]})}),t.jsx("div",{className:"flex flex-row justify-end mt-3 flex-shrink-0",children:t.jsx("div",{children:t.jsxs("p",{className:"text-[#172554] text-sm w-full",children:["Showing ",c.length===0?0:1," to ",c.length," of ",c.length," entries"]})})})]})})}var re=l.forwardRef((e,s)=>{const{children:r,...o}=e,n=l.Children.toArray(r),a=n.find(Gt);if(a){const c=a.props.children,i=n.map(d=>d===a?l.Children.count(c)>1?l.Children.only(null):l.isValidElement(c)?c.props.children:null:d);return t.jsx(ee,{...o,ref:s,children:l.isValidElement(c)?l.cloneElement(c,void 0,i):null})}return t.jsx(ee,{...o,ref:s,children:r})});re.displayName="Slot";var ee=l.forwardRef((e,s)=>{const{children:r,...o}=e;if(l.isValidElement(r)){const n=Zt(r),a=Jt(o,r.props);return r.type!==l.Fragment&&(a.ref=s?ht(s,n):n),l.cloneElement(r,a)}return l.Children.count(r)>1?l.Children.only(null):null});ee.displayName="SlotClone";var Xt=({children:e})=>t.jsx(t.Fragment,{children:e});function Gt(e){return l.isValidElement(e)&&e.type===Xt}function Jt(e,s){const r={...s};for(const o in s){const n=e[o],a=s[o];/^on[A-Z]/.test(o)?n&&a?r[o]=(...i)=>{a(...i),n(...i)}:n&&(r[o]=n):o==="style"?r[o]={...n,...a}:o==="className"&&(r[o]=[n,a].filter(Boolean).join(" "))}return{...e,...r}}function Zt(e){var o,n;let s=(o=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:o.get,r=s&&"isReactWarning"in s&&s.isReactWarning;return r?e.ref:(s=(n=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:n.get,r=s&&"isReactWarning"in s&&s.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var qt=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],C=qt.reduce((e,s)=>{const r=l.forwardRef((o,n)=>{const{asChild:a,...c}=o,i=a?re:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),t.jsx(i,{...c,ref:n})});return r.displayName=`Primitive.${s}`,{...e,[s]:r}},{});function Qt(e,s){e&&xt.flushSync(()=>e.dispatchEvent(s))}var er="DismissableLayer",te="dismissableLayer.update",tr="dismissableLayer.pointerDownOutside",rr="dismissableLayer.focusOutside",ge,Ce=l.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Se=l.forwardRef((e,s)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:o,onPointerDownOutside:n,onFocusOutside:a,onInteractOutside:c,onDismiss:i,...d}=e,u=l.useContext(Ce),[f,g]=l.useState(null),m=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=l.useState({}),N=F(s,v=>g(v)),p=Array.from(u.layers),[P]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=p.indexOf(P),y=f?p.indexOf(f):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,b=y>=x,D=or(v=>{const _=v.target,z=[...u.branches].some(M=>M.contains(_));!b||z||(n==null||n(v),c==null||c(v),v.defaultPrevented||i==null||i())},m),j=ar(v=>{const _=v.target;[...u.branches].some(M=>M.contains(_))||(a==null||a(v),c==null||c(v),v.defaultPrevented||i==null||i())},m);return gt(v=>{y===u.layers.size-1&&(o==null||o(v),!v.defaultPrevented&&i&&(v.preventDefault(),i()))},m),l.useEffect(()=>{if(f)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(ge=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(f)),u.layers.add(f),ve(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=ge)}},[f,m,r,u]),l.useEffect(()=>()=>{f&&(u.layers.delete(f),u.layersWithOutsidePointerEventsDisabled.delete(f),ve())},[f,u]),l.useEffect(()=>{const v=()=>h({});return document.addEventListener(te,v),()=>document.removeEventListener(te,v)},[]),t.jsx(C.div,{...d,ref:N,style:{pointerEvents:w?b?"auto":"none":void 0,...e.style},onFocusCapture:R(e.onFocusCapture,j.onFocusCapture),onBlurCapture:R(e.onBlurCapture,j.onBlurCapture),onPointerDownCapture:R(e.onPointerDownCapture,D.onPointerDownCapture)})});Se.displayName=er;var sr="DismissableLayerBranch",nr=l.forwardRef((e,s)=>{const r=l.useContext(Ce),o=l.useRef(null),n=F(s,o);return l.useEffect(()=>{const a=o.current;if(a)return r.branches.add(a),()=>{r.branches.delete(a)}},[r.branches]),t.jsx(C.div,{...e,ref:n})});nr.displayName=sr;function or(e,s=globalThis==null?void 0:globalThis.document){const r=H(e),o=l.useRef(!1),n=l.useRef(()=>{});return l.useEffect(()=>{const a=i=>{if(i.target&&!o.current){let d=function(){Ae(tr,r,u,{discrete:!0})};const u={originalEvent:i};i.pointerType==="touch"?(s.removeEventListener("click",n.current),n.current=d,s.addEventListener("click",n.current,{once:!0})):d()}else s.removeEventListener("click",n.current);o.current=!1},c=window.setTimeout(()=>{s.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(c),s.removeEventListener("pointerdown",a),s.removeEventListener("click",n.current)}},[s,r]),{onPointerDownCapture:()=>o.current=!0}}function ar(e,s=globalThis==null?void 0:globalThis.document){const r=H(e),o=l.useRef(!1);return l.useEffect(()=>{const n=a=>{a.target&&!o.current&&Ae(rr,r,{originalEvent:a},{discrete:!1})};return s.addEventListener("focusin",n),()=>s.removeEventListener("focusin",n)},[s,r]),{onFocusCapture:()=>o.current=!0,onBlurCapture:()=>o.current=!1}}function ve(){const e=new CustomEvent(te);document.dispatchEvent(e)}function Ae(e,s,r,{discrete:o}){const n=r.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});s&&n.addEventListener(e,s,{once:!0}),o?Qt(n,a):n.dispatchEvent(a)}var Z="focusScope.autoFocusOnMount",q="focusScope.autoFocusOnUnmount",be={bubbles:!1,cancelable:!0},ir="FocusScope",Re=l.forwardRef((e,s)=>{const{loop:r=!1,trapped:o=!1,onMountAutoFocus:n,onUnmountAutoFocus:a,...c}=e,[i,d]=l.useState(null),u=H(n),f=H(a),g=l.useRef(null),m=F(s,p=>d(p)),h=l.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;l.useEffect(()=>{if(o){let p=function(w){if(h.paused||!i)return;const b=w.target;i.contains(b)?g.current=b:S(g.current,{select:!0})},P=function(w){if(h.paused||!i)return;const b=w.relatedTarget;b!==null&&(i.contains(b)||S(g.current,{select:!0}))},x=function(w){if(document.activeElement===document.body)for(const D of w)D.removedNodes.length>0&&S(i)};document.addEventListener("focusin",p),document.addEventListener("focusout",P);const y=new MutationObserver(x);return i&&y.observe(i,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",P),y.disconnect()}}},[o,i,h.paused]),l.useEffect(()=>{if(i){we.add(h);const p=document.activeElement;if(!i.contains(p)){const x=new CustomEvent(Z,be);i.addEventListener(Z,u),i.dispatchEvent(x),x.defaultPrevented||(lr(mr(Oe(i)),{select:!0}),document.activeElement===p&&S(i))}return()=>{i.removeEventListener(Z,u),setTimeout(()=>{const x=new CustomEvent(q,be);i.addEventListener(q,f),i.dispatchEvent(x),x.defaultPrevented||S(p??document.body,{select:!0}),i.removeEventListener(q,f),we.remove(h)},0)}}},[i,u,f,h]);const N=l.useCallback(p=>{if(!r&&!o||h.paused)return;const P=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,x=document.activeElement;if(P&&x){const y=p.currentTarget,[w,b]=cr(y);w&&b?!p.shiftKey&&x===b?(p.preventDefault(),r&&S(w,{select:!0})):p.shiftKey&&x===w&&(p.preventDefault(),r&&S(b,{select:!0})):x===y&&p.preventDefault()}},[r,o,h.paused]);return t.jsx(C.div,{tabIndex:-1,...c,ref:m,onKeyDown:N})});Re.displayName=ir;function lr(e,{select:s=!1}={}){const r=document.activeElement;for(const o of e)if(S(o,{select:s}),document.activeElement!==r)return}function cr(e){const s=Oe(e),r=ye(s,e),o=ye(s.reverse(),e);return[r,o]}function Oe(e){const s=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:o=>{const n=o.tagName==="INPUT"&&o.type==="hidden";return o.disabled||o.hidden||n?NodeFilter.FILTER_SKIP:o.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)s.push(r.currentNode);return s}function ye(e,s){for(const r of e)if(!dr(r,{upTo:s}))return r}function dr(e,{upTo:s}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(s!==void 0&&e===s)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function ur(e){return e instanceof HTMLInputElement&&"select"in e}function S(e,{select:s=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&ur(e)&&s&&e.select()}}var we=fr();function fr(){let e=[];return{add(s){const r=e[0];s!==r&&(r==null||r.pause()),e=Pe(e,s),e.unshift(s)},remove(s){var r;e=Pe(e,s),(r=e[0])==null||r.resume()}}}function Pe(e,s){const r=[...e],o=r.indexOf(s);return o!==-1&&r.splice(o,1),r}function mr(e){return e.filter(s=>s.tagName!=="A")}var pr="Arrow",_e=l.forwardRef((e,s)=>{const{children:r,width:o=10,height:n=5,...a}=e;return t.jsx(C.svg,{...a,ref:s,width:o,height:n,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:t.jsx("polygon",{points:"0,0 30,0 15,10"})})});_e.displayName=pr;var hr=_e,se="Popper",[Te,Fe]=Ne(se),[xr,De]=Te(se),Le=e=>{const{__scopePopper:s,children:r}=e,[o,n]=l.useState(null);return t.jsx(xr,{scope:s,anchor:o,onAnchorChange:n,children:r})};Le.displayName=se;var Ie="PopperAnchor",ke=l.forwardRef((e,s)=>{const{__scopePopper:r,virtualRef:o,...n}=e,a=De(Ie,r),c=l.useRef(null),i=F(s,c);return l.useEffect(()=>{a.onAnchorChange((o==null?void 0:o.current)||c.current)}),o?null:t.jsx(C.div,{...n,ref:i})});ke.displayName=Ie;var ne="PopperContent",[gr,vr]=Te(ne),Me=l.forwardRef((e,s)=>{var de,ue,fe,me,pe,he;const{__scopePopper:r,side:o="bottom",sideOffset:n=0,align:a="center",alignOffset:c=0,arrowPadding:i=0,avoidCollisions:d=!0,collisionBoundary:u=[],collisionPadding:f=0,sticky:g="partial",hideWhenDetached:m=!1,updatePositionStrategy:h="optimized",onPlaced:N,...p}=e,P=De(ne,r),[x,y]=l.useState(null),w=F(s,$=>y($)),[b,D]=l.useState(null),j=vt(b),v=(j==null?void 0:j.width)??0,_=(j==null?void 0:j.height)??0,z=o+(a!=="center"?"-"+a:""),M=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},ie=Array.isArray(u)?u:[u],rt=ie.length>0,K={padding:M,boundary:ie.filter(yr),altBoundary:rt},{refs:st,floatingStyles:le,placement:nt,isPositioned:V,middlewareData:L}=bt({strategy:"fixed",placement:z,whileElementsMounted:(...$)=>yt(...$,{animationFrame:h==="always"}),elements:{reference:P.anchor},middleware:[wt({mainAxis:n+_,alignmentAxis:c}),d&&Pt({mainAxis:!0,crossAxis:!1,limiter:g==="partial"?St():void 0,...K}),d&&Nt({...K}),jt({...K,apply:({elements:$,rects:xe,availableWidth:ut,availableHeight:ft})=>{const{width:mt,height:pt}=xe.reference,X=$.floating.style;X.setProperty("--radix-popper-available-width",`${ut}px`),X.setProperty("--radix-popper-available-height",`${ft}px`),X.setProperty("--radix-popper-anchor-width",`${mt}px`),X.setProperty("--radix-popper-anchor-height",`${pt}px`)}}),b&&Et({element:b,padding:i}),wr({arrowWidth:v,arrowHeight:_}),m&&Ct({strategy:"referenceHidden",...K})]}),[ce,ot]=We(nt),Y=H(N);Q(()=>{V&&(Y==null||Y())},[V,Y]);const at=(de=L.arrow)==null?void 0:de.x,it=(ue=L.arrow)==null?void 0:ue.y,lt=((fe=L.arrow)==null?void 0:fe.centerOffset)!==0,[ct,dt]=l.useState();return Q(()=>{x&&dt(window.getComputedStyle(x).zIndex)},[x]),t.jsx("div",{ref:st.setFloating,"data-radix-popper-content-wrapper":"",style:{...le,transform:V?le.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ct,"--radix-popper-transform-origin":[(me=L.transformOrigin)==null?void 0:me.x,(pe=L.transformOrigin)==null?void 0:pe.y].join(" "),...((he=L.hide)==null?void 0:he.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:t.jsx(gr,{scope:r,placedSide:ce,onArrowChange:D,arrowX:at,arrowY:it,shouldHideArrow:lt,children:t.jsx(C.div,{"data-side":ce,"data-align":ot,...p,ref:w,style:{...p.style,animation:V?void 0:"none"}})})})});Me.displayName=ne;var $e="PopperArrow",br={top:"bottom",right:"left",bottom:"top",left:"right"},He=l.forwardRef(function(s,r){const{__scopePopper:o,...n}=s,a=vr($e,o),c=br[a.placedSide];return t.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:t.jsx(hr,{...n,ref:r,style:{...n.style,display:"block"}})})});He.displayName=$e;function yr(e){return e!==null}var wr=e=>({name:"transformOrigin",options:e,fn(s){var P,x,y;const{placement:r,rects:o,middlewareData:n}=s,c=((P=n.arrow)==null?void 0:P.centerOffset)!==0,i=c?0:e.arrowWidth,d=c?0:e.arrowHeight,[u,f]=We(r),g={start:"0%",center:"50%",end:"100%"}[f],m=(((x=n.arrow)==null?void 0:x.x)??0)+i/2,h=(((y=n.arrow)==null?void 0:y.y)??0)+d/2;let N="",p="";return u==="bottom"?(N=c?g:`${m}px`,p=`${-d}px`):u==="top"?(N=c?g:`${m}px`,p=`${o.floating.height+d}px`):u==="right"?(N=`${-d}px`,p=c?g:`${h}px`):u==="left"&&(N=`${o.floating.width+d}px`,p=c?g:`${h}px`),{data:{x:N,y:p}}}});function We(e){const[s,r="center"]=e.split("-");return[s,r]}var Pr=Le,Ue=ke,Nr=Me,jr=He,Er="Portal",Be=l.forwardRef((e,s)=>{var i;const{container:r,...o}=e,[n,a]=l.useState(!1);Q(()=>a(!0),[]);const c=r||n&&((i=globalThis==null?void 0:globalThis.document)==null?void 0:i.body);return c?At.createPortal(t.jsx(C.div,{...o,ref:s}),c):null});Be.displayName=Er;var oe="Popover",[ze,Jr]=Ne(oe,[Fe]),B=Fe(),[Cr,O]=ze(oe),Ke=e=>{const{__scopePopover:s,children:r,open:o,defaultOpen:n,onOpenChange:a,modal:c=!1}=e,i=B(s),d=l.useRef(null),[u,f]=l.useState(!1),[g=!1,m]=Tt({prop:o,defaultProp:n,onChange:a});return t.jsx(Pr,{...i,children:t.jsx(Cr,{scope:s,contentId:Ft(),triggerRef:d,open:g,onOpenChange:m,onOpenToggle:l.useCallback(()=>m(h=>!h),[m]),hasCustomAnchor:u,onCustomAnchorAdd:l.useCallback(()=>f(!0),[]),onCustomAnchorRemove:l.useCallback(()=>f(!1),[]),modal:c,children:r})})};Ke.displayName=oe;var Ve="PopoverAnchor",Sr=l.forwardRef((e,s)=>{const{__scopePopover:r,...o}=e,n=O(Ve,r),a=B(r),{onCustomAnchorAdd:c,onCustomAnchorRemove:i}=n;return l.useEffect(()=>(c(),()=>i()),[c,i]),t.jsx(Ue,{...a,...o,ref:s})});Sr.displayName=Ve;var Ye="PopoverTrigger",Xe=l.forwardRef((e,s)=>{const{__scopePopover:r,...o}=e,n=O(Ye,r),a=B(r),c=F(s,n.triggerRef),i=t.jsx(C.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":Qe(n.open),...o,ref:c,onClick:R(e.onClick,n.onOpenToggle)});return n.hasCustomAnchor?i:t.jsx(Ue,{asChild:!0,...a,children:i})});Xe.displayName=Ye;var ae="PopoverPortal",[Ar,Rr]=ze(ae,{forceMount:void 0}),Ge=e=>{const{__scopePopover:s,forceMount:r,children:o,container:n}=e,a=O(ae,s);return t.jsx(Ar,{scope:s,forceMount:r,children:t.jsx(je,{present:r||a.open,children:t.jsx(Be,{asChild:!0,container:n,children:o})})})};Ge.displayName=ae;var k="PopoverContent",Je=l.forwardRef((e,s)=>{const r=Rr(k,e.__scopePopover),{forceMount:o=r.forceMount,...n}=e,a=O(k,e.__scopePopover);return t.jsx(je,{present:o||a.open,children:a.modal?t.jsx(Or,{...n,ref:s}):t.jsx(_r,{...n,ref:s})})});Je.displayName=k;var Or=l.forwardRef((e,s)=>{const r=O(k,e.__scopePopover),o=l.useRef(null),n=F(s,o),a=l.useRef(!1);return l.useEffect(()=>{const c=o.current;if(c)return Rt(c)},[]),t.jsx(Ot,{as:re,allowPinchZoom:!0,children:t.jsx(Ze,{...e,ref:n,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:R(e.onCloseAutoFocus,c=>{var i;c.preventDefault(),a.current||(i=r.triggerRef.current)==null||i.focus()}),onPointerDownOutside:R(e.onPointerDownOutside,c=>{const i=c.detail.originalEvent,d=i.button===0&&i.ctrlKey===!0,u=i.button===2||d;a.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:R(e.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1})})})}),_r=l.forwardRef((e,s)=>{const r=O(k,e.__scopePopover),o=l.useRef(!1),n=l.useRef(!1);return t.jsx(Ze,{...e,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var c,i;(c=e.onCloseAutoFocus)==null||c.call(e,a),a.defaultPrevented||(o.current||(i=r.triggerRef.current)==null||i.focus(),a.preventDefault()),o.current=!1,n.current=!1},onInteractOutside:a=>{var d,u;(d=e.onInteractOutside)==null||d.call(e,a),a.defaultPrevented||(o.current=!0,a.detail.originalEvent.type==="pointerdown"&&(n.current=!0));const c=a.target;((u=r.triggerRef.current)==null?void 0:u.contains(c))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&n.current&&a.preventDefault()}})}),Ze=l.forwardRef((e,s)=>{const{__scopePopover:r,trapFocus:o,onOpenAutoFocus:n,onCloseAutoFocus:a,disableOutsidePointerEvents:c,onEscapeKeyDown:i,onPointerDownOutside:d,onFocusOutside:u,onInteractOutside:f,...g}=e,m=O(k,r),h=B(r);return _t(),t.jsx(Re,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:n,onUnmountAutoFocus:a,children:t.jsx(Se,{asChild:!0,disableOutsidePointerEvents:c,onInteractOutside:f,onEscapeKeyDown:i,onPointerDownOutside:d,onFocusOutside:u,onDismiss:()=>m.onOpenChange(!1),children:t.jsx(Nr,{"data-state":Qe(m.open),role:"dialog",id:m.contentId,...h,...g,ref:s,style:{...g.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),qe="PopoverClose",Tr=l.forwardRef((e,s)=>{const{__scopePopover:r,...o}=e,n=O(qe,r);return t.jsx(C.button,{type:"button",...o,ref:s,onClick:R(e.onClick,()=>n.onOpenChange(!1))})});Tr.displayName=qe;var Fr="PopoverArrow",Dr=l.forwardRef((e,s)=>{const{__scopePopover:r,...o}=e,n=B(r);return t.jsx(jr,{...n,...o,ref:s})});Dr.displayName=Fr;function Qe(e){return e?"open":"closed"}var Lr=Ke,Ir=Xe,kr=Ge,et=Je;const Mr=Lr,$r=Ir,tt=l.forwardRef(({className:e,align:s="center",sideOffset:r=4,...o},n)=>t.jsx(kr,{children:t.jsx(et,{ref:n,align:s,sideOffset:r,className:Dt("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...o})}));tt.displayName=et.displayName;function Hr(e){if(e>=1e6)return(e/1e6).toFixed(2).replace(/\.00$/,"")+"M";if(e>=1e3){let s=e/1e3;return(s%1===0?s.toFixed(0):s.toFixed(2).replace(/\.?0+$/,""))+"K"}else return e.toString()}function Wr(e){return e===1?"bg-gradient-to-r from-yellow-400 to-yellow-200 text-yellow-900 border-yellow-400":e===2?"bg-gradient-to-r from-gray-400 to-gray-200 text-gray-900 border-gray-400":e===3?"bg-gradient-to-r from-orange-400 to-orange-200 text-orange-900 border-orange-400":"bg-[#172554] text-[#eff6ff] border-[#172554]"}function Ur(e){return e===1?"🏆":e===2?"🥈":e===3?"🥉":""}function Br(){const[e,s]=l.useState([]),r=async()=>{try{const n=await U.get("sales-encoding",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("access_token")}`}});s(n.data.topPerformers)}catch(n){console.error("Error fetching data:",n)}};l.useEffect(()=>{r()},[]);const o=new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"});return t.jsxs(E,{className:"fade-in-right w-full md:w-full bg-gradient-to-br from-blue-50 via-white to-blue-100 border-0 shadow-xl rounded-2xl",children:[t.jsxs(T,{className:"text-center",children:[t.jsx(A,{className:"text-[#172554] text-2xl font-bold",children:"Top 10 Agents"}),t.jsx(I,{className:"text-blue-700",children:"of the month"})]}),t.jsx(W,{children:t.jsx("div",{className:"grid grid-cols-3 md:grid-cols-3 gap-4 h-56 overflow-auto",children:e.map((n,a)=>t.jsxs("div",{className:"relative flex flex-col items-center rounded-xl transition transform hover:-translate-y-1 p-2 md:p-1",children:[t.jsxs("div",{className:`
                  absolute top-0 left-3 z-50 
                  px-2 rounded-full border-2 font-bold flex items-center gap-1 
                  text-base md:text-xs
                  md:px-1 py-1 md:py-0.5
                  ${Wr(a+1)}
                `,style:{minWidth:36,justifyContent:"center"},children:[Ur(a+1)," ",a+1]}),t.jsxs(Mr,{children:[t.jsx($r,{asChild:!0,className:"cursor-pointer",children:t.jsx("div",{className:`transition-transform duration-200 ${a<3?"ring-4 ring-yellow-300":""} rounded-full`,children:t.jsxs(Lt,{className:"h-14 w-14 md:h-14 md:w-14 border-primary border-4 hover:scale-105 transition bg-transparent",children:[n.profile_pic?t.jsx(It,{src:`https://athomes.site/${n.profile_pic}`,alt:`${n.first_name} ${n.last_name}`,className:"rounded-full border border-border object-cover bg-transparent"}):null,t.jsx(kt,{className:"font-bold text-2xl bg-[#172554] text-[#eff6ff] ",children:n.first_name?n.first_name.charAt(0).toUpperCase():"U"})]})})}),t.jsx(tt,{className:"p-4 bg-white shadow-lg rounded-lg",children:t.jsxs("div",{className:"text-center",children:[t.jsxs("p",{className:"font-semibold text-lg",children:[n.first_name," ",n.middle_name," ",n.last_name]}),t.jsx("p",{className:"text-sm text-muted-foreground",children:n.email||""}),t.jsxs("p",{children:["Total Sales: ",t.jsx("span",{className:"text-green-500 text-sm",children:o.format(n.totalSales)})]}),t.jsxs("p",{children:["Total Reserved: ",t.jsxs("span",{className:"text-green-500 text-sm",children:["+ ",n.totalReserved]})]})]})})]}),t.jsxs("div",{className:"text-center mt-2",children:[t.jsxs("p",{className:"text-sm font-bold text-[#172554]",children:[n.first_name," ",n.last_name]}),t.jsx("p",{className:"text-sm text-blue-700",children:Hr(Number(n.totalSales))})]})]},n.id||a))})})]})}function zr(){const[e,s]=l.useState(0),[r,o]=l.useState(0),[n,a]=l.useState(0),[c,i]=l.useState(0),d=Mt(),u=async()=>{try{const f=await U.get("agent-broker",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("access_token")}`}});s(f.data.agentsListCount||0),o(f.data.pendingAgentsCount||0),a(f.data.agentsLicensedCount||0),i(f.data.agentsUnlicensedCount||0)}catch(f){console.error("Error fetching members:",f),Bt.fire({icon:"error",title:"Error",text:"Failed to fetch data. Please login again.",confirmButtonText:"OK"}),localStorage.clear(),console.clear(),d("/")}};return l.useEffect(()=>{u()},[]),t.jsxs("div",{className:"ml-72 md:ml-0 grid grid-cols-4 md:grid-cols-1 md:gap-2 md:p-5 md:mt-0 gap-2 items-start justify-center mt-5 md:px-5 mr-2",children:[t.jsx(G,{to:"/admin/affialiated",className:"block",children:t.jsx(E,{className:"fade-in-left w-full md:w-full bg-[#eff6ff] border-b-4 border-primary",children:t.jsxs(T,{children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(A,{className:"text-3xl font-bold text-primary animate-bounce",children:e}),t.jsx(J,{icon:$t,className:"ml-2 h-10 text-blue-300"})]}),t.jsx(I,{className:"font-bold text-primary md:text-xs",children:"Total Broker/Agents"})]})})}),t.jsx(G,{to:"/admin/affialiated/pendingRegister",className:"block",children:t.jsx(E,{className:"fade-in-left w-full md:w-full bg-[#eff6ff] border-b-4 border-primary",children:t.jsxs(T,{children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(A,{className:"text-3xl font-bold text-black animate-bounce",children:r}),t.jsx(J,{icon:Ht,className:"ml-2 h-10 text-[#3f3f46]"})]}),t.jsx(I,{className:"font-bold text-black md:text-xs",children:"Pending Register"})]})})}),t.jsx(G,{to:"/admin/affialiated/licensed",className:"block",children:t.jsx(E,{className:"fade-in-left w-full md:w-full bg-[#eff6ff] border-b-4 border-primary",children:t.jsxs(T,{children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(A,{className:"text-3xl font-bold text-green-500 animate-bounce",children:n}),t.jsx(J,{icon:Wt,className:"ml-2 h-10 text-green-200"})]}),t.jsx(I,{className:"font-bold text-green-500 md:text-xs",children:"Total Licensed Affialiated"})]})})}),t.jsx(G,{to:"/admin/affialiated/unlicensed",className:"block",children:t.jsx(E,{className:"fade-in-left w-full md:w-full bg-[#eff6ff] border-b-4 border-primary",children:t.jsxs(T,{children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(A,{className:"text-3xl font-bold text-red-500 animate-bounce",children:c}),t.jsx(J,{icon:Ut,className:"ml-2 h-10 text-red-200"})]}),t.jsx(I,{className:"font-bold text-red-500 md:text-xs",children:"Total Unlicensed Affialiated"})]})})})]})}function Zr(){return t.jsxs("div",{className:"py-5 md:pt-20",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-4xl font-bold ml-72 md:ml-0 md:grid-cols-1 md:gap-2 md:px-5 md:mt-0 md:text-2xl",children:"Dashboard"}),t.jsx(zr,{})]}),t.jsxs("div",{className:"ml-72 md:ml-0 grid grid-cols-2 md:grid-cols-1 md:gap-2 md:p-5 md:mt-0 gap-2 items-start justify-center mt-5 md:px-5 mr-2",children:[t.jsx(Kt,{}),t.jsx(Vt,{})]}),t.jsxs("div",{className:"ml-72 md:ml-0 grid grid-cols-2 md:grid-cols-1 md:gap-2 md:p-5 md:mt-0 gap-2 items-start justify-center mt-5 md:px-5 mr-2",children:[t.jsx(Yt,{}),t.jsx(Br,{})]})]})}export{Zr as default};
