import{j as e,L as O,r as a,u as U,B as u,F as i,ap as W,aq as D,ar as G,al as J,d as Y,S as Z}from"./index-Dk1_FMbU.js";import{c as ee,C as se,b as ae}from"./card-CBUDeD1Y.js";import{B as te,a as le,b as re,c as ne}from"./breadcrumb-D-hm6pqD.js";import{L as oe}from"./label-BBsw-Xlw.js";import{S as ce,a as de,b as ie,c as xe,d as r}from"./select-mnZuAGIz.js";import{I as b}from"./input-lhyLM1nK.js";import{T as me,h as fe,i as g,j as l,k as he,l as t}from"./dialog-CJKaJoWJ.js";import{V as ue}from"./ViewReceipt-B3_eSgcJ.js";function be(){return e.jsx("div",{className:"bg-gradient-to-r from-blue-900 via-blue-800 to-blue-700 shadow-lg flex flex-row items-center gap-4 p-4 rounded-xl mb-8 border border-blue-800/40",children:e.jsx("div",{className:"flex flex-col items-start md:items-center md:justify-center md:ml-10 text-accent fade-in-right w-full",children:e.jsx(te,{children:e.jsxs(le,{children:[e.jsx(re,{className:"text-accent",children:e.jsx(O,{to:"/admin/sales-repor",children:"Sales Report"})}),e.jsx(ne,{})]})})})})}function Ce(){const[x,T]=a.useState([]),[n,j]=a.useState(""),[p,w]=a.useState(10),[m,N]=a.useState(""),[f,y]=a.useState(""),[S,A]=a.useState(""),[v,I]=a.useState(""),[C,E]=a.useState(""),[F,R]=a.useState(!1),k=U(),B=async()=>{try{const s=await Y.get("sales-encoding",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("access_token")}`}});T(s.data.salesEncodingReports)}catch(s){console.error("Error fetching data:",s),Z.fire({icon:"error",title:"Error",text:"Failed to fetching data. Please login again.",confirmButtonText:"OK"}),localStorage.clear(),console.clear(),k("/")}};a.useEffect(()=>{B()},[]);const H=s=>s>=1e6?`${(s/1e6).toFixed(2)} M`:s>=1e3?`${(s/1e3).toFixed(2)} K`:h.format(s),_=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"2-digit"}),h=new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}),M=s=>{j(s.target.value)},$=s=>{w(s==="all"?x.length:parseInt(s,10))},P=s=>{N(s.target.value)},z=s=>{y(s.target.value)},L=x.filter(s=>{const c=`${s.agent.personal_info.first_name} ${s.agent.personal_info.middle_name} ${s.agent.personal_info.last_name}`.toLowerCase(),d=new Date(s.date_on_sale),K=(!m||d>=new Date(m))&&(!f||d<=new Date(f)),Q=!S||s.agent.id===S,X=!v||s.category===v,q=!C||s.remarks.toLowerCase()===C.toLowerCase();return K&&Q&&X&&q&&(s.agent.user.acct_number.toLowerCase().includes(n.toLowerCase())||s.client_name.toLowerCase().includes(n.toLowerCase())||c.includes(n.toLowerCase())||s.category.toLowerCase().includes(n.toLowerCase()))}),o=L.slice(0,p),V=o.reduce((s,c)=>{const d=parseFloat(c.amount);return s+(isNaN(d)?0:d)},0);return e.jsxs("div",{className:"relative min-h-screen w-full flex flex-col md:flex-row gap-4 bg-gradient-to-br overflow-x-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-96 h-96 opacity-20 rounded-full blur-3xl -z-10 animate-pulse"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 opacity-20 rounded-full blur-3xl -z-10 animate-pulse"}),e.jsxs("div",{className:"ml-72 md:ml-0 gap-2 items-start justify-center mr-5 md:px-2 relative",children:[e.jsx(be,{}),e.jsxs(ee,{className:"bg-white/60 border-b-4 border-primary md:w-[380px] fade-in-left rounded-2xl shadow-2xl backdrop-blur-lg transition-all duration-300 hover:shadow-blue-200",children:[e.jsx(se,{children:e.jsxs("div",{className:"w-full flex flex-row md:flex-col md:items-start gap-4",children:[e.jsxs("div",{className:"flex flex-col w-[700px] md:w-[152px]",children:[e.jsx(oe,{className:"text-xs font-semibold text-blue-900 mb-1",children:"Date Range"}),e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsx(b,{type:"date",className:"w-full bg-white/80 border border-primary focus:ring-2 focus:ring-blue-300 transition text-xs",placeholder:"Start Date",value:m,onChange:P}),e.jsx("span",{className:"flex items-center text-gray-400",children:"-"}),e.jsx(b,{type:"date",className:"w-full bg-white/80 border border-primary focus:ring-2 focus:ring-blue-300 transition text-xs",placeholder:"End Date",value:f,onChange:z})]})]}),e.jsxs("div",{className:"flex flex-row w-full gap-2 md:grid md:grid-cols-3 md:w-full mt-5",children:[e.jsxs(u,{onMouseEnter:()=>R(!0),onMouseLeave:()=>R(!1),onClick:()=>{w(x.length),j(""),N(""),y(""),A(""),I(""),E("")},className:"flex items-center gap-2 bg-blue-500 text-white hover:bg-blue-400 transition text-xs px-3 py-2 rounded-lg",children:[e.jsx(i,{icon:W,className:`${F?"animate-spin":""}`}),"Refresh"]}),e.jsxs(u,{className:"bg-red-500 text-white hover:bg-red-400 flex items-center gap-2 transition text-xs px-3 py-2 rounded-lg",children:[e.jsx(i,{icon:D}),"PDF"]}),e.jsxs(u,{className:"bg-green-500 text-white hover:bg-green-400 flex items-center gap-2 transition text-xs px-3 py-2 rounded-lg",children:[e.jsx(i,{icon:D}),"Excel"]})]})]})}),e.jsxs(ae,{children:[e.jsx("div",{className:"flex flex-col md:flex-row md:justify-between justify-between gap-4",children:e.jsxs("div",{className:"py-2 flex flex-row justify-between gap-4",children:[e.jsxs(ce,{onValueChange:$,children:[e.jsxs(de,{className:"w-[120px] border border-primary md:w-28",children:[e.jsx("span",{className:"text-[#172554]",children:"Show"}),e.jsx(ie,{placeholder:"All"})]}),e.jsxs(xe,{children:[e.jsx(r,{value:"all",children:"All"}),e.jsx(r,{value:"10",children:"10"}),e.jsx(r,{value:"20",children:"20"}),e.jsx(r,{value:"30",children:"30"}),e.jsx(r,{value:"40",children:"40"}),e.jsx(r,{value:"50",children:"50"})]})]}),e.jsx(b,{type:"text",placeholder:"Search",className:"w-52 md:w-full",value:n,onChange:M})]})}),e.jsx("div",{className:"fade-in-left ",children:e.jsxs(me,{children:[e.jsx(fe,{className:"bg-primary text-base",children:e.jsxs(g,{children:[e.jsx(l,{children:"#"}),e.jsx(l,{children:"Account No."}),e.jsx(l,{children:"Affiliated"}),e.jsx(l,{children:"Client name"}),e.jsx(l,{children:"Category"}),e.jsx(l,{children:"Reservation date"}),e.jsx(l,{children:"Location"}),e.jsx(l,{children:"Amount"}),e.jsx(l,{className:"text-right",children:"Action"})]})}),e.jsxs(he,{children:[o.length===0&&e.jsx(g,{children:e.jsx(t,{colSpan:10,className:"text-center",children:"No data found."})}),o.map((s,c)=>e.jsxs(g,{children:[e.jsx(t,{className:"font-medium border border-[#bfdbfe]",children:c+1}),e.jsx(t,{className:"font-medium border border-[#bfdbfe]",children:s.agent.user.acct_number}),e.jsxs(t,{className:"border border-[#bfdbfe]",children:[s.agent.personal_info.first_name," ",s.agent.personal_info.middle_name," ",s.agent.personal_info.last_name]}),e.jsx(t,{className:"border border-[#bfdbfe]",children:s.client_name}),e.jsx(t,{className:"border border-[#bfdbfe]",children:s.category}),e.jsx(t,{className:"border border-[#bfdbfe]",children:_.format(new Date(s.date_on_sale))}),e.jsx(t,{className:"border border-[#bfdbfe]",children:s.location}),e.jsx(t,{className:"border border-[#bfdbfe]",children:h.format(s.amount)}),e.jsx(t,{className:"text-right border border-[#bfdbfe]",children:e.jsx("div",{className:"flex flex-row gap-1 justify-end",children:e.jsx(ue,{sales:s,dateFormatter:_,currencyFormatter:h})})})]},s.id))]})]})}),e.jsx("div",{className:"flex flex-row justify-end mt-3",children:e.jsx("div",{children:e.jsxs("p",{className:"text-[#172554] text-sm w-full",children:["Showing 1 to ",Math.min(p,o.length)," of ",L.length," entries"]})})}),e.jsxs("div",{className:"grid grid-cols-4 md:grid-cols-2 gap-3 mt-6 ",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-blue-100 border border-blue-300 rounded-full px-4 py-2 shadow-sm",children:[e.jsx(i,{icon:G,className:"text-blue-700 h-5"}),e.jsx("span",{className:"font-bold text-blue-900 text-base",children:H(V)}),e.jsx("span",{className:"text-xs text-blue-700 font-semibold ml-1",children:"Total Sales"})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 border border-blue-200 rounded-full px-4 py-2 shadow-sm",children:[e.jsx(i,{icon:J,className:"text-blue-700 h-5"}),e.jsx("span",{className:"font-bold text-blue-900 text-base",children:o.length}),e.jsx("span",{className:"text-xs text-blue-700 font-semibold ml-1",children:"Total Reservation"})]})]})]})]})]}),e.jsx("style",{children:`
          .fade-in-left {
            animation: fadeInLeft 0.7s cubic-bezier(.39,.575,.565,1) both;
          }
          @keyframes fadeInLeft {
            0% { opacity: 0; transform: translateX(-40px);}
            100% { opacity: 1; transform: translateX(0);}
          }
        `})]})}export{Ce as default};
