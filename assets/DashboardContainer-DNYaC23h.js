import{r as i,j as t,c as W,h as vt,i as bt,k as F,l as yt,m as O,n as B,o as Ne,p as Pt,q as Et,s as Ct,t as jt,v as wt,w as Nt,x as At,y as Rt,z as St,A as re,C as Ot,D as Tt,P as Ae,E as _t,G as Ft,H as Dt,I as It,J as Lt,K as kt,M as Mt,N as $t,O as Ht,u as Ut,L as G,F as Z,Q as Bt,T as Wt,U as zt,V as Kt,S as Vt}from"./index-Bg6bGyZ4.js";/* empty css              */import{c as A,C as R,a as S,b as q,d as k}from"./card-DYp__y4E.js";import{C as Re}from"./react-apexcharts.min-BCFY5hEw.js";import{T as Xt,a as Yt,b as Q,c as U,d as Jt,e as L}from"./table-Bt9KMKLe.js";const Gt=()=>{const[e,s]=i.useState(!1),[n,o]=i.useState(Array(12).fill(0)),r=async()=>{try{const c=(await W.get("sales-encoding",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("access_token")}`}})).data.salesEncoding.map(d=>({...d,amount:typeof d.amount=="number"?d.amount:parseFloat(d.amount)})),f=Array(12).fill(0);c.forEach(d=>{const u=new Date(d.date_on_sale).getMonth();f[u]+=d.amount}),o(f)}catch(l){console.error("Error fetching data:",l)}};i.useEffect(()=>{r()},[]);const a={series:[{name:"Sales",data:n}],options:{chart:{type:"line",height:350},xaxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},stroke:{curve:"smooth"},title:{text:"Sales from January to December",align:"left"},tooltip:{y:{formatter:l=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(l)}}}};return i.useEffect(()=>{s(!0)},[]),t.jsx(t.Fragment,{children:t.jsxs(A,{className:"fade-in-left w-full md:w-full bg-[#eff6ff] border-b-4 border-primary",children:[t.jsx(R,{children:t.jsx(S,{className:"text-[#172554]",children:"Overall Sales"})}),t.jsx(q,{children:e&&t.jsx(Re,{options:a.options,series:a.series,type:"line",height:350})})]})})},Zt=()=>{const[e,s]=i.useState(!1),[n,o]=i.useState({series:[{name:"Total Reservation",data:[]}],options:{chart:{type:"bar",height:350},xaxis:{categories:[]},title:{text:"Top Reservation Housing of this Month",align:"left"}}});return i.useEffect(()=>{s(!0),W.get("sales-encoding",{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}}).then(r=>{const a=r.data.salesdashboard,l=a.map(f=>f.category),c=a.map(f=>f.totalReserved);o({series:[{name:"Total Reservation",data:c}],options:{...n.options,xaxis:{categories:l}}})}).catch(r=>{console.error("Error fetching data:",r)})},[]),t.jsx(t.Fragment,{children:t.jsxs(A,{className:"fade-in-right w-full md:w-full bg-[#eff6ff] border-b-4 border-primary",children:[t.jsx(R,{children:t.jsx(S,{className:"text-[#172554]",children:"Top Housing Category"})}),t.jsx(q,{children:e&&t.jsx(Re,{options:n.options,series:n.series,type:"bar",height:350})})]})})};function qt(){const[e,s]=i.useState([]),n=async()=>{try{const r=await W.get("sales-encoding",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("access_token")}`}});s(r.data.topPerformers)}catch(r){console.error("Error fetching data:",r)}};i.useEffect(()=>{n()},[]);const o=new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"});return t.jsx(t.Fragment,{children:t.jsxs(A,{className:"fade-in-left w-full md:w-full bg-[#eff6ff] border-b-4 border-primary ",children:[t.jsxs(R,{children:[t.jsx(S,{children:"Top Performers"}),t.jsx(k,{children:"of this month"})]}),t.jsx(q,{children:t.jsxs(Xt,{children:[t.jsx(Yt,{children:t.jsxs(Q,{children:[t.jsx(U,{children:"Rank"}),t.jsx(U,{children:"Affiliated"}),t.jsx(U,{children:"Role"}),t.jsx(U,{children:"Total Reserved"}),t.jsx(U,{children:"Total Sales"})]})}),t.jsxs(Jt,{children:[e.length===0&&t.jsx(Q,{children:t.jsx(L,{className:"text-center border",colSpan:5,children:"No data available."})}),e.map((r,a)=>t.jsxs(Q,{children:[t.jsx(L,{className:"font-medium border border-[#bfdbfe]",children:a+1}),t.jsxs(L,{className:"font-medium border border-[#bfdbfe]",children:[r.first_name," ",r.middle_name," ",r.last_name," ",r.extension_name]}),t.jsx(L,{className:"text-right border border-[#bfdbfe]",children:r.role}),t.jsx(L,{className:"text-right border border-[#bfdbfe]",children:r.totalReserved}),t.jsx(L,{className:"text-right border border-[#bfdbfe]",children:o.format(r.totalSales)})]},r.id))]})]})})]})})}var oe=i.forwardRef((e,s)=>{const{children:n,...o}=e,r=i.Children.toArray(n),a=r.find(er);if(a){const l=a.props.children,c=r.map(f=>f===a?i.Children.count(l)>1?i.Children.only(null):i.isValidElement(l)?l.props.children:null:f);return t.jsx(ne,{...o,ref:s,children:i.isValidElement(l)?i.cloneElement(l,void 0,c):null})}return t.jsx(ne,{...o,ref:s,children:n})});oe.displayName="Slot";var ne=i.forwardRef((e,s)=>{const{children:n,...o}=e;if(i.isValidElement(n)){const r=rr(n),a=tr(o,n.props);return n.type!==i.Fragment&&(a.ref=s?vt(s,r):r),i.cloneElement(n,a)}return i.Children.count(n)>1?i.Children.only(null):null});ne.displayName="SlotClone";var Qt=({children:e})=>t.jsx(t.Fragment,{children:e});function er(e){return i.isValidElement(e)&&e.type===Qt}function tr(e,s){const n={...s};for(const o in s){const r=e[o],a=s[o];/^on[A-Z]/.test(o)?r&&a?n[o]=(...c)=>{a(...c),r(...c)}:r&&(n[o]=r):o==="style"?n[o]={...r,...a}:o==="className"&&(n[o]=[r,a].filter(Boolean).join(" "))}return{...e,...n}}function rr(e){var o,r;let s=(o=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:o.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?e.ref:(s=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var nr=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],w=nr.reduce((e,s)=>{const n=i.forwardRef((o,r)=>{const{asChild:a,...l}=o,c=a?oe:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),t.jsx(c,{...l,ref:r})});return n.displayName=`Primitive.${s}`,{...e,[s]:n}},{});function sr(e,s){e&&bt.flushSync(()=>e.dispatchEvent(s))}var or="DismissableLayer",se="dismissableLayer.update",ar="dismissableLayer.pointerDownOutside",ir="dismissableLayer.focusOutside",ye,Se=i.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Oe=i.forwardRef((e,s)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:o,onPointerDownOutside:r,onFocusOutside:a,onInteractOutside:l,onDismiss:c,...f}=e,d=i.useContext(Se),[u,v]=i.useState(null),m=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=i.useState({}),C=F(s,x=>v(x)),p=Array.from(d.layers),[E]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),h=p.indexOf(E),y=u?p.indexOf(u):-1,P=d.layersWithOutsidePointerEventsDisabled.size>0,b=y>=h,D=dr(x=>{const _=x.target,K=[...d.branches].some($=>$.contains(_));!b||K||(r==null||r(x),l==null||l(x),x.defaultPrevented||c==null||c())},m),j=ur(x=>{const _=x.target;[...d.branches].some($=>$.contains(_))||(a==null||a(x),l==null||l(x),x.defaultPrevented||c==null||c())},m);return yt(x=>{y===d.layers.size-1&&(o==null||o(x),!x.defaultPrevented&&c&&(x.preventDefault(),c()))},m),i.useEffect(()=>{if(u)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(ye=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),Pe(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=ye)}},[u,m,n,d]),i.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),Pe())},[u,d]),i.useEffect(()=>{const x=()=>g({});return document.addEventListener(se,x),()=>document.removeEventListener(se,x)},[]),t.jsx(w.div,{...f,ref:C,style:{pointerEvents:P?b?"auto":"none":void 0,...e.style},onFocusCapture:O(e.onFocusCapture,j.onFocusCapture),onBlurCapture:O(e.onBlurCapture,j.onBlurCapture),onPointerDownCapture:O(e.onPointerDownCapture,D.onPointerDownCapture)})});Oe.displayName=or;var cr="DismissableLayerBranch",lr=i.forwardRef((e,s)=>{const n=i.useContext(Se),o=i.useRef(null),r=F(s,o);return i.useEffect(()=>{const a=o.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),t.jsx(w.div,{...e,ref:r})});lr.displayName=cr;function dr(e,s=globalThis==null?void 0:globalThis.document){const n=B(e),o=i.useRef(!1),r=i.useRef(()=>{});return i.useEffect(()=>{const a=c=>{if(c.target&&!o.current){let f=function(){Te(ar,n,d,{discrete:!0})};const d={originalEvent:c};c.pointerType==="touch"?(s.removeEventListener("click",r.current),r.current=f,s.addEventListener("click",r.current,{once:!0})):f()}else s.removeEventListener("click",r.current);o.current=!1},l=window.setTimeout(()=>{s.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(l),s.removeEventListener("pointerdown",a),s.removeEventListener("click",r.current)}},[s,n]),{onPointerDownCapture:()=>o.current=!0}}function ur(e,s=globalThis==null?void 0:globalThis.document){const n=B(e),o=i.useRef(!1);return i.useEffect(()=>{const r=a=>{a.target&&!o.current&&Te(ir,n,{originalEvent:a},{discrete:!1})};return s.addEventListener("focusin",r),()=>s.removeEventListener("focusin",r)},[s,n]),{onFocusCapture:()=>o.current=!0,onBlurCapture:()=>o.current=!1}}function Pe(){const e=new CustomEvent(se);document.dispatchEvent(e)}function Te(e,s,n,{discrete:o}){const r=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});s&&r.addEventListener(e,s,{once:!0}),o?sr(r,a):r.dispatchEvent(a)}var ee="focusScope.autoFocusOnMount",te="focusScope.autoFocusOnUnmount",Ee={bubbles:!1,cancelable:!0},fr="FocusScope",_e=i.forwardRef((e,s)=>{const{loop:n=!1,trapped:o=!1,onMountAutoFocus:r,onUnmountAutoFocus:a,...l}=e,[c,f]=i.useState(null),d=B(r),u=B(a),v=i.useRef(null),m=F(s,p=>f(p)),g=i.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;i.useEffect(()=>{if(o){let p=function(P){if(g.paused||!c)return;const b=P.target;c.contains(b)?v.current=b:N(v.current,{select:!0})},E=function(P){if(g.paused||!c)return;const b=P.relatedTarget;b!==null&&(c.contains(b)||N(v.current,{select:!0}))},h=function(P){if(document.activeElement===document.body)for(const D of P)D.removedNodes.length>0&&N(c)};document.addEventListener("focusin",p),document.addEventListener("focusout",E);const y=new MutationObserver(h);return c&&y.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",E),y.disconnect()}}},[o,c,g.paused]),i.useEffect(()=>{if(c){je.add(g);const p=document.activeElement;if(!c.contains(p)){const h=new CustomEvent(ee,Ee);c.addEventListener(ee,d),c.dispatchEvent(h),h.defaultPrevented||(pr(vr(Fe(c)),{select:!0}),document.activeElement===p&&N(c))}return()=>{c.removeEventListener(ee,d),setTimeout(()=>{const h=new CustomEvent(te,Ee);c.addEventListener(te,u),c.dispatchEvent(h),h.defaultPrevented||N(p??document.body,{select:!0}),c.removeEventListener(te,u),je.remove(g)},0)}}},[c,d,u,g]);const C=i.useCallback(p=>{if(!n&&!o||g.paused)return;const E=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,h=document.activeElement;if(E&&h){const y=p.currentTarget,[P,b]=mr(y);P&&b?!p.shiftKey&&h===b?(p.preventDefault(),n&&N(P,{select:!0})):p.shiftKey&&h===P&&(p.preventDefault(),n&&N(b,{select:!0})):h===y&&p.preventDefault()}},[n,o,g.paused]);return t.jsx(w.div,{tabIndex:-1,...l,ref:m,onKeyDown:C})});_e.displayName=fr;function pr(e,{select:s=!1}={}){const n=document.activeElement;for(const o of e)if(N(o,{select:s}),document.activeElement!==n)return}function mr(e){const s=Fe(e),n=Ce(s,e),o=Ce(s.reverse(),e);return[n,o]}function Fe(e){const s=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:o=>{const r=o.tagName==="INPUT"&&o.type==="hidden";return o.disabled||o.hidden||r?NodeFilter.FILTER_SKIP:o.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)s.push(n.currentNode);return s}function Ce(e,s){for(const n of e)if(!hr(n,{upTo:s}))return n}function hr(e,{upTo:s}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(s!==void 0&&e===s)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function xr(e){return e instanceof HTMLInputElement&&"select"in e}function N(e,{select:s=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&xr(e)&&s&&e.select()}}var je=gr();function gr(){let e=[];return{add(s){const n=e[0];s!==n&&(n==null||n.pause()),e=we(e,s),e.unshift(s)},remove(s){var n;e=we(e,s),(n=e[0])==null||n.resume()}}}function we(e,s){const n=[...e],o=n.indexOf(s);return o!==-1&&n.splice(o,1),n}function vr(e){return e.filter(s=>s.tagName!=="A")}var br="Arrow",De=i.forwardRef((e,s)=>{const{children:n,width:o=10,height:r=5,...a}=e;return t.jsx(w.svg,{...a,ref:s,width:o,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:t.jsx("polygon",{points:"0,0 30,0 15,10"})})});De.displayName=br;var yr=De,ae="Popper",[Ie,Le]=Ne(ae),[Pr,ke]=Ie(ae),Me=e=>{const{__scopePopper:s,children:n}=e,[o,r]=i.useState(null);return t.jsx(Pr,{scope:s,anchor:o,onAnchorChange:r,children:n})};Me.displayName=ae;var $e="PopperAnchor",He=i.forwardRef((e,s)=>{const{__scopePopper:n,virtualRef:o,...r}=e,a=ke($e,n),l=i.useRef(null),c=F(s,l);return i.useEffect(()=>{a.onAnchorChange((o==null?void 0:o.current)||l.current)}),o?null:t.jsx(w.div,{...r,ref:c})});He.displayName=$e;var ie="PopperContent",[Er,Cr]=Ie(ie),Ue=i.forwardRef((e,s)=>{var pe,me,he,xe,ge,ve;const{__scopePopper:n,side:o="bottom",sideOffset:r=0,align:a="center",alignOffset:l=0,arrowPadding:c=0,avoidCollisions:f=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:v="partial",hideWhenDetached:m=!1,updatePositionStrategy:g="optimized",onPlaced:C,...p}=e,E=ke(ie,n),[h,y]=i.useState(null),P=F(s,H=>y(H)),[b,D]=i.useState(null),j=Pt(b),x=(j==null?void 0:j.width)??0,_=(j==null?void 0:j.height)??0,K=o+(a!=="center"?"-"+a:""),$=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},de=Array.isArray(d)?d:[d],ot=de.length>0,V={padding:$,boundary:de.filter(wr),altBoundary:ot},{refs:at,floatingStyles:ue,placement:it,isPositioned:X,middlewareData:I}=Et({strategy:"fixed",placement:K,whileElementsMounted:(...H)=>Ct(...H,{animationFrame:g==="always"}),elements:{reference:E.anchor},middleware:[jt({mainAxis:r+_,alignmentAxis:l}),f&&wt({mainAxis:!0,crossAxis:!1,limiter:v==="partial"?Ot():void 0,...V}),f&&Nt({...V}),At({...V,apply:({elements:H,rects:be,availableWidth:mt,availableHeight:ht})=>{const{width:xt,height:gt}=be.reference,J=H.floating.style;J.setProperty("--radix-popper-available-width",`${mt}px`),J.setProperty("--radix-popper-available-height",`${ht}px`),J.setProperty("--radix-popper-anchor-width",`${xt}px`),J.setProperty("--radix-popper-anchor-height",`${gt}px`)}}),b&&Rt({element:b,padding:c}),Nr({arrowWidth:x,arrowHeight:_}),m&&St({strategy:"referenceHidden",...V})]}),[fe,ct]=ze(it),Y=B(C);re(()=>{X&&(Y==null||Y())},[X,Y]);const lt=(pe=I.arrow)==null?void 0:pe.x,dt=(me=I.arrow)==null?void 0:me.y,ut=((he=I.arrow)==null?void 0:he.centerOffset)!==0,[ft,pt]=i.useState();return re(()=>{h&&pt(window.getComputedStyle(h).zIndex)},[h]),t.jsx("div",{ref:at.setFloating,"data-radix-popper-content-wrapper":"",style:{...ue,transform:X?ue.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ft,"--radix-popper-transform-origin":[(xe=I.transformOrigin)==null?void 0:xe.x,(ge=I.transformOrigin)==null?void 0:ge.y].join(" "),...((ve=I.hide)==null?void 0:ve.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:t.jsx(Er,{scope:n,placedSide:fe,onArrowChange:D,arrowX:lt,arrowY:dt,shouldHideArrow:ut,children:t.jsx(w.div,{"data-side":fe,"data-align":ct,...p,ref:P,style:{...p.style,animation:X?void 0:"none"}})})})});Ue.displayName=ie;var Be="PopperArrow",jr={top:"bottom",right:"left",bottom:"top",left:"right"},We=i.forwardRef(function(s,n){const{__scopePopper:o,...r}=s,a=Cr(Be,o),l=jr[a.placedSide];return t.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:t.jsx(yr,{...r,ref:n,style:{...r.style,display:"block"}})})});We.displayName=Be;function wr(e){return e!==null}var Nr=e=>({name:"transformOrigin",options:e,fn(s){var E,h,y;const{placement:n,rects:o,middlewareData:r}=s,l=((E=r.arrow)==null?void 0:E.centerOffset)!==0,c=l?0:e.arrowWidth,f=l?0:e.arrowHeight,[d,u]=ze(n),v={start:"0%",center:"50%",end:"100%"}[u],m=(((h=r.arrow)==null?void 0:h.x)??0)+c/2,g=(((y=r.arrow)==null?void 0:y.y)??0)+f/2;let C="",p="";return d==="bottom"?(C=l?v:`${m}px`,p=`${-f}px`):d==="top"?(C=l?v:`${m}px`,p=`${o.floating.height+f}px`):d==="right"?(C=`${-f}px`,p=l?v:`${g}px`):d==="left"&&(C=`${o.floating.width+f}px`,p=l?v:`${g}px`),{data:{x:C,y:p}}}});function ze(e){const[s,n="center"]=e.split("-");return[s,n]}var Ar=Me,Ke=He,Rr=Ue,Sr=We,Or="Portal",Ve=i.forwardRef((e,s)=>{var c;const{container:n,...o}=e,[r,a]=i.useState(!1);re(()=>a(!0),[]);const l=n||r&&((c=globalThis==null?void 0:globalThis.document)==null?void 0:c.body);return l?Tt.createPortal(t.jsx(w.div,{...o,ref:s}),l):null});Ve.displayName=Or;var ce="Popover",[Xe,Qr]=Ne(ce,[Le]),z=Le(),[Tr,T]=Xe(ce),Ye=e=>{const{__scopePopover:s,children:n,open:o,defaultOpen:r,onOpenChange:a,modal:l=!1}=e,c=z(s),f=i.useRef(null),[d,u]=i.useState(!1),[v=!1,m]=It({prop:o,defaultProp:r,onChange:a});return t.jsx(Ar,{...c,children:t.jsx(Tr,{scope:s,contentId:Lt(),triggerRef:f,open:v,onOpenChange:m,onOpenToggle:i.useCallback(()=>m(g=>!g),[m]),hasCustomAnchor:d,onCustomAnchorAdd:i.useCallback(()=>u(!0),[]),onCustomAnchorRemove:i.useCallback(()=>u(!1),[]),modal:l,children:n})})};Ye.displayName=ce;var Je="PopoverAnchor",_r=i.forwardRef((e,s)=>{const{__scopePopover:n,...o}=e,r=T(Je,n),a=z(n),{onCustomAnchorAdd:l,onCustomAnchorRemove:c}=r;return i.useEffect(()=>(l(),()=>c()),[l,c]),t.jsx(Ke,{...a,...o,ref:s})});_r.displayName=Je;var Ge="PopoverTrigger",Ze=i.forwardRef((e,s)=>{const{__scopePopover:n,...o}=e,r=T(Ge,n),a=z(n),l=F(s,r.triggerRef),c=t.jsx(w.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":rt(r.open),...o,ref:l,onClick:O(e.onClick,r.onOpenToggle)});return r.hasCustomAnchor?c:t.jsx(Ke,{asChild:!0,...a,children:c})});Ze.displayName=Ge;var le="PopoverPortal",[Fr,Dr]=Xe(le,{forceMount:void 0}),qe=e=>{const{__scopePopover:s,forceMount:n,children:o,container:r}=e,a=T(le,s);return t.jsx(Fr,{scope:s,forceMount:n,children:t.jsx(Ae,{present:n||a.open,children:t.jsx(Ve,{asChild:!0,container:r,children:o})})})};qe.displayName=le;var M="PopoverContent",Qe=i.forwardRef((e,s)=>{const n=Dr(M,e.__scopePopover),{forceMount:o=n.forceMount,...r}=e,a=T(M,e.__scopePopover);return t.jsx(Ae,{present:o||a.open,children:a.modal?t.jsx(Ir,{...r,ref:s}):t.jsx(Lr,{...r,ref:s})})});Qe.displayName=M;var Ir=i.forwardRef((e,s)=>{const n=T(M,e.__scopePopover),o=i.useRef(null),r=F(s,o),a=i.useRef(!1);return i.useEffect(()=>{const l=o.current;if(l)return _t(l)},[]),t.jsx(Ft,{as:oe,allowPinchZoom:!0,children:t.jsx(et,{...e,ref:r,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:O(e.onCloseAutoFocus,l=>{var c;l.preventDefault(),a.current||(c=n.triggerRef.current)==null||c.focus()}),onPointerDownOutside:O(e.onPointerDownOutside,l=>{const c=l.detail.originalEvent,f=c.button===0&&c.ctrlKey===!0,d=c.button===2||f;a.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:O(e.onFocusOutside,l=>l.preventDefault(),{checkForDefaultPrevented:!1})})})}),Lr=i.forwardRef((e,s)=>{const n=T(M,e.__scopePopover),o=i.useRef(!1),r=i.useRef(!1);return t.jsx(et,{...e,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var l,c;(l=e.onCloseAutoFocus)==null||l.call(e,a),a.defaultPrevented||(o.current||(c=n.triggerRef.current)==null||c.focus(),a.preventDefault()),o.current=!1,r.current=!1},onInteractOutside:a=>{var f,d;(f=e.onInteractOutside)==null||f.call(e,a),a.defaultPrevented||(o.current=!0,a.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const l=a.target;((d=n.triggerRef.current)==null?void 0:d.contains(l))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&r.current&&a.preventDefault()}})}),et=i.forwardRef((e,s)=>{const{__scopePopover:n,trapFocus:o,onOpenAutoFocus:r,onCloseAutoFocus:a,disableOutsidePointerEvents:l,onEscapeKeyDown:c,onPointerDownOutside:f,onFocusOutside:d,onInteractOutside:u,...v}=e,m=T(M,n),g=z(n);return Dt(),t.jsx(_e,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:r,onUnmountAutoFocus:a,children:t.jsx(Oe,{asChild:!0,disableOutsidePointerEvents:l,onInteractOutside:u,onEscapeKeyDown:c,onPointerDownOutside:f,onFocusOutside:d,onDismiss:()=>m.onOpenChange(!1),children:t.jsx(Rr,{"data-state":rt(m.open),role:"dialog",id:m.contentId,...g,...v,ref:s,style:{...v.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),tt="PopoverClose",kr=i.forwardRef((e,s)=>{const{__scopePopover:n,...o}=e,r=T(tt,n);return t.jsx(w.button,{type:"button",...o,ref:s,onClick:O(e.onClick,()=>r.onOpenChange(!1))})});kr.displayName=tt;var Mr="PopoverArrow",$r=i.forwardRef((e,s)=>{const{__scopePopover:n,...o}=e,r=z(n);return t.jsx(Sr,{...r,...o,ref:s})});$r.displayName=Mr;function rt(e){return e?"open":"closed"}var Hr=Ye,Ur=Ze,Br=qe,nt=Qe;const Wr=Hr,zr=Ur,st=i.forwardRef(({className:e,align:s="center",sideOffset:n=4,...o},r)=>t.jsx(Br,{children:t.jsx(nt,{ref:r,align:s,sideOffset:n,className:kt("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...o})}));st.displayName=nt.displayName;function Kr(e){if(e>=1e6)return(e/1e6).toFixed(2).replace(/\.00$/,"")+"M";if(e>=1e3){let s=e/1e3;return(s%1===0?s.toFixed(0):s.toFixed(2).replace(/\.?0+$/,""))+"K"}else return e.toString()}function Vr(){const[e,s]=i.useState([]),n=async()=>{try{const r=await W.get("sales-encoding",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("access_token")}`}});s(r.data.topPerformers)}catch(r){console.error("Error fetching data:",r)}};i.useEffect(()=>{n()},[]);const o=new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"});return t.jsxs(A,{className:"fade-in-right w-full md:w-full bg-[#eff6ff] border-b-4 border-primary",children:[t.jsxs(R,{className:"text-center",children:[t.jsx(S,{children:"Top 10 Agents"}),t.jsx(k,{children:"of the month"})]}),t.jsx(q,{children:t.jsx("div",{className:"grid grid-cols-5 md:grid-cols-3 gap-4 h-56 overflow-auto",children:e.map((r,a)=>t.jsxs("div",{className:"relative flex flex-col items-center",children:[t.jsx("div",{className:"absolute top-0 left-3 bg-[#172554] rounded-full z-50 px-2 py-1 text-[#eff6ff]",children:a+1}),t.jsxs(Wr,{children:[t.jsx(zr,{asChild:!0,className:"cursor-pointer",children:t.jsxs(Mt,{className:"h-12 w-12 md:h-12 md:w-12 border-primary border-4 ",children:[r.profile_pic?t.jsx($t,{src:`https://athomes.site/${r.profile_pic}`,alt:`${r.first_name} ${r.last_name}`,className:"rounded-full border border-border object-cover"}):null,t.jsx(Ht,{className:"font-bold text-2xl bg-[#172554] text-[#eff6ff] ",children:r.first_name?r.first_name.charAt(0).toUpperCase():"U"})]})}),t.jsx(st,{className:"p-4 bg-white shadow-lg rounded-lg",children:t.jsxs("div",{className:"text-center",children:[t.jsxs("p",{className:"font-semibold",children:[r.first_name," ",r.middle_name," ",r.last_name]}),t.jsx("p",{className:"text-sm text-muted-foreground",children:r.email||""}),t.jsxs("p",{children:["Total Sales: ",t.jsx("span",{className:"text-green-500 text-sm",children:o.format(r.totalSales)})]}),t.jsxs("p",{children:["Total Reserved: ",t.jsxs("span",{className:"text-green-500 text-sm",children:["+ ",r.totalReserved]})]})]})})]}),t.jsxs("div",{className:"text-center mt-2",children:[t.jsxs("p",{className:"text-sm font-bold",children:[r.first_name," ",r.last_name]}),t.jsx("p",{className:"text-sm",children:Kr(Number(r.totalSales))})]})]},r.id||a))})})]})}function Xr(){const[e,s]=i.useState(0),[n,o]=i.useState(0),[r,a]=i.useState(0),[l,c]=i.useState(0),f=Ut(),d=async()=>{try{const u=await W.get("agent-broker",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("access_token")}`}});s(u.data.agentsListCount||0),o(u.data.pendingAgentsCount||0),a(u.data.agentsLicensedCount||0),c(u.data.agentsUnlicensedCount||0)}catch(u){console.error("Error fetching members:",u),Vt.fire({icon:"error",title:"Error",text:"Failed to fetch data. Please login again.",confirmButtonText:"OK"}),localStorage.clear(),console.clear(),f("/")}};return i.useEffect(()=>{d()},[]),t.jsxs("div",{className:"ml-72 md:ml-0 grid grid-cols-4 md:grid-cols-1 md:gap-2 md:p-5 md:mt-0 gap-2 items-start justify-center mt-5 md:px-5 mr-2",children:[t.jsx(G,{to:"/admin/affialiated",className:"block",children:t.jsx(A,{className:"fade-in-left w-full md:w-full bg-[#eff6ff] border-b-4 border-primary",children:t.jsxs(R,{children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(S,{className:"text-3xl font-bold text-primary animate-bounce",children:e}),t.jsx(Z,{icon:Bt,className:"ml-2 h-10 text-blue-300"})]}),t.jsx(k,{className:"font-bold text-primary md:text-xs",children:"Total Broker/Agents"})]})})}),t.jsx(G,{to:"/admin/affialiated/pendingRegister",className:"block",children:t.jsx(A,{className:"fade-in-left w-full md:w-full bg-[#eff6ff] border-b-4 border-primary",children:t.jsxs(R,{children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(S,{className:"text-3xl font-bold text-black animate-bounce",children:n}),t.jsx(Z,{icon:Wt,className:"ml-2 h-10 text-[#3f3f46]"})]}),t.jsx(k,{className:"font-bold text-black md:text-xs",children:"Pending Register"})]})})}),t.jsx(G,{to:"/admin/affialiated/licensed",className:"block",children:t.jsx(A,{className:"fade-in-left w-full md:w-full bg-[#eff6ff] border-b-4 border-primary",children:t.jsxs(R,{children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(S,{className:"text-3xl font-bold text-green-500 animate-bounce",children:r}),t.jsx(Z,{icon:zt,className:"ml-2 h-10 text-green-200"})]}),t.jsx(k,{className:"font-bold text-green-500 md:text-xs",children:"Total Licensed Affialiated"})]})})}),t.jsx(G,{to:"/admin/affialiated/unlicensed",className:"block",children:t.jsx(A,{className:"fade-in-left w-full md:w-full bg-[#eff6ff] border-b-4 border-primary",children:t.jsxs(R,{children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(S,{className:"text-3xl font-bold text-red-500 animate-bounce",children:l}),t.jsx(Z,{icon:Kt,className:"ml-2 h-10 text-red-200"})]}),t.jsx(k,{className:"font-bold text-red-500 md:text-xs",children:"Total Unlicensed Affialiated"})]})})})]})}function en(){return t.jsxs("div",{className:"py-5 md:pt-20",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-4xl font-bold ml-72 md:ml-0 md:grid-cols-1 md:gap-2 md:p-5 md:mt-0 md:text-2xl",children:"Dashboard"}),t.jsx(Xr,{})]}),t.jsxs("div",{className:"ml-72 md:ml-0 grid grid-cols-2 md:grid-cols-1 md:gap-2 md:p-5 md:mt-0 gap-2 items-start justify-center mt-5 md:px-5 mr-2",children:[t.jsx(Gt,{}),t.jsx(Zt,{})]}),t.jsxs("div",{className:"ml-72 md:ml-0 grid grid-cols-2 md:grid-cols-1 md:gap-2 md:p-5 md:mt-0 gap-2 items-start justify-center mt-5 md:px-5 mr-2",children:[t.jsx(qt,{}),t.jsx(Vr,{})]})]})}export{en as default};
