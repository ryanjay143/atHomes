import{j as e,L as J,r,B as g,F as l,a as K,af as B,ab as P,ae as X,ah as Y,a4 as Z,ai as ee,aj as se,a1 as ae,ap as te,aq as $,d as le}from"./index-BqgKW3tX.js";import{B as re,a as ne,b as ie,c as oe}from"./breadcrumb-CMARPdCn.js";import{c as ce,C as de,b as me}from"./card-DMwL5mhC.js";import{I as C}from"./input-BPORAoyB.js";import{L as n}from"./label-L0oGHOiY.js";import{S as D,a as R,b as k,c as _,d as t}from"./select-yW0ppv6d.js";import{D as M,a as xe,b as O,c as he,d as fe,g as je,e as V,f as ue,T as ge,h as be,i as F,j as m,k as pe,l as c}from"./dialog-bG-Ik3It.js";function Ne(){return e.jsx("div",{className:"bg-gradient-to-r from-blue-900 via-blue-800 to-blue-700 shadow-lg flex flex-row items-center gap-4 p-4 rounded-xl mb-8 border border-blue-800/40",children:e.jsx("div",{className:"flex flex-col items-start md:items-center md:justify-center md:ml-10 text-accent fade-in-right w-full",children:e.jsx(re,{children:e.jsxs(ne,{children:[e.jsx(ie,{className:"text-accent",children:e.jsx(J,{to:"/broker/broker-salesReport",children:"List of Sales Report"})}),e.jsx(oe,{})]})})})})}function ve({sales:a,dateFormatter:v,currencyFormatter:x}){var j;const p=r.useRef(null),[h,f]=r.useState(!1);return e.jsx("div",{children:e.jsxs(M,{children:[e.jsx(xe,{children:e.jsx(g,{className:"h-8 w-8 font-medium text-sm rounded-md border border-primary bg-gradient-to-br from-blue-500 to-blue-700 text-white shadow hover:from-blue-600 hover:to-blue-800 transition-all duration-200",children:e.jsx(l,{icon:K})})}),e.jsxs(O,{className:"md:w-[95%] max-w-2xl h-full overflow-auto bg-gradient-to-br from-blue-50 to-blue-100 shadow-2xl border border-blue-200",children:[e.jsxs(he,{children:[e.jsxs(fe,{className:"text-start text-2xl font-bold text-blue-900 flex items-center gap-2",children:[e.jsx(l,{icon:B,className:"text-blue-500"}),"View Receipt"]}),e.jsx(je,{children:e.jsxs("div",{ref:p,className:"grid gap-6 py-6 text-start bg-white rounded-xl shadow-inner px-6",children:[e.jsxs("div",{className:"flex items-center gap-3 border-b pb-3",children:[e.jsx(l,{icon:P,className:"text-blue-400 text-lg"}),e.jsx(n,{className:"text-gray-600 font-semibold",children:"Broker/Agent:"}),e.jsxs("span",{className:"ml-2 text-base text-gray-800 font-medium",children:[a.agent.personal_info.first_name," ",a.agent.personal_info.middle_name," ",a.agent.personal_info.last_name," ",(j=a.agent.personal_info)==null?void 0:j.extension_name]})]}),e.jsxs("div",{className:"flex items-center gap-3 border-b pb-3",children:[e.jsx(l,{icon:P,className:"text-blue-400 text-lg"}),e.jsx(n,{className:"text-gray-600 font-semibold",children:"Client Name:"}),e.jsx("span",{className:"ml-2 text-base text-gray-800 font-medium",children:a.client_name})]}),e.jsxs("div",{className:"flex items-center gap-3 border-b pb-3",children:[e.jsx(l,{icon:B,className:"text-blue-400 text-lg"}),e.jsx(n,{className:"text-gray-600 font-semibold",children:"Category:"}),e.jsx("span",{className:"ml-2 text-base text-gray-800 font-medium",children:a.category})]}),e.jsxs("div",{className:"flex items-center gap-3 border-b pb-3",children:[e.jsx(l,{icon:X,className:"text-blue-400 text-lg"}),e.jsx(n,{className:"text-gray-600 font-semibold",children:"Date of Sale:"}),e.jsx("span",{className:"ml-2 text-base text-gray-800 font-medium",children:v.format(new Date(a.date_on_sale))})]}),e.jsxs("div",{className:"flex items-center gap-3 border-b pb-3",children:[e.jsx(l,{icon:Y,className:"text-green-500 text-lg"}),e.jsx(n,{className:"text-gray-600 font-semibold",children:"Amount:"}),e.jsx("span",{className:"ml-2 text-base text-green-700 font-bold",children:x.format(a.amount)})]}),e.jsxs("div",{className:"flex items-center gap-3 border-b pb-3",children:[e.jsx(l,{icon:Z,className:"text-red-400 text-lg"}),e.jsx(n,{className:"text-gray-600 font-semibold",children:"Location:"}),e.jsx("span",{className:"ml-2 text-base text-gray-800 font-medium",children:a.location})]}),e.jsxs("div",{className:"flex items-center gap-3 border-b pb-3",children:[e.jsx(l,{icon:ee,className:"text-indigo-400 text-lg"}),e.jsx(n,{className:"text-gray-600 font-semibold",children:"Remarks:"}),e.jsx("span",{className:"ml-2 text-base text-gray-800 font-medium",children:a.remarks})]}),e.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[e.jsxs(n,{className:"text-gray-600 font-semibold flex items-center gap-2",children:[e.jsx(l,{icon:se,className:"text-pink-400 text-lg"}),"Proof of Transaction:"]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{src:`https://athomes.site/${a.image}`,alt:a.image,className:"object-cover rounded-lg border-2 border-blue-200 shadow-md max-w-xs max-h-60 cursor-pointer transition-transform duration-200 hover:scale-105 hover:ring-2 hover:ring-primary",onClick:()=>f(!0),title:"Click to preview"})}),e.jsx(M,{open:h,onOpenChange:f,children:e.jsxs(O,{className:"md:max-w-[80vw] flex flex-col items-center bg-white rounded-xl shadow-2xl",children:[e.jsx("img",{src:`https://athomes.site/${a.image}`,alt:a.image,className:"max-w-[80vw] max-h-[80vh] rounded shadow-lg"}),e.jsx(V,{children:e.jsxs(g,{className:"mt-4 bg-red-500 hover:bg-red-400 text-white",onClick:()=>f(!1),children:[e.jsx(l,{icon:ae,className:"mr-1"}),"Close"]})})]})})]})]})})]}),e.jsx(V,{children:e.jsx("div",{className:"flex flex-row justify-end gap-2",children:e.jsx(ue,{asChild:!0,children:e.jsx(g,{className:"bg-red-500 hover:bg-red-400 h-8 rounded shadow",children:"Close"})})})})]})]})})}function we(){const[a,v]=r.useState([]),[x,p]=r.useState(""),[h,f]=r.useState(""),[j,I]=r.useState(""),[w,L]=r.useState(""),[o,T]=r.useState("all"),[y,A]=r.useState(""),[q,E]=r.useState(!1),Q=async()=>{try{const s=await le.get("user/broker",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("access_token")}`}});v(s.data.salesEncodingReport)}catch{}};r.useEffect(()=>{Q()},[]);const H=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"2-digit"}),S=new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}),U=s=>{f(s.target.value)},z=s=>{p(s.target.value)},i=a.filter(s=>{var u;if(x||h){const d=new Date(s.date_on_sale);d.setHours(0,0,0,0);let N=null,b=null;if(x&&(N=new Date(x),N.setHours(0,0,0,0),d<N)||h&&(b=new Date(h),b.setHours(23,59,59,999),d>b))return!1}if(j&&s.category!==j||w&&s.remarks!==w)return!1;if(y){const d=y.toLowerCase();if(![s.client_name,s.category,s.remarks,s.location,(u=s.amount)==null?void 0:u.toString(),s.date_on_sale].filter(Boolean).some(b=>b.toLowerCase().includes(d)))return!1}return!0}),W=(o==="all"?i:i.slice(0,parseInt(o)||0)).reduce((s,u)=>{const d=parseFloat(u.amount);return s+(isNaN(d)?0:d)},0),G=s=>{A(s.target.value)};return e.jsx("div",{children:e.jsxs(ce,{className:"bg-[#eef2ff] border-b-4 border-primary min-w-[100px] fade-in-left md:w-[380px]",children:[e.jsx(de,{children:e.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 md:gap-8",children:e.jsxs("div",{className:"grid grid-cols-3 md:grid-cols-1 gap-4 md:gap-4 w-full",children:[e.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[e.jsx(n,{children:"Date Range"}),e.jsxs("div",{className:"flex gap-2 md:gap-4 md:flex-col",children:[e.jsx(C,{type:"date",className:"w-full",placeholder:"Start Date",value:x,onChange:z}),e.jsx("span",{className:"flex items-center md:hidden sm:hidden",children:"-"}),e.jsx(C,{type:"date",className:"w-full",placeholder:"End Date",value:h,onChange:U})]})]}),e.jsxs("div",{className:"grid w-full items-center gap-1.5 2xl:w-[310px] 2xl:ml-10 md:ml-0 xs:ml-0 xs:w-full",children:[e.jsx(n,{children:"Category"}),e.jsxs(D,{value:j,onValueChange:I,children:[e.jsx(R,{className:"xl:w-full md:w-full border border-primary",children:e.jsx(k,{placeholder:"Select category"})}),e.jsxs(_,{children:[e.jsx(t,{value:"Lot only",children:"Lot only"}),e.jsx(t,{value:"House and lot",children:"House and lot"}),e.jsx(t,{value:"Condominium/Apartment",children:"Condominium/Apartment"}),e.jsx(t,{value:"Commercial Properties",children:"Commercial Properties"}),e.jsx(t,{value:"Rental Properties",children:"Rental Properties"}),e.jsx(t,{value:"Farm Lot",children:"Farm Lot"})]})]})]}),e.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[e.jsx(n,{children:"Remarks"}),e.jsxs(D,{value:w,onValueChange:L,children:[e.jsx(R,{children:e.jsx(k,{placeholder:"Select remarks"})}),e.jsxs(_,{children:[e.jsx(t,{value:"Sold",children:"Sold"}),e.jsx(t,{value:"Not Sold",children:"Not Sold"}),e.jsx(t,{value:"Pre-Selling",children:"Pre-Selling"}),e.jsx(t,{value:"RFO",children:"Ready for Occupancy - (RFO)"})]})]})]})]})})}),e.jsxs(me,{children:[e.jsxs("div",{className:"flex flex-row md:grid md:grid-cols-2 justify-end items-start md:items-center gap-2 md:gap-4 pt-5",children:[e.jsxs(g,{onMouseEnter:()=>E(!0),onMouseLeave:()=>E(!1),onClick:()=>{T(a.length.toString()),A(""),p(""),f(""),I(""),L("")},children:[e.jsx(l,{icon:te,className:`${q?"animate-spin":""}`}),"Refresh list"]}),e.jsxs(g,{className:"bg-red-500 text-white hover:bg-red-400 hover:text-white",children:[e.jsx(l,{icon:$}),"Export to PDF"]}),e.jsxs(g,{className:"bg-green-500 text-white hover:bg-green-400 hover:text-white",children:[e.jsx(l,{icon:$}),"Export to Excel"]})]}),e.jsxs("div",{className:"py-2 mt-5 flex flex-row justify-between gap-4",children:[e.jsxs(D,{value:o,onValueChange:T,children:[e.jsxs(R,{className:"w-[120px] md:w-full border border-primary",children:[e.jsx("span",{className:"text-[#172554]",children:"Show"}),e.jsx(k,{placeholder:"All"})]}),e.jsxs(_,{children:[e.jsx(t,{value:"all",children:"All"}),e.jsx(t,{value:"5",children:"5"}),e.jsx(t,{value:"10",children:"10"}),e.jsx(t,{value:"20",children:"20"}),e.jsx(t,{value:"30",children:"30"}),e.jsx(t,{value:"40",children:"40"}),e.jsx(t,{value:"50",children:"50"})]})]}),e.jsx(C,{type:"text",placeholder:"Search",className:"w-52 md:w-full",value:y,onChange:G})]}),e.jsx("div",{className:"fade-in-left ",children:e.jsxs(ge,{children:[e.jsx(be,{className:"bg-primary text-base",children:e.jsxs(F,{children:[e.jsx(m,{children:"#"}),e.jsx(m,{children:"Client name"}),e.jsx(m,{children:"Category"}),e.jsx(m,{children:"Reservation date"}),e.jsx(m,{children:"Location"}),e.jsx(m,{children:"Amount"}),e.jsx(m,{children:"Remarks"}),e.jsx(m,{className:"text-right",children:"Action"})]})}),e.jsxs(pe,{children:[(o==="all"?i:i.slice(0,parseInt(o))).length===0&&e.jsx(F,{children:e.jsx(c,{colSpan:8,className:"text-center text-sm font-medium text-gray-500",children:"No record found."})}),(o==="all"?i:i.slice(0,parseInt(o))).map((s,u)=>e.jsxs(F,{children:[e.jsx(c,{className:"font-medium border border-[#bfdbfe]",children:u+1}),e.jsx(c,{className:"border border-[#bfdbfe]",children:s.client_name}),e.jsx(c,{className:"border border-[#bfdbfe]",children:s.category}),e.jsx(c,{className:"border border-[#bfdbfe]",children:H.format(new Date(s.date_on_sale))}),e.jsx(c,{className:"border border-[#bfdbfe]",children:s.location}),e.jsx(c,{className:"border border-[#bfdbfe]",children:S.format(s.amount)}),e.jsx(c,{className:"border border-[#bfdbfe]",children:s.remarks}),e.jsx(c,{className:"text-right border border-[#bfdbfe]",children:e.jsx(ve,{sales:s,dateFormatter:H,currencyFormatter:S})})]},s.id))]})]})}),e.jsxs("div",{className:"flex flex-row  justify-between mt-3",children:[e.jsxs("h2",{className:"text-[#172554] text-sm w-full mt-1",children:["Total Displayed Sales: ",S.format(W)]}),e.jsx("div",{children:e.jsx("p",{className:"text-[#172554] text-sm w-full",children:i.length===0?"Showing 0 entries":`Showing 1 to ${o==="all"?i.length:Math.min(parseInt(o)||0,i.length)} of ${i.length} entries`})})]})]})]})})}function Fe(){return e.jsx("div",{className:"flex flex-col md:flex-row gap-4",children:e.jsxs("div",{className:"ml-72 md:ml-0  gap-2 items-start justify-center mr-5 md:px-2 ",children:[e.jsx(Ne,{}),e.jsx(we,{})]})})}export{Fe as default};
